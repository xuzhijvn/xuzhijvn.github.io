<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Manual on ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³</title>
    <link>https://xuzhijvn.github.io/zh-cn/series/manual/</link>
    <description>Recent content in Manual on ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>Copyright Â© 2016-{year} Razon Yang. All Rights Reserved.</copyright>
    <lastBuildDate>Thu, 20 Jan 2022 13:58:34 +0800</lastBuildDate><atom:link href="https://xuzhijvn.github.io/zh-cn/series/manual/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>MQå®ç°å»¶æ—¶æ¶ˆæ¯</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E5%AE%9E%E7%8E%B0%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF/</link>
      <pubDate>Thu, 20 Jan 2022 13:58:34 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E5%AE%9E%E7%8E%B0%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF/</guid>
      <description></description>
    </item>
    
    <item>
      <title>RabbitMQæ¸…ç©ºé˜Ÿåˆ—çš„å‡ ç§æ–¹å¼</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mq/rabbitmq/rabbitmq%E6%B8%85%E7%A9%BA%E9%98%9F%E5%88%97%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</link>
      <pubDate>Tue, 04 Jan 2022 10:04:18 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mq/rabbitmq/rabbitmq%E6%B8%85%E7%A9%BA%E9%98%9F%E5%88%97%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</guid>
      <description>&lt;p&gt;ğŸ”¢&lt;/p&gt;
&lt;p&gt;è¿™é‡Œåˆ—ä¸¾å‡ ç§æ¸…ç©ºRabbitMQé˜Ÿåˆ—çš„æ–¹æ¡ˆ&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>ä»£ç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86/</link>
      <pubDate>Sat, 25 Dec 2021 17:51:36 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86/</guid>
      <description>&lt;p&gt;&lt;strong&gt;ä»£ç†æ¨¡å¼&lt;/strong&gt;ï¼ˆProxy Patternï¼‰ï¼Œå¼ºè°ƒçš„æ˜¯å¯¹å¯¹è±¡çš„æ§åˆ¶ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>è£…é¥°å™¨</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E5%99%A8/</link>
      <pubDate>Sat, 25 Dec 2021 17:51:18 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E5%99%A8/</guid>
      <description>&lt;p&gt;&lt;strong&gt;è£…é¥°æ¨¡å¼&lt;/strong&gt;ï¼ˆDecorator Patternï¼‰ï¼Œå¼ºè°ƒçš„æ˜¯å¯¹å¯¹è±¡çš„åŠŸèƒ½å¢å¼ºã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Java SPI</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-spi/</link>
      <pubDate>Wed, 22 Dec 2021 16:49:52 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-spi/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸å›ç­”SPIæ˜¯ä»€ä¹ˆï¼Ÿè€Œæ˜¯ç»“åˆæºç æ·±å…¥å‰–æSPIè¯¥æ€ä¹ˆä½¿ç”¨ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Log4j2 JNDIè¿œç¨‹æ³¨å…¥æ¼æ´å¼•å‘çš„æ€è€ƒ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/log4j2-jndi%E8%BF%9C%E7%A8%8B%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83/</link>
      <pubDate>Sun, 19 Dec 2021 22:55:54 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/log4j2-jndi%E8%BF%9C%E7%A8%8B%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83/</guid>
      <description>&lt;p&gt;12æœˆ10æ—¥å‡Œæ™¨ï¼ŒApache å¼€æºé¡¹ç›® Log4j çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ç»†èŠ‚è¢«å…¬å¼€ï¼Œç”±äºå…¶åˆ©ç”¨ç®€å•ã€å±å®³å·¨å¤§ï¼Œä¸€æ—¶å¼•èµ·ä¸å°çš„çƒ­åº¦ã€‚æœ¬æ–‡å°†ä»¥è¯¥äº‹ä»¶ä¸ºåˆ‡å…¥ç‚¹ï¼Œæµ…æå…¶ä¸­æ¶‰åŠçš„ä¸€äº›æŠ€æœ¯ç‚¹ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>JVM OOM</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm-oom/</link>
      <pubDate>Sun, 05 Dec 2021 11:48:50 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm-oom/</guid>
      <description></description>
    </item>
    
    <item>
      <title>é•¿è¿æ¥çŸ­è¿æ¥</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/%E9%95%BF%E8%BF%9E%E6%8E%A5%E7%9F%AD%E8%BF%9E%E6%8E%A5/</link>
      <pubDate>Wed, 03 Nov 2021 11:00:43 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/%E9%95%BF%E8%BF%9E%E6%8E%A5%E7%9F%AD%E8%BF%9E%E6%8E%A5/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Redisäº‹åŠ¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E4%BA%8B%E5%8A%A1/</link>
      <pubDate>Fri, 08 Oct 2021 16:45:53 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E4%BA%8B%E5%8A%A1/</guid>
      <description>rediså®ƒåªæ˜¯åšåˆ°äº†ï¼š
 å®ƒè®¤ä¸ºçš„åŸå­æ€§ã€‚ï¼ˆå•ä¸ªå‘½ä»¤åŸå­ï¼Œå¤šæ¡å‘½ä»¤ä¸ä¸€å®šåŸå­ï¼‰ éš”ç¦»æ€§ã€‚ï¼ˆå•çº¿ç¨‹æ‰§è¡Œï¼Œå„äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œå¤©ç„¶æ»¡è¶³éš”ç¦»ï¼‰ AOF/RDBä¿è¯äº†éƒ¨åˆ†çš„æŒä¹…æ€§ã€‚ï¼ˆæŒä¹…åŒ–çš„æ—¶å€™å¯èƒ½å­˜åœ¨æ•°æ®ä¸¢å¤±ï¼‰ å®ƒä¸å­˜åœ¨ACIDä¸­çš„Cçš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ²¡æœ‰çº¦æŸã€‚  1. å‘½ä»¤ä½¿ç”¨é”™è¯¯ è¿™ç§é”™è¯¯redisåœ¨æ‰§è¡Œå‰å°±èƒ½æ£€æŸ¥å‡ºæ¥ï¼Œå› æ­¤æ•´ä¸ªäº‹åŠ¡éƒ½ä¸æ‰§è¡Œã€‚
127.0.0.1:6379&amp;gt; get name &amp;#34;xumeili&amp;#34; 127.0.0.1:6379&amp;gt; get age &amp;#34;28&amp;#34; 127.0.0.1:6379&amp;gt; get sex &amp;#34;female&amp;#34; 127.0.0.1:6379&amp;gt; multi OK 127.0.0.1:6379&amp;gt; set name xuzhijun QUEUED 127.0.0.1:6379&amp;gt; set age (error) ERR wrong number of arguments for &amp;#39;set&amp;#39; command 127.0.0.1:6379&amp;gt; set sex male QUEUED 127.0.0.1:6379&amp;gt; exec (error) EXECABORT Transaction discarded because of previous errors. 127.0.0.1:6379&amp;gt; get name &amp;#34;xumeili&amp;#34; 127.0.0.1:6379&amp;gt; get age &amp;#34;28&amp;#34; 127.0.0.1:6379&amp;gt; get sex &amp;#34;female&amp;#34; 2. å‘½ä»¤æ‰§è¡Œé”™è¯¯ è¿™ç§é”™è¯¯redisæ— æ³•åœ¨æ‰§è¡Œå‰å‘ç°ï¼Œå› æ­¤ä¸å½±å“è¿™ç§é”™è¯¯çš„å‰åå‘½ä»¤è¢«æäº¤ã€‚</description>
    </item>
    
    <item>
      <title>Adapter</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8/</link>
      <pubDate>Tue, 05 Oct 2021 21:33:09 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/gof/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8/</guid>
      <description>&lt;p&gt;JAVA JDK 1.1 æä¾›äº† Enumeration æ¥å£ï¼Œè€Œåœ¨ 1.2 ä¸­æä¾›äº† Iterator æ¥å£ï¼Œæƒ³è¦ä½¿ç”¨ 1.2 çš„ JDKï¼Œåˆ™è¦å°†ä»¥å‰ç³»ç»Ÿçš„ Enumeration æ¥å£è½¬åŒ–ä¸º Iterator æ¥å£ï¼Œè¿™æ—¶å°±éœ€è¦é€‚é…å™¨æ¨¡å¼ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>RPCç»¼è¿°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/rpc%E7%BB%BC%E8%BF%B0/</link>
      <pubDate>Thu, 30 Sep 2021 16:20:07 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/rpc%E7%BB%BC%E8%BF%B0/</guid>
      <description>&lt;p&gt;RPCçš„æœ¬è´¨æ˜¯è¦ä½¿å¾—å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·æ— æ„Ÿã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Javaåºåˆ—åŒ–</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%BA%8F%E5%88%97%E5%8C%96/</link>
      <pubDate>Mon, 27 Sep 2021 11:24:13 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%BA%8F%E5%88%97%E5%8C%96/</guid>
      <description>&lt;ol&gt;
&lt;li&gt;å¯¹è±¡çš„ç±»åã€å®ä¾‹å˜é‡ï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»å‹ï¼Œæ•°ç»„ï¼Œå¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼‰éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼›æ–¹æ³•ã€ç±»å˜é‡ã€transientå®ä¾‹å˜é‡éƒ½ä¸ä¼šè¢«åºåˆ—åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;Serializableååºåˆ—åŒ–ä¸ä¼šè°ƒç”¨æ„é€ æ–¹æ³•ï¼›&lt;/li&gt;
&lt;li&gt;å•ä¾‹ç±»åºåˆ—åŒ–ï¼Œéœ€è¦é‡å†™readResolve()æ–¹æ³•ï¼›å¦åˆ™ä¼šç ´åå•ä¾‹åŸåˆ™ï¼›&lt;/li&gt;
&lt;li&gt;åºåˆ—åŒ–å¯¹è±¡çš„&lt;code&gt;å¼•ç”¨ç±»å‹å˜é‡&lt;/code&gt;ä¹Ÿè¦å®ç°Serializableæ¥å£ï¼›&lt;/li&gt;
&lt;li&gt;åŒä¸€å¯¹è±¡åºåˆ—åŒ–å¤šæ¬¡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æµï¼Œä»¥åéƒ½åªæ˜¯ä¿å­˜åºåˆ—åŒ–ç¼–å·ï¼Œä¸ä¼šé‡å¤åºåˆ—åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Externalizableéœ€è¦å®ç°å®ƒçš„æ¥å£ï¼Œå¹¶æä¾›æ— å‚æ„é€ æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>å‡ ç§åºåˆ—åŒ–æ¡†æ¶å¯¹æ¯”</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%87%A0%E7%A7%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/</link>
      <pubDate>Sun, 26 Sep 2021 19:49:15 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%87%A0%E7%A7%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/</guid>
      <description>&lt;p&gt;&lt;code&gt;JDK Serializable&lt;/code&gt;, &lt;code&gt;FST&lt;/code&gt; åªé€‚ç”¨äºJavaï¼›&lt;code&gt;Protobuf&lt;/code&gt;, &lt;code&gt;Thrift&lt;/code&gt;, &lt;code&gt;Avro&lt;/code&gt; æ”¯æŒå¤šç§è¯­è¨€ï¼Œä½†éƒ½éœ€è¦å…ˆé€šè¿‡IDLï¼ˆæ¥å£æè¿°è¯­è¨€ï¼ŒInterface description languageï¼‰å®šä¹‰Schemaï¼›&lt;code&gt;Avro&lt;/code&gt;å’Œ&lt;code&gt;Kryo&lt;/code&gt;åºåˆ—åŒ–åçš„æ•°æ®æœ€å°ï¼Œ&lt;code&gt;FST&lt;/code&gt;å’Œ&lt;code&gt;Kryo&lt;/code&gt;åºåˆ—åŒ–æ—¶é—´å¼€é”€è¡¨ç°æœ€å¥½ï¼›&lt;code&gt;Hessian&lt;/code&gt;æ”¯æŒå¤šè¯­è¨€ï¼Œæ— éœ€IDLå®šä¹‰Schemaï¼Œå¯¹Javaæ•°æ®ç±»å‹ã€è¯­æ³•çš„æ”¯æŒæœ€ä½³ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQLå®éªŒ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E5%AE%9E%E9%AA%8C/</link>
      <pubDate>Wed, 22 Sep 2021 14:10:51 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E5%AE%9E%E9%AA%8C/</guid>
      <description>&lt;p&gt;å®éªŒå‰æï¼šMySQLé»˜è®¤éš”ç¦»çº§åˆ« = &lt;code&gt;REPEATABLE-READ&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Reactive Streams</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/reactive-streams/</link>
      <pubDate>Thu, 16 Sep 2021 17:11:30 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/reactive-streams/</guid>
      <description>&lt;p&gt;JDKçš„å¼‚æ­¥å¤„ç†ï¼Œä¸€ç›´ç›¸å¯¹è¾ƒå¼±ï¼Œè¿™æ–¹é¢ä¹Ÿæœ‰å¾ˆå¼ºçš„ç¬¬ä¸‰æ–¹æ¡†æ¶ã€‚æœ€è¿‘åœ¨å­¦ä¹ è¿™æ–¹é¢çš„å†…å®¹ï¼Œå°†å­¦ä¹ è¿‡ç¨‹è®°å½•åœ¨è¿™é‡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« é‡Œï¼Œä¸»è¦äº†è§£Javaä¸­å¼‚æ­¥æµå¤„ç†çš„é¡¶çº§æ¦‚å¿µï¼šReactive Streamsã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Project Reactor</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/project-reactor/</link>
      <pubDate>Thu, 16 Sep 2021 16:43:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/project-reactor/</guid>
      <description>&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†Reactive Streamsè§„èŒƒï¼Œç°åœ¨å­¦ä¹ ä¸€ä¸ªReactive Streamsè§„èŒƒçš„æµè¡Œå®ç°ï¼š&lt;code&gt;Project Reactor&lt;/code&gt;çš„æ ¸å¿ƒé¡¹ç›®&lt;code&gt;Reactor Core&lt;/code&gt;ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>ç½‘å…³è®¾è®¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%BD%91%E5%85%B3%E8%AE%BE%E8%AE%A1/</link>
      <pubDate>Thu, 16 Sep 2021 10:29:48 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%BD%91%E5%85%B3%E8%AE%BE%E8%AE%A1/</guid>
      <description>&lt;p&gt;&lt;code&gt;Spring cloud gateway&lt;/code&gt;  ğŸ‘‰ &lt;code&gt;webflux&lt;/code&gt; ğŸ‘‰ &lt;code&gt;project reactor&lt;/code&gt; ğŸ‘‰ &lt;code&gt;netty&lt;/code&gt; ğŸ‘‰ &lt;code&gt;epoll&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>è·¨åŸŸ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E8%B7%A8%E5%9F%9F/</link>
      <pubDate>Tue, 14 Sep 2021 15:03:33 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E8%B7%A8%E5%9F%9F/</guid>
      <description>&lt;p&gt;å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨å¯¹è·¨åŸŸè¯·æ±‚ä½œå‡ºé™åˆ¶ï¼Œæœ€å¼€å§‹åªå¯¹è®¿é—®Cookieåšå‡ºé™åˆ¶ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>volatile</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/volatile/</link>
      <pubDate>Mon, 13 Sep 2021 15:37:40 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/volatile/</guid>
      <description>&lt;p&gt;JVM volatileç”¨äºä¿è¯ç¨‹åº&lt;code&gt;å¯è§æ€§&lt;/code&gt;ã€&lt;code&gt;é¡ºåºæ€§&lt;/code&gt;ï¼Œä½†æ˜¯ä¸ä¿è¯&lt;code&gt;åŸå­æ€§&lt;/code&gt;ã€‚volatileå®ç°åŸç†æ˜¯é€šè¿‡åœ¨æ“ä½œå˜é‡ä¹‹å‰ï¼Œå¤šåŠ ä¸€ä¸ª&lt;code&gt;lockå‰ç¼€æŒ‡ä»¤&lt;/code&gt;ï¼Œé€šè¿‡æ±‡ç¼–å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‰ç¼€æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;å½“è°ˆåˆ°é¡ºåºæ€§æ—¶å¸¸ä¼šæåˆ°&lt;code&gt;å†…å­˜å±éšœ&lt;/code&gt;ï¼Œå¸¸è§çš„ç¡¬ä»¶å±‚é¢&lt;code&gt;å†…å­˜å±éšœ&lt;/code&gt;æœ‰ï¼š&lt;code&gt;sfence&lt;/code&gt;    &lt;code&gt;lfence&lt;/code&gt;     &lt;code&gt;mfence&lt;/code&gt; ï¼Œ&lt;code&gt;lockå‰ç¼€æŒ‡ä»¤&lt;/code&gt;ä¸æ˜¯å†…å­˜å±éšœï¼Œè€Œæ˜¯ä¸€ç§é”ï¼Œæ‰§è¡Œæ—¶ä¼šé”ä½å†…å­˜å­ç³»ç»Ÿæ¥ç¡®ä¿æ‰§è¡Œé¡ºåºï¼Œç”šè‡³è·¨å¤šä¸ªCPUï¼ŒJVMåˆ©ç”¨lockå‰ç¼€æŒ‡ä»¤çš„ç‰¹ç‚¹å®ç°äº†&lt;code&gt;å¯è§æ€§&lt;/code&gt; å’Œ &lt;code&gt;é¡ºåºæ€§&lt;/code&gt;ï¼Œlockå‰ç¼€æŒ‡ä»¤å®ç°å¯è§æ€§æ¯”è¾ƒå¥½ç†è§£ï¼Œä¸»è¦æ˜¯åˆ©ç”¨CPUæä¾›çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ˆä¾‹å¦‚Intelçš„MESIï¼‰,å½“ç„¶æ›´å·®ä¸€ç‚¹çš„è¿˜æœ‰lockæ€»çº¿çš„æ–¹å¼ï¼ˆé™åˆ¶CPUè®¿é—®å†…å­˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;JMMå±‚é¢ä¸ºäº†å®ç°&lt;code&gt;é¡ºåºæ€§&lt;/code&gt;ï¼ŒåˆæŠ½è±¡å‡ºå››ä¸ª&lt;code&gt;å†…å­˜å±éšœ&lt;/code&gt;çš„æ¦‚å¿µï¼š&lt;code&gt;LoadLoad&lt;/code&gt;     &lt;code&gt;StoreStore&lt;/code&gt;    &lt;code&gt;LoadStore&lt;/code&gt;    &lt;code&gt;StoreLoad&lt;/code&gt;ï¼Œå­—èŠ‚ç å±‚é¢å¹¶æ²¡æœ‰&lt;code&gt;å†…å­˜å±éšœ&lt;/code&gt;çš„æŒ‡ä»¤ï¼ŒJVMçš„C++ä»£ç ä¼šæœ‰å››ä¸ªåŒåå‡½æ•°ä¸ä¹‹å¯¹åº”ï¼ŒJVMé‡åˆ°volatileå˜é‡ä¾¿ä¼šåœ¨å…¶å‰åæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œä»è€Œå®ç°å†…å­˜å±éšœï¼Œå…·ä½“æ¥è¯´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;LoadLoadBarrier
&lt;span style=&#34;color:#66d9ef&#34;&gt;volatile&lt;/span&gt; è¯»æ“ä½œ
LoadStoreBarrier

StoreStoreBarrier
&lt;span style=&#34;color:#66d9ef&#34;&gt;volatile&lt;/span&gt; å†™æ“ä½œ
StoreLoadBarrie
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>session</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/http/session/</link>
      <pubDate>Thu, 09 Sep 2021 20:36:27 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/http/session/</guid>
      <description></description>
    </item>
    
    <item>
      <title>JVMé”ä¼˜åŒ–</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E9%94%81%E4%BC%98%E5%8C%96/</link>
      <pubDate>Thu, 09 Sep 2021 10:46:14 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E9%94%81%E4%BC%98%E5%8C%96/</guid>
      <description></description>
    </item>
    
    <item>
      <title>poll select epollåŒºåˆ«</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/system/poll-select-epoll%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Wed, 08 Sep 2021 09:38:02 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/system/poll-select-epoll%E5%8C%BA%E5%88%AB/</guid>
      <description></description>
    </item>
    
    <item>
      <title>JVMå†…å­˜æ¨¡å‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/</link>
      <pubDate>Mon, 06 Sep 2021 00:13:21 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/</guid>
      <description></description>
    </item>
    
    <item>
      <title>JVMç±»åŠ è½½å™¨</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</link>
      <pubDate>Mon, 06 Sep 2021 00:13:02 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</guid>
      <description></description>
    </item>
    
    <item>
      <title>JVMæ¶æ„</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E6%9E%B6%E6%9E%84/</link>
      <pubDate>Mon, 06 Sep 2021 00:10:01 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E6%9E%B6%E6%9E%84/</guid>
      <description></description>
    </item>
    
    <item>
      <title>JVMåƒåœ¾å›æ”¶</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</link>
      <pubDate>Sun, 05 Sep 2021 23:48:46 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jvm%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</guid>
      <description></description>
    </item>
    
    <item>
      <title>é«˜å¹¶å‘ä¸‹çš„æµé‡æ§åˆ¶</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%8B%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/</link>
      <pubDate>Sun, 05 Sep 2021 17:58:25 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%8B%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Stringå¸¸é‡æ± </title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/string%E5%B8%B8%E9%87%8F%E6%B1%A0/</link>
      <pubDate>Sun, 05 Sep 2021 11:54:01 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/string%E5%B8%B8%E9%87%8F%E6%B1%A0/</guid>
      <description></description>
    </item>
    
    <item>
      <title>ç§’æ€ç³»ç»Ÿè®¾è®¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</link>
      <pubDate>Tue, 31 Aug 2021 21:27:50 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</guid>
      <description></description>
    </item>
    
    <item>
      <title>SpringAOPæ‰§è¡Œé¡ºåº</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springaop%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</link>
      <pubDate>Tue, 31 Aug 2021 14:50:56 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springaop%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</guid>
      <description></description>
    </item>
    
    <item>
      <title>MyBatisç¼“å­˜æœºåˆ¶</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mybatis/mybatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</link>
      <pubDate>Mon, 30 Aug 2021 21:16:45 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mybatis/mybatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</guid>
      <description></description>
    </item>
    
    <item>
      <title>åŸºäºkeepalivedå®ç°nginxé«˜å¯ç”¨</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E5%9F%BA%E4%BA%8Ekeepalived%E5%AE%9E%E7%8E%B0nginx%E9%AB%98%E5%8F%AF%E7%94%A8/</link>
      <pubDate>Sun, 29 Aug 2021 23:33:21 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E5%9F%BA%E4%BA%8Ekeepalived%E5%AE%9E%E7%8E%B0nginx%E9%AB%98%E5%8F%AF%E7%94%A8/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Nginxè´Ÿè½½å‡è¡¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/nginx%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</link>
      <pubDate>Sun, 29 Aug 2021 23:29:12 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/nginx%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</guid>
      <description></description>
    </item>
    
    <item>
      <title>å­—èŠ‚ç å®æˆ˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AD%97%E8%8A%82%E7%A0%81%E5%AE%9E%E6%88%98/</link>
      <pubDate>Sun, 29 Aug 2021 13:28:08 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AD%97%E8%8A%82%E7%A0%81%E5%AE%9E%E6%88%98/</guid>
      <description></description>
    </item>
    
    <item>
      <title>git submodule update --init --recursive</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/git-submodule-update-init-recursive/</link>
      <pubDate>Sat, 28 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/git-submodule-update-init-recursive/</guid>
      <description>æ‰§è¡Œ git submodule update --init --recursive çš„æ—¶å€™æŠ¥é”™ï¼š
fatal: remote error: upload-pack: not our ref fc7223ca00124e8f5b5b354457379071e2fd091b Fetched in submodule path &amp;#39;themes/hugo-theme-bootstrap&amp;#39;, but it did not contain fc7223ca00124e8f5b5b354457379071e2fd091b. Direct fetching of that commit failed. è§£å†³ï¼š
cd {submodule path} git reset --hard origin/master cd - git clean -n git add {submodule path} git commit git submodule update --init --recursive å‚è€ƒ git - ä¸ºä»€ä¹ˆgitå­æ¨¡å—æ›´æ–°ä¼šå›  &amp;ldquo;fatal: remote error: upload-pack: not our ref&amp;quot;è€Œå¤±è´¥ï¼Ÿ </description>
    </item>
    
    <item>
      <title>400 Bad Request</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/400-bad-request/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/400-bad-request/</guid>
      <description>éœ€è¦è®¾ç½® proxy_set_header Host $host:$server_port;
location ^~/gateway/ { proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-NginX-Proxy true; proxy_pass http://k8s_yshop-gateway-svc/; } </description>
    </item>
    
    <item>
      <title>5ç§IOæ¨¡å‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/system/5%E7%A7%8Dio%E6%A8%A1%E5%9E%8B/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/system/5%E7%A7%8Dio%E6%A8%A1%E5%9E%8B/</guid>
      <description>1. å‰è¨€ W. Richard Stevensåœ¨ ã€ŠUnix Network Programming Volume 1 3rd Edition - The Sockets Networking APIã€‹æ–‡ä¸­çš„6.2 I/O Modelså°èŠ‚ä¸­å¯¹å¦‚ä¸‹5ä¸­IOæ¨¡å‹è¿›è¡Œäº†è¯¦ç»†çš„é˜è¿°ï¼š
 blocking I/O nonblocking I/O I/O multiplexing (select and poll) signal driven I/O (SIGIO) asynchronous I/O (the POSIX aio_functions)  ç”±signal driven IOåœ¨å®é™…ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œæ‰€ä»¥ä¸»è¦ä»‹ç»å…¶ä½™å››ç§IO Modelã€‚
å†è¯´ä¸€ä¸‹IOå‘ç”Ÿæ—¶æ¶‰åŠçš„å¯¹è±¡å’Œæ­¥éª¤ã€‚å¯¹äºä¸€ä¸ªnetwork IO (è¿™é‡Œæˆ‘ä»¬ä»¥readä¸¾ä¾‹)ï¼Œå®ƒä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªç³»ç»Ÿå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨è¿™ä¸ªIOçš„process (or thread)ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç³»ç»Ÿå†…æ ¸(kernel)ã€‚å½“ä¸€ä¸ªreadæ“ä½œå‘ç”Ÿæ—¶ï¼Œå®ƒä¼šç»å†ä¸¤ä¸ªé˜¶æ®µï¼š
 ç­‰å¾…æ•°æ®å‡†å¤‡ (Waiting for the data to be ready)ï¼ˆå°†æ•°æ®ä»ç½‘å¡è¯»åˆ°å†…æ ¸ï¼‰ å°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°è¿›ç¨‹ä¸­(Copying the data from the kernel to the process)  è®°ä½è¿™ä¸¤ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºè¿™äº›IOæ¨¡å‹çš„åŒºåˆ«å°±æ˜¯åœ¨ä¸¤ä¸ªé˜¶æ®µä¸Šå„æœ‰ä¸åŒçš„æƒ…å†µã€‚
2. æ¦‚å¿µè¯´æ˜ åœ¨è¿›è¡Œè§£é‡Šä¹‹å‰ï¼Œé¦–å…ˆè¦è¯´æ˜å‡ ä¸ªæ¦‚å¿µï¼š</description>
    </item>
    
    <item>
      <title>APIæ¥å£å®‰å…¨è®¾è®¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/api%E6%8E%A5%E5%8F%A3%E5%AE%89%E5%85%A8%E8%AE%BE%E8%AE%A1/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/api%E6%8E%A5%E5%8F%A3%E5%AE%89%E5%85%A8%E8%AE%BE%E8%AE%A1/</guid>
      <description> éªŒç­¾ï¼šé˜²æ¥å£è¢«è‚†æ„è°ƒç”¨  clientå¯¹requestç­¾åï¼Œserverå¯¹è¯·æ±‚è¿›è¡ŒéªŒç­¾ã€‚
é‰´æƒï¼šé˜²è°ƒç”¨æ²¡æœ‰æƒé™çš„æ¥å£  tokené‰´æƒï¼Œå®é™…ä¸ŠéªŒç­¾ã€é‰´æƒé€šå¸¸æ˜¯ä¸€åŒå¤„ç†çš„ï¼Œä¾‹å¦‚ï¼šOAuth2
éªŒè¯è¯·æ±‚çš„timestampï¼šé˜²ç›—é“¾  å½“å‰æ—¶é—´ - timestamp &amp;gt; é˜ˆå€¼ï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚å·²ç»å¤±æ•ˆã€‚
nonceéšæœºæ•°ï¼šé˜²é‡å¤æäº¤  ä¸Šè¿°éªŒè¯timestampçš„è¿‡ç¨‹ä¸­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼šé˜ˆå€¼ = 60sï¼Œé‚£ä¹ˆ60så†…å‘ç”Ÿé‡å¤æäº¤æ€ä¹ˆåŠï¼Ÿ
è§£å†³åŠæ³•æ˜¯ï¼šserverç«¯ä¿å­˜å¸¦éšæœºæ•°çš„è¯·æ±‚ï¼ˆéšæœºæ•°+åŸè¯·æ±‚ = æ–°è¯·æ±‚ï¼Œé€šå¸¸æ˜¯redisä¿å­˜ï¼‰ã€‚
æ¥å£å¹‚ç­‰æ€§ä¿è¯ï¼ˆå”¯ä¸€ä¸»é”®ã€ä¹è§‚é”ï¼‰  å¹‚ç­‰æ€§ï¼šä»¥ç›¸åŒçš„è¯·æ±‚è°ƒç”¨è¿™ä¸ªæ¥å£ä¸€æ¬¡å’Œè°ƒç”¨è¿™ä¸ªæ¥å£å¤šæ¬¡ï¼Œå¯¹ç³»ç»Ÿäº§ç”Ÿçš„å½±å“æ˜¯ç›¸åŒçš„ã€‚
é«˜å¹¶å‘ä¸‹æ¥å£å¹‚ç­‰æ€§è§£å†³æ–¹æ¡ˆ æ¶æ„çš„é‡å¤æäº¤ï¼šè¯·æ±‚çš„timestampã€nonceè¾ƒä¸Šä¸€æ¬¡æ²¡å˜ï¼Œè¿™ç§æƒ…å†µé€šè¿‡redisä¿å­˜å¸¦éšæœºæ•°çš„è¯·æ±‚å¯ä»¥æœç»ã€‚
ç”¨æˆ·è¯¯æ“ä½œå¯¼è‡´çš„é‡å¤æäº¤ï¼šå‰ç«¯æ§åˆ¶+å¹‚ç­‰è®¾è®¡ã€‚
å¹‚ç­‰ä¸é‡å¤æäº¤çš„åŒºåˆ«åœ¨äºï¼šå¹‚ç­‰æ˜¯åœ¨é‡å¤æäº¤å·²ç»å‘ç”Ÿäº†çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä¿è¯å¤šæ¬¡è°ƒç”¨æ¥å£çš„ç»“æœä¸€è‡´ï¼Œé‡å¤æäº¤åœ¨å‰ï¼Œå¹‚ç­‰ä¿è¯åœ¨åã€‚
å‚è€ƒé“¾æ¥ï¼š å¦‚ä½•ä¿è¯æ¥å£çš„å¹‚ç­‰æ€§ è¯´è¯´APIçš„é˜²é‡æ”¾æœºåˆ¶ Javaç”Ÿé²œç”µå•†å¹³å°-APIæ¥å£è®¾è®¡ä¹‹tokenã€timestampã€sign å…·ä½“æ¶æ„ä¸å®ç°ï¼ˆAPP/å°ç¨‹åºï¼Œä¼ è¾“å®‰å…¨ï¼‰ é˜¿é‡Œä¸€é¢ï¼šå¦‚ä½•ä¿è¯APIæ¥å£æ•°æ®å®‰å…¨ï¼Ÿ å®ç°æ¥å£å¹‚ç­‰æ€§çš„å‡ ç§æ–¹æ¡ˆ </description>
    </item>
    
    <item>
      <title>AQS</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/aqs/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/aqs/</guid>
      <description>AQSä½œä¸ºJavaå¹¶å‘ç¼–ç¨‹çš„åŸºçŸ³ï¼Œåœ¨JavaåŒæ­¥å·¥å…·ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼Œä¾‹å¦‚ï¼šReentrantLock , Semaphore , CountDownLatch ReentrantReadWriteLock , ThreadPoolExecutor
ä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹å¼ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œå®ƒä»¬ä¹Ÿåªéœ€å®ç° tryAcquire / tryRelease , tryAcquireShared / tryReleaseShared ä¸­çš„ä¸€ç»„å³å¯ã€‚AQSä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚ReentrantReadWriteLockã€‚ReentrantLockæ˜¯ç‹¬å é”ã€‚
AQSæ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºï¼ˆstateï¼‰ç©ºé—²ï¼Œé‚£ä¹ˆå°±å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ï¼›å¦‚æœå…±äº«èµ„æºè¢«å ç”¨ï¼Œå°±éœ€è¦ä¸€å®šçš„é˜»å¡ç­‰å¾…å”¤é†’æœºåˆ¶æ¥ä¿è¯é”åˆ†é…ã€‚è¿™ä¸ªæœºåˆ¶ä¸»è¦ç”¨çš„æ˜¯CLHé˜Ÿåˆ—çš„å˜ä½“å®ç°çš„ï¼Œå°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚
CLHï¼šCraig, Landin, and Hagerstené˜Ÿåˆ—ï¼Œæ˜¯å•å‘é“¾è¡¨ï¼ŒAQSä¸­çš„é˜Ÿåˆ—æ˜¯CLHå˜ä½“çš„è™šæ‹ŸåŒå‘é˜Ÿåˆ—ï¼ˆFIFOï¼‰ï¼ŒAQSæ˜¯é€šè¿‡å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ªèŠ‚ç‚¹æ¥å®ç°é”çš„åˆ†é…ã€‚
ä¸»è¦åŸç†å›¾å¦‚ä¸‹ï¼š
AQSä½¿ç”¨ä¸€ä¸ªVolatileçš„intç±»å‹çš„æˆå‘˜å˜é‡stateæ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„FIFOé˜Ÿåˆ—æ¥å®Œæˆèµ„æºè·å–çš„æ’é˜Ÿå·¥ä½œï¼Œé€šè¿‡CASå®Œæˆå¯¹Stateå€¼çš„ä¿®æ”¹ã€‚
è·å¾—é” acquire()æ˜¯ç‹¬å æ¨¡å¼ä¸‹çº¿ç¨‹è·å–å…±äº«èµ„æºçš„é¡¶å±‚å…¥å£ã€‚å¦‚æœè·å–åˆ°èµ„æºï¼Œçº¿ç¨‹ç›´æ¥è¿”å›ï¼Œå¦åˆ™è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°è·å–åˆ°èµ„æºä¸ºæ­¢ï¼Œä¸”æ•´ä¸ªè¿‡ç¨‹å¿½ç•¥ä¸­æ–­çš„å½±å“ã€‚è·å–åˆ°èµ„æºåï¼Œçº¿ç¨‹å°±å¯ä»¥å»æ‰§è¡Œå…¶ä¸´ç•ŒåŒºä»£ç äº†ã€‚
public final void acquire(int arg) { if (!tryAcquire(arg) &amp;amp;&amp;amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) selfInterrupt(); } å¦‚æœå†æœ‰çº¿ç¨‹è¦è·å–é”ï¼Œä¾æ¬¡åœ¨é˜Ÿåˆ—ä¸­å¾€åæ’é˜Ÿå³å¯ã€‚
tryAcquire()æ–¹æ³•å°è¯•å»è·å–ç‹¬å èµ„æºã€‚å¦‚æœè·å–æˆåŠŸï¼Œåˆ™ç›´æ¥è¿”å›trueï¼Œå¦åˆ™ç›´æ¥è¿”å›falseã€‚éœ€è‡ªå®šä¹‰åŒæ­¥å™¨å»å®ç°
protected boolean tryAcquire(int arg) { throw new UnsupportedOperationException(); } AQSåªæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå…·ä½“èµ„æºçš„è·å–/é‡Šæ”¾æ–¹å¼äº¤ç”±è‡ªå®šä¹‰åŒæ­¥å™¨å»å®ç°å—ã€‚AQSè¿™é‡Œåªå®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“èµ„æºçš„è·å–äº¤ç”±è‡ªå®šä¹‰åŒæ­¥å™¨å»å®ç°äº†ï¼ˆé€šè¿‡stateçš„get/set/CASï¼‰ï¼ï¼ï¼è‡³äºèƒ½ä¸èƒ½é‡å…¥ï¼Œèƒ½ä¸èƒ½åŠ å¡ï¼Œé‚£å°±çœ‹å…·ä½“çš„è‡ªå®šä¹‰åŒæ­¥å™¨æ€ä¹ˆå»è®¾è®¡äº†ï¼ï¼
addWaiter(Node)æ­¤æ–¹æ³•ç”¨äºå°†å½“å‰çº¿ç¨‹åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œå¹¶è¿”å›å½“å‰çº¿ç¨‹æ‰€åœ¨çš„ç»“ç‚¹ã€‚
private Node addWaiter(Node mode) { //ä»¥ç»™å®šæ¨¡å¼æ„é€ ç»“ç‚¹ã€‚modeæœ‰ä¸¤ç§ï¼šEXCLUSIVEï¼ˆç‹¬å ï¼‰å’ŒSHAREDï¼ˆå…±äº«ï¼‰  Node node = new Node(Thread.currentThread(), mode); //å°è¯•å¿«é€Ÿæ–¹å¼ç›´æ¥æ”¾åˆ°é˜Ÿå°¾ã€‚  Node pred = tail; if (pred !</description>
    </item>
    
    <item>
      <title>Async</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/async/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/async/</guid>
      <description>Spring Bootç³»åˆ—äºŒ Spring @Asyncå¼‚æ­¥çº¿ç¨‹æ± ç”¨æ³•æ€»ç»“ springbootåˆ©ç”¨@Asyncæå‡APIæ¥å£å¹¶å‘èƒ½åŠ› </description>
    </item>
    
    <item>
      <title>BeanFactoryPostProcessorå’ŒBeanPostProcessor</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/beanfactorypostprocessor%E5%92%8Cbeanpostprocessor/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/beanfactorypostprocessor%E5%92%8Cbeanpostprocessor/</guid>
      <description>BeanFactoryPostProcessorå·¥ä½œåœ¨Beanå®ä¾‹åŒ–ä¹‹å‰ï¼ŒBeanPostProcessorå·¥ä½œåœ¨Beanåˆå§‹åŒ–æ–¹æ³•å‰åã€‚
BeanFactoryPostProcessorå’ŒBeanPostProcessorï¼Œè¿™ä¸¤ä¸ªæ¥å£ï¼Œéƒ½æ˜¯Springåˆå§‹åŒ–beanæ—¶å¯¹å¤–æš´éœ²çš„æ‰©å±•ç‚¹ã€‚ä¸¤ä¸ªæ¥å£åç§°çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†ä½œç”¨åŠä½¿ç”¨åœºæ™¯å´ä¸åŒï¼Œåˆ†æå¦‚ä¸‹ï¼š
1. BeanFactoryPostProcessoræ¥å£ è¯¥æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š
@FunctionalInterface public interface BeanFactoryPostProcessor { /** * Modify the application context&amp;#39;s internal bean factory after its standard * initialization. All bean definitions will have been loaded, but no beans * will have been instantiated yet. This allows for overriding or adding * properties even to eager-initializing beans. * @param beanFactory the bean factory used by the application context * @throws org.springframework.beans.BeansException in case of errors */ void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException; } å®ç°è¯¥æ¥å£ï¼Œå¯ä»¥åœ¨springçš„beanåˆ›å»ºä¹‹å‰ï¼Œä¿®æ”¹beançš„å®šä¹‰å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSpringå…è®¸BeanFactoryPostProcessoråœ¨å®¹å™¨å®ä¾‹åŒ–ä»»ä½•å…¶å®ƒbeanä¹‹å‰è¯»å–é…ç½®å…ƒæ•°æ®ï¼Œå¹¶å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚å¯ä»¥æŠŠbeançš„scopeä»singletonæ”¹ä¸ºprototypeï¼Œä¹Ÿå¯ä»¥æŠŠpropertyçš„å€¼ç»™ä¿®æ”¹æ‰ã€‚å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªBeanFactoryPostProcessorï¼Œå¹¶é€šè¿‡è®¾ç½®&amp;rsquo;order&amp;rsquo;å±æ€§æ¥æ§åˆ¶å„ä¸ªBeanFactoryPostProcessorçš„æ‰§è¡Œæ¬¡åºã€‚</description>
    </item>
    
    <item>
      <title>beanç”Ÿå‘½å‘¨æœŸ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</guid>
      <description>å®ä¾‹åŒ– -&amp;gt; å±æ€§èµ‹å€¼ -&amp;gt; åˆå§‹åŒ– -&amp;gt; é”€æ¯
å‚è€ƒé“¾æ¥ è¯·åˆ«å†é—®Spring Beançš„ç”Ÿå‘½å‘¨æœŸäº†ï¼ Spring Beançš„ç”Ÿå‘½å‘¨æœŸï¼ˆéå¸¸è¯¦ç»†ï¼‰ </description>
    </item>
    
    <item>
      <title>cacheå’Œbuffer</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/system/cache%E5%92%8Cbuffer/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/system/cache%E5%92%8Cbuffer/</guid>
      <description>é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ free -m æŸ¥çœ‹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼š
å¯ä»¥çœ‹å‡ºï¼Œç³»ç»Ÿå†…å­˜ä¸º 16Gï¼ŒSwap å†…å­˜ 16Gï¼Œmem free è™½ç„¶æ˜¾ç¤ºä¸º 1118ï¼Œå› ç¼“å­˜çš„å­˜åœ¨ï¼Œä¸èƒ½è®¤ä¸ºç³»ç»Ÿç›®å‰å†…å‰©ä¸‹è¿™ä¹ˆå¤šå†…å­˜ã€‚è€Œåº”è¯¥æŠŠ buffersã€cached çš„ä¹Ÿç®—ä¸Šï¼Œå³ free+cached+buffers=1118+7110+430ï¼8658ï¼Œæ€»å†…å­˜å†å‡å» 8658ï¼7314ï¼Œä¸ buffers/cache è¡Œä¸­å¯¹åº” free åˆ—çš„ 7312 å’Œ 8659 åŸºæœ¬ä¸€è‡´ã€‚
 è¿™é‡Œé¡ºä¾¿ä»‹ç»ä¸€ä¸‹Swapï¼Œäº†è§£Swapæ›´å¤šè¯¦æƒ…è¯·ç§»æ­¥ ğŸ‘‰ Swapäº¤æ¢åˆ†åŒºæ¦‚å¿µ   Linuxå†…æ ¸ä¸ºäº†æé«˜è¯»å†™æ•ˆç‡ä¸é€Ÿåº¦ï¼Œä¼šå°†æ–‡ä»¶åœ¨å†…å­˜ä¸­è¿›è¡Œç¼“å­˜ï¼Œè¿™éƒ¨åˆ†å†…å­˜å°±æ˜¯Cache Memory(ç¼“å­˜å†…å­˜)ã€‚å³ä½¿ä½ çš„ç¨‹åºè¿è¡Œç»“æŸåï¼ŒCache Memoryä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚è¿™å°±ä¼šå¯¼è‡´ä½ åœ¨Linuxç³»ç»Ÿä¸­ç¨‹åºé¢‘ç¹è¯»å†™æ–‡ä»¶åï¼Œä½ ä¼šå‘ç°å¯ç”¨ç‰©ç†å†…å­˜å˜å°‘ã€‚å½“ç³»ç»Ÿçš„ç‰©ç†å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†ç‰©ç†å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´é‡Šæ”¾å‡ºæ¥ï¼Œä»¥ä¾›å½“å‰è¿è¡Œçš„ç¨‹åºä½¿ç”¨ã€‚é‚£äº›è¢«é‡Šæ”¾çš„ç©ºé—´å¯èƒ½æ¥è‡ªä¸€äº›å¾ˆé•¿æ—¶é—´æ²¡æœ‰ä»€ä¹ˆæ“ä½œçš„ç¨‹åºï¼Œè¿™äº›è¢«é‡Šæ”¾çš„ç©ºé—´è¢«ä¸´æ—¶ä¿å­˜åˆ°Swapç©ºé—´ä¸­ï¼Œç­‰åˆ°é‚£äº›ç¨‹åºè¦è¿è¡Œæ—¶ï¼Œå†ä»Swapåˆ†åŒºä¸­æ¢å¤ä¿å­˜çš„æ•°æ®åˆ°å†…å­˜ä¸­ã€‚è¿™æ ·ï¼Œç³»ç»Ÿæ€»æ˜¯åœ¨ç‰©ç†å†…å­˜ä¸å¤Ÿæ—¶ï¼Œæ‰è¿›è¡ŒSwapäº¤æ¢ã€‚
 ä»Linux kernel version 2.4å¼€å§‹ï¼Œbuffer/cacheåˆå¹¶ï¼ˆè¯¦æƒ…è§ ğŸ‘‰ Linux IOçš„buffer cacheå’Œpage cacheåˆå¹¶çš„åŸå›  ï¼‰ï¼Œæ‰€ä»¥åŒæ ·ä½¿ç”¨ free -m çœ‹åˆ°çš„æ˜¯ï¼š
[root@k8s-node3 ~]# free -m total used free shared buff/cache available Mem: 7820 6577 147 30 1095 907 Swap: 0 0 0  ä½¿ç”¨ hostnamectl æˆ–è€… cat /proc/version å¯ä»¥æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼š</description>
    </item>
    
    <item>
      <title>Caffeine</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/caffeine/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/caffeine/</guid>
      <description>é’ˆå¯¹LFUå­˜åœ¨è®°å½•è®¿é—®é¢‘æ¬¡çš„å¼€é”€ã€å¯¹çªå‘ç¨€ç–æµé‡æ— èƒ½ä¸ºåŠ›çš„ç°çŠ¶ï¼›TinyLFUè¿ç”¨Countâ€“Min Sketch ç®—æ³•ã€ä¿é²œæœºåˆ¶å°è¯•è§£å†³ï¼Œå®ƒè§£å†³äº†ä¸€ä¸ªé—®é¢˜ï¼Œä½†å®ƒä»ç„¶æ— æ³•è¾ƒå¥½çš„å¤„ç†çªå‘æ€§çš„ç¨€ç–æµé‡ï¼›TinyLFUä¹‹æ‰€ä»¥æ— æ³•è§£å†³é—®é¢˜2ï¼Œæ˜¯å› ä¸ºæ–°çš„è®°å½•ï¼ˆnew itemsï¼‰è¿˜æ²¡æ¥å¾—åŠå»ºç«‹è¶³å¤Ÿçš„é¢‘ç‡å°±è¢«å‰”é™¤å‡ºå»äº†ï¼Œè¿™å°±ä½¿å¾—å‘½ä¸­ç‡ä¸‹é™ï¼ŒWindow Tiny LFUä½¿ç”¨3ä¸ªLRUé˜Ÿåˆ—è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶Caffeineä½¿ç”¨äº†RingBufferæ•°æ®ç»“æ„ã€WALæ€æƒ³ä¹Ÿæ˜¯å…¶é«˜æ•ˆçš„é‡è¦åŸå› ã€‚
1. LRU å’Œ LFU çš„ç¼ºç‚¹  LRU å®ç°ç®€å•ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹èƒ½å¤Ÿè¡¨ç°å‡ºå¾ˆå¥½çš„å‘½ä¸­ç‡ï¼Œæ˜¯ä¸€ä¸ªâ€œæ€§ä»·æ¯”â€å¾ˆé«˜çš„ç®—æ³•ï¼Œå¹³æ—¶ä¹Ÿå¾ˆå¸¸ç”¨ã€‚è™½ç„¶ LRU å¯¹çªå‘æ€§çš„ç¨€ç–æµé‡ï¼ˆsparse burstsï¼‰è¡¨ç°å¾ˆå¥½ï¼Œä½†åŒæ—¶ä¹Ÿä¼šäº§ç”Ÿç¼“å­˜æ±¡æŸ“ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœå¶ç„¶æ€§çš„è¦å¯¹å…¨é‡æ•°æ®è¿›è¡Œéå†ï¼Œé‚£ä¹ˆâ€œå†å²è®¿é—®è®°å½•â€å°±ä¼šè¢«åˆ·èµ°ï¼Œé€ æˆæ±¡æŸ“ã€‚ å¦‚æœæ•°æ®çš„åˆ†å¸ƒåœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯å›ºå®šçš„è¯ï¼Œé‚£ä¹ˆ LFU å¯ä»¥è¾¾åˆ°æœ€é«˜çš„å‘½ä¸­ç‡ã€‚ä½†æ˜¯ LFU æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œç¬¬ä¸€ï¼Œå®ƒéœ€è¦ç»™æ¯ä¸ªè®°å½•é¡¹ç»´æŠ¤é¢‘ç‡ä¿¡æ¯ï¼Œæ¯æ¬¡è®¿é—®éƒ½éœ€è¦æ›´æ–°ï¼Œè¿™æ˜¯ä¸ªå·¨å¤§çš„å¼€é”€ï¼›ç¬¬äºŒï¼Œå¯¹çªå‘æ€§çš„ç¨€ç–æµé‡æ— åŠ›ï¼Œå› ä¸ºå‰æœŸç»å¸¸è®¿é—®çš„è®°å½•å·²ç»å ç”¨äº†ç¼“å­˜ï¼Œå¶ç„¶çš„æµé‡ä¸å¤ªå¯èƒ½ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œè€Œä¸”è¿‡å»çš„ä¸€äº›å¤§é‡è¢«è®¿é—®çš„è®°å½•åœ¨å°†æ¥ä¹Ÿä¸ä¸€å®šä¼šä½¿ç”¨ä¸Šï¼Œè¿™æ ·å°±ä¸€ç›´æŠŠâ€œå‘â€å ç€äº†ã€‚  æ— è®º LRU è¿˜æ˜¯ LFU éƒ½æœ‰å…¶å„è‡ªçš„ç¼ºç‚¹ï¼Œä¸è¿‡ï¼Œç°åœ¨å·²ç»æœ‰å¾ˆå¤šé’ˆå¯¹å…¶ç¼ºç‚¹è€Œæ”¹è‰¯ã€ä¼˜åŒ–å‡ºæ¥çš„å˜ç§ç®—æ³•ã€‚
2. TinyLFU TinyLFU å°±æ˜¯å…¶ä¸­ä¸€ä¸ªä¼˜åŒ–ç®—æ³•ï¼Œå®ƒæ˜¯ä¸“é—¨ä¸ºäº†è§£å†³ LFU ä¸Šè¿°æåˆ°çš„ä¸¤ä¸ªé—®é¢˜è€Œè¢«è®¾è®¡å‡ºæ¥çš„ã€‚
è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯é‡‡ç”¨äº† Countâ€“Min Sketch ç®—æ³•ã€‚
è§£å†³ç¬¬äºŒä¸ªé—®é¢˜æ˜¯è®©è®°å½•å°½é‡ä¿æŒç›¸å¯¹çš„â€œæ–°é²œâ€ï¼ˆFreshness Mechanismï¼‰ï¼Œå¹¶ä¸”å½“æœ‰æ–°çš„è®°å½•æ’å…¥æ—¶ï¼Œå¯ä»¥è®©å®ƒè·Ÿè€çš„è®°å½•è¿›è¡Œâ€œPKâ€ï¼Œè¾“è€…å°±ä¼šè¢«æ·˜æ±°ï¼Œè¿™æ ·ä¸€äº›è€çš„ã€ä¸å†éœ€è¦çš„è®°å½•å°±ä¼šè¢«å‰”é™¤ã€‚
2.1 ç»Ÿè®¡é¢‘ç‡ Countâ€“Min Sketch ç®—æ³• å¦‚ä½•å¯¹ä¸€ä¸ª key è¿›è¡Œç»Ÿè®¡ï¼Œä½†åˆå¯ä»¥èŠ‚çœç©ºé—´å‘¢ï¼Ÿï¼ˆä¸æ˜¯ç®€å•çš„ä½¿ç”¨HashMapï¼Œè¿™å¤ªæ¶ˆè€—å†…å­˜äº†ï¼‰ï¼Œæ³¨æ„å“¦ï¼Œä¸éœ€è¦ç²¾ç¡®çš„ç»Ÿè®¡ï¼Œåªéœ€è¦ä¸€ä¸ªè¿‘ä¼¼å€¼å°±å¯ä»¥äº†ï¼Œæ€ä¹ˆæ ·ï¼Œè¿™æ ·åœºæ™¯æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¦‚æœä½ æ˜¯è€å¸æœºï¼Œæˆ–è®¸å·²ç»è”æƒ³åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰çš„åº”ç”¨äº†ã€‚
æ²¡é”™ï¼Œå°†è¦ä»‹ç»çš„ Countâ€“Min Sketch çš„åŸç†è·Ÿ Bloom Filter ä¸€æ ·ï¼Œåªä¸è¿‡ Bloom Filter åªæœ‰ 0 å’Œ 1 çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠ Countâ€“Min Sketch çœ‹ä½œæ˜¯â€œæ•°å€¼â€ç‰ˆçš„ Bloom Filterã€‚
å¦‚æœéœ€è¦è®°å½•ä¸€ä¸ªå€¼ï¼Œé‚£æˆ‘ä»¬éœ€è¦é€šè¿‡å¤šç§Hashç®—æ³•å¯¹å…¶è¿›è¡Œå¤„ç†hashï¼Œç„¶ååœ¨å¯¹åº”çš„hashç®—æ³•çš„è®°å½•ä¸­+1ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¤šç§hashç®—æ³•å‘¢ï¼Ÿç”±äºè¿™æ˜¯ä¸€ä¸ªå‹ç¼©ç®—æ³•å¿…å®šä¼šå‡ºç°å†²çªï¼Œæ¯”å¦‚æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªLongçš„æ•°ç»„ï¼Œé€šè¿‡è®¡ç®—å‡ºæ¯ä¸ªæ•°æ®çš„hashçš„ä½ç½®ã€‚æ¯”å¦‚å¼ ä¸‰å’Œæå››ï¼Œä»–ä»¬ä¿©æœ‰å¯èƒ½hashå€¼éƒ½æ˜¯ç›¸åŒï¼Œæ¯”å¦‚éƒ½æ˜¯1é‚£Long[1]è¿™ä¸ªä½ç½®å°±ä¼šå¢åŠ ç›¸åº”çš„é¢‘ç‡ï¼Œå¼ ä¸‰è®¿é—®1ä¸‡æ¬¡ï¼Œæå››è®¿é—®1æ¬¡é‚£Long[1]è¿™ä¸ªä½ç½®å°±æ˜¯1ä¸‡é›¶1ï¼Œå¦‚æœå–æå››çš„è®¿é—®è¯„ç‡çš„æ—¶å€™å°±ä¼šå–å‡ºæ˜¯1ä¸‡é›¶1ï¼Œä½†æ˜¯æå››å‘½ååªè®¿é—®äº†1æ¬¡å•Šï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ç”¨äº†å¤šä¸ªhashç®—æ³•å¯ä»¥ç†è§£ä¸ºlong[][]äºŒç»´æ•°ç»„çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚åœ¨ç¬¬ä¸€ä¸ªç®—æ³•å¼ ä¸‰å’Œæå››å†²çªäº†ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ªä¸­å¾ˆå¤§çš„æ¦‚ç‡ä¸å†²çªï¼Œæ¯”å¦‚ä¸€ä¸ªç®—æ³•å¤§æ¦‚æœ‰1%çš„æ¦‚ç‡å†²çªï¼Œé‚£å››ä¸ªç®—æ³•ä¸€èµ·å†²çªçš„æ¦‚ç‡æ˜¯1%çš„å››æ¬¡æ–¹ã€‚é€šè¿‡è¿™ä¸ªæ¨¡å¼æˆ‘ä»¬å–æå››çš„è®¿é—®ç‡çš„æ—¶å€™å–æ‰€æœ‰ç®—æ³•ä¸­ï¼Œæå››è®¿é—®æœ€ä½é¢‘ç‡çš„æ¬¡æ•°ã€‚æ‰€ä»¥ä»–çš„åå­—å«Count-Min Sketchã€‚</description>
    </item>
    
    <item>
      <title>Centos Linuxæ¸…ç†ç£ç›˜ç©ºé—´</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/centos-linux%E6%B8%85%E7%90%86%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/centos-linux%E6%B8%85%E7%90%86%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4/</guid>
      <description>Centos Linuxæ¸…ç†ç£ç›˜ç©ºé—´
 df -hl æŸ¥çœ‹å æ¯”  [root@VM-0-12-centos apioak-document]# df -hl Filesystem Size Used Avail Use% Mounted on devtmpfs 1.9G 0 1.9G 0% /dev tmpfs 1.9G 24K 1.9G 1% /dev/shm tmpfs 1.9G 788K 1.9G 1% /run tmpfs 1.9G 0 1.9G 0% /sys/fs/cgroup /dev/vda1 50G 48G 0 100% / tmpfs 379M 0 379M 0% /run/user/0 overlay 50G 48G 0 100% /var/lib/docker/overlay2/b3b7c9bcd6a086d488f5ca533ec7fc934f863340e4efa40513c354f3a13c6ccd/merged shm 64M 0 64M 0% /var/lib/docker/containers/76627689f39c84201d3554e95cf7a8ca53bc53f660fbf1127d86c49db2a67591/mounts/shm overlay 50G 48G 0 100% /var/lib/docker/overlay2/f3fac618fb01637e586b483c87d9075d1cb08bee9c9d1f3afffd0a012394b067/merged shm 64M 0 64M 0% /var/lib/docker/containers/36172ef8f5a337d595f41fda4a2e7864b333278a9d2102b700d7f2a6f47c52a8/mounts/shm åœ¨æ ¹ç›®å½•æ‰§è¡Œdu -sh *  [root@VM-0-12-centos /]# du -sh * 0	bin 147M	boot 987M	data 0	dev 6.</description>
    </item>
    
    <item>
      <title>char varchar textåŒºåˆ«</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/char-varchar-text%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/char-varchar-text%E5%8C%BA%E5%88%AB/</guid>
      <description>å‚è€ƒ MySQLä¹‹charã€varcharå’Œtextçš„è®¾è®¡ </description>
    </item>
    
    <item>
      <title>ClickHouseç»¼è¿°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/clickhouse/clickhouse%E7%BB%BC%E6%9C%AF/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/clickhouse/clickhouse%E7%BB%BC%E6%9C%AF/</guid>
      <description>åˆ—å¼å­˜å‚¨ä¼˜åŠ¿   å½“æŸ¥è¯¢è¯­å¥åªæ¶‰åŠéƒ¨åˆ†åˆ—æ—¶ï¼Œåªéœ€è¦æ‰«æç›¸å…³çš„åˆ—
  æ¯ä¸€åˆ—çš„æ•°æ®éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼Œå½¼æ­¤é—´ç›¸å…³æ€§æ›´å¤§ï¼Œå¯¹åˆ—æ•°æ®å‹ç¼©çš„æ•ˆç‡è¾ƒé«˜
  å‚è€ƒ â€œè¡Œå¼å­˜å‚¨â€å’Œâ€œåˆ—å¼å­˜å‚¨â€çš„åŒºåˆ« ä»€ä¹ˆæ˜¯ClickHouseï¼Ÿ </description>
    </item>
    
    <item>
      <title>CompletableFutureä½¿ç”¨è¯¦è§£</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/completablefuture%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/completablefuture%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/</guid>
      <description>1. runAsync å’Œ supplyAsyncæ–¹æ³• CompletableFuture æä¾›äº†å››ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚
public static CompletableFuture&amp;lt;Void&amp;gt; runAsync(Runnable runnable) public static CompletableFuture&amp;lt;Void&amp;gt; runAsync(Runnable runnable, Executor executor) public static &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt; supplyAsync(Supplier&amp;lt;U&amp;gt; supplier) public static &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt; supplyAsync(Supplier&amp;lt;U&amp;gt; supplier, Executor executor) æ²¡æœ‰æŒ‡å®šExecutorçš„æ–¹æ³•ä¼šä½¿ç”¨ForkJoinPool.commonPool() ä½œä¸ºå®ƒçš„çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚å¦‚æœæŒ‡å®šçº¿ç¨‹æ± ï¼Œåˆ™ä½¿ç”¨æŒ‡å®šçš„çº¿ç¨‹æ± è¿è¡Œã€‚ä»¥ä¸‹æ‰€æœ‰çš„æ–¹æ³•éƒ½ç±»åŒã€‚
 runAsyncæ–¹æ³•ä¸æ”¯æŒè¿”å›å€¼ã€‚ supplyAsyncå¯ä»¥æ”¯æŒè¿”å›å€¼ã€‚  ç¤ºä¾‹ //æ— è¿”å›å€¼ public static void runAsync() throws Exception { CompletableFuture&amp;lt;Void&amp;gt; future = CompletableFuture.runAsync(() -&amp;gt; { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { } System.out.println(&amp;#34;run end ...&amp;#34;); }); future.get(); } //æœ‰è¿”å›å€¼ public static void supplyAsync() throws Exception { CompletableFuture&amp;lt;Long&amp;gt; future = CompletableFuture.</description>
    </item>
    
    <item>
      <title>CPUç¼“å­˜è¡Œ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/cpu%E7%BC%93%E5%AD%98%E8%A1%8C/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/cpu%E7%BC%93%E5%AD%98%E8%A1%8C/</guid>
      <description>JAVA æ‹¾é— â€” CPU Cache ä¸ç¼“å­˜è¡Œ æ—¢ç„¶CPUæœ‰ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ˆMESIï¼‰ï¼Œä¸ºä»€ä¹ˆJMMè¿˜éœ€è¦volatileå…³é”®å­—ï¼Ÿ ç®€è€Œè¨€ä¹‹ï¼ŒCPUé‡Œçš„ç¼“å­˜ï¼Œbufferï¼Œqueueæœ‰å¾ˆå¤šç§ã€‚MESIåªèƒ½åœ¨ä¸€ç§æƒ…å†µä¸‹è§£å†³æ ¸å¿ƒä¸“æœ‰Cacheä¹‹é—´ä¸ä¸€è‡´çš„é—®é¢˜ã€‚
æ­¤å¤–ï¼Œå¦‚æœæœ‰äº›CPUä¸æ”¯æŒMESIåè®®ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨å…¶ä»–åŠæ³•æ¥å®ç°ç­‰ä»·çš„æ•ˆæœï¼Œæ¯”å¦‚æ€»æ˜¯ç”¨é”æ€»çº¿çš„æ–¹å¼ï¼Œæˆ–è€…æ˜ç¡®çš„fenceæŒ‡ä»¤æ¥ä¿è¯volatileæƒ³è¾¾åˆ°çš„ç›®æ ‡ã€‚
å¦‚æœCPUæ˜¯å•æ ¸å¿ƒçš„ï¼Œcacheæ˜¯ä¸“ä¾›è¿™ä¸ªæ ¸å¿ƒçš„ï¼ŒMESIç†è®ºä¸Šä¹Ÿå°±æ²¡æœ‰ç”¨äº†ã€‚ä½†æ˜¯ä¾ç„¶è¦è€ƒè™‘ä¸»å­˜å’ŒCacheè¢«å¤šä¸ªçº¿ç¨‹åˆ‡æ¢è®¿é—®æ—¶å¸¦æ¥çš„ä¸ä¸€è‡´é—®é¢˜ã€‚
æ€»ä¹‹ï¼Œvolatileæ˜¯ä¸€ä¸ªé«˜å±‚çš„è¡¨è¾¾æ„å›¾çš„â€œæŠ½è±¡â€ï¼Œè€ŒMESIæ˜¯ä¸ºäº†å®ç°è¿™ä¸ªæŠ½è±¡ï¼Œåœ¨æŸç§ç‰¹å®šæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨çš„ä¸€ä¸ªå®ç°ç»†èŠ‚ã€‚
CPUç¼“å­˜è¡Œ Javaå†…å­˜è®¿é—®é‡æ’åºçš„ç ”ç©¶ </description>
    </item>
    
    <item>
      <title>CSSä¸­å†…è”SVG</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/css%E4%B8%AD%E5%86%85%E8%81%94svg/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/css%E4%B8%AD%E5%86%85%E8%81%94svg/</guid>
      <description>CSSä¸­å†…è”SVG
å†…è”SVGæ¯”å†…è”å›¾åƒçš„base64æ•ˆæœæ›´å¥½ï¼Œå›¾ç‰‡æ›´åŠ ä¿çœŸï¼š
.icon-arrow-down { width: 20px; height: 20px; background: url(&amp;#39;data:image/svg+xml;utf8,&amp;lt;svg version=&amp;#34;1.1&amp;#34; xmlns=&amp;#34;http://www.w3.org/2000/svg&amp;#34; width=&amp;#34;200&amp;#34; height=&amp;#34;200&amp;#34; viewBox=&amp;#34;0 0 200 200&amp;#34;&amp;gt;&amp;lt;path fill=&amp;#34;#00A5E0&amp;#34; d=&amp;#34;M145.659,68.949c-5.101-5.208-13.372-5.208-18.473,0L99.479,97.233 L71.772,68.949c-5.1-5.208-13.371-5.208-18.473,0c-5.099,5.208-5.099,13.648,0,18.857l46.18,47.14l46.181-47.14 C150.759,82.598,150.759,74.157,145.659,68.949z&amp;#34;/&amp;gt;&amp;lt;/svg&amp;gt;&amp;#39;) no-repeat center; background-size: 100%; } </description>
    </item>
    
    <item>
      <title>docker-compose.ymlæ–‡ä»¶è¯¦è§£</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/docker-compose.yml%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/docker-compose.yml%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/</guid>
      <description>docker-compose.ymlæ–‡ä»¶è¯¦è§£
Composeå’ŒDockerå…¼å®¹æ€§ï¼š Compose æ–‡ä»¶æ ¼å¼æœ‰3ä¸ªç‰ˆæœ¬,åˆ†åˆ«ä¸º1, 2.x å’Œ 3.x ç›®å‰ä¸»æµçš„ä¸º 3.x å…¶æ”¯æŒ docker 1.13.0 åŠå…¶ä»¥ä¸Šçš„ç‰ˆæœ¬ å¸¸ç”¨å‚æ•°ï¼š version  # æŒ‡å®š compose æ–‡ä»¶çš„ç‰ˆæœ¬ services  # å®šä¹‰æ‰€æœ‰çš„ service ä¿¡æ¯, services ä¸‹é¢çš„ç¬¬ä¸€çº§åˆ«çš„ key æ—¢æ˜¯ä¸€ä¸ª service çš„åç§° build  # æŒ‡å®šåŒ…å«æ„å»ºä¸Šä¸‹æ–‡çš„è·¯å¾„, æˆ–ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ context å’ŒæŒ‡å®šçš„ dockerfile æ–‡ä»¶ä»¥åŠ args å‚æ•°å€¼ context # context: æŒ‡å®š Dockerfile æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ dockerfile # dockerfile: æŒ‡å®š context æŒ‡å®šçš„ç›®å½•ä¸‹é¢çš„ Dockerfile çš„åç§°(é»˜è®¤ä¸º Dockerfile) args # args: Dockerfile åœ¨ build è¿‡ç¨‹ä¸­éœ€è¦çš„å‚æ•° (ç­‰åŒäº docker container build --build-arg çš„ä½œç”¨) cache_from  # v3.</description>
    </item>
    
    <item>
      <title>docker-composeçš„æ–¹å¼éƒ¨ç½²wordpress</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/docker-compose%E7%9A%84%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2wordpress/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/docker-compose%E7%9A%84%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2wordpress/</guid>
      <description>docker-composeçš„æ–¹å¼éƒ¨ç½²wordpress
 å®‰è£…docker  sudo yum install -y yum-utils device-mapper-persistent-data lvm2 sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo sudo yum install docker-ce docker-ce-cli containerd.io  ç¼–å†™docker-compose.yml  mysql: image: mysql:5.7 environment: - MYSQL_ROOT_PASSWORD=123456 - MYSQL_DATABASE=wordpress web: image: wordpress links: - mysql environment: - WORDPRESS_DB_PASSWORD=123456 ports: - &amp;#34;0.0.0.0:8080:80&amp;#34; working_dir: /var/www/html volumes: - wordpress:/var/www/html  å¯åŠ¨docker  sudo systemctl start docker  è¿è¡Œdocker-compose  docker-compose up å‚è€ƒï¼š
What does &amp;ldquo;local address&amp;rdquo; and &amp;ldquo;foreign address&amp;rdquo; mean in the netstat command result?</description>
    </item>
    
    <item>
      <title>docker-composeç½‘ç»œè®¾ç½®</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/docker-compose%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/docker-compose%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/</guid>
      <description>åŸºæœ¬æ¦‚å¿µ é»˜è®¤æƒ…å†µä¸‹ï¼ŒCompose ä¼šä¸ºæˆ‘ä»¬çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªç½‘ç»œï¼ŒæœåŠ¡çš„æ¯ä¸ªå®¹å™¨éƒ½ä¼šåŠ å…¥è¯¥ç½‘ç»œä¸­ã€‚è¿™æ ·ï¼Œå®¹å™¨å°±å¯è¢«è¯¥ç½‘ç»œä¸­çš„å…¶ä»–å®¹å™¨è®¿é—®ï¼Œä¸ä»…å¦‚æ­¤ï¼Œè¯¥å®¹å™¨è¿˜èƒ½ä»¥æœåŠ¡åç§°ä½œä¸º hostname è¢«å…¶ä»–å®¹å™¨è®¿é—®ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºçš„ç½‘ç»œåç§°åŸºäº Compose çš„å·¥ç¨‹åç§°ï¼Œè€Œé¡¹ç›®åç§°åŸºäº docker-compose.yml æ‰€åœ¨ç›®å½•çš„åç§°ã€‚å¦‚éœ€ä¿®æ”¹å·¥ç¨‹åç§°ï¼Œå¯ä½¿ç”¨&amp;ndash;project-name æ ‡è¯†æˆ– COMPOSE_PORJECT_NAME ç¯å¢ƒå˜é‡ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨åä¸º myapp çš„ç›®å½•ä¸­ï¼Œå¹¶ä¸” docker-compose.yml å¦‚ä¸‹æ‰€ç¤ºï¼š
version: &amp;#39;2&amp;#39; services: web: build: . ports: - &amp;#34;8000:8000&amp;#34; db: image: postgres å½“æˆ‘ä»¬è¿è¡Œ docker-compose up æ—¶ï¼Œå°†ä¼šæ‰§è¡Œä»¥ä¸‹å‡ æ­¥ï¼š
 åˆ›å»ºä¸€ä¸ªåä¸º myapp_default çš„ç½‘ç»œï¼› ä½¿ç”¨ web æœåŠ¡çš„é…ç½®åˆ›å»ºå®¹å™¨ï¼Œå®ƒä»¥â€œwebâ€è¿™ä¸ªåç§°åŠ å…¥ç½‘ç»œ myapp_defaultï¼› ä½¿ç”¨ db æœåŠ¡çš„é…ç½®åˆ›å»ºå®¹å™¨ï¼Œå®ƒä»¥â€œdbâ€è¿™ä¸ªåç§°åŠ å…¥ç½‘ç»œ myapp_defaultã€‚  å®¹å™¨é—´å¯ä½¿ç”¨æœåŠ¡åç§°ï¼ˆweb æˆ– dbï¼‰ä½œä¸º hostname ç›¸äº’è®¿é—®ã€‚ä¾‹å¦‚ï¼Œweb è¿™ä¸ªæœåŠ¡å¯ä½¿ç”¨postgres://db:5432 è®¿é—® db å®¹å™¨ã€‚
æ›´æ–°å®¹å™¨ å½“æœåŠ¡çš„é…ç½®å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå¯ä½¿ç”¨ docker-compose up å‘½ä»¤æ›´æ–°é…ç½®ã€‚
æ­¤æ—¶ï¼ŒCompose ä¼šåˆ é™¤æ—§å®¹å™¨å¹¶åˆ›å»ºæ–°å®¹å™¨ã€‚æ–°å®¹å™¨ä¼šä»¥ä¸åŒçš„ IP åœ°å€åŠ å…¥ç½‘ç»œï¼Œåç§°ä¿æŒä¸å˜ã€‚ä»»ä½•æŒ‡å‘æ—§å®¹å™¨çš„è¿æ¥éƒ½ä¼šè¢«å…³é—­ï¼Œå®¹å™¨ä¼šé‡æ–°æ‰¾åˆ°æ–°å®¹å™¨å¹¶è¿æ¥ä¸Šå»ã€‚
links å‰æ–‡è®²è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡ä¹‹é—´å¯ä½¿ç”¨æœåŠ¡åç§°ç›¸äº’è®¿é—®ã€‚links å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåˆ«åï¼Œä»è€Œä½¿ç”¨è¯¥åˆ«åè®¿é—®å…¶ä»–æœåŠ¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š
version: &amp;#39;2&amp;#39; services: web: build: .</description>
    </item>
    
    <item>
      <title>dockerfile-maven-pluginä½¿ç”¨</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/maven/dockerfile-maven-plugin%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/maven/dockerfile-maven-plugin%E4%BD%BF%E7%94%A8/</guid>
      <description>&amp;lt;properties&amp;gt; &amp;lt;docker.image.prefix&amp;gt;anaham-docker.pkg.coding.net/cereshop/ceres&amp;lt;/docker.image.prefix&amp;gt; &amp;lt;anaham-docker.username&amp;gt;ç”¨æˆ·å&amp;lt;/anaham-docker.username&amp;gt; &amp;lt;anaham-docker.password&amp;gt;å¯†ç &amp;lt;/anaham-docker.password&amp;gt; &amp;lt;/properties&amp;gt; &amp;lt;build&amp;gt; &amp;lt;plugins&amp;gt; &amp;lt;plugin&amp;gt; &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;spring-boot-maven-plugin&amp;lt;/artifactId&amp;gt; &amp;lt;executions&amp;gt; &amp;lt;execution&amp;gt; &amp;lt;goals&amp;gt; &amp;lt;goal&amp;gt;repackage&amp;lt;/goal&amp;gt; &amp;lt;/goals&amp;gt; &amp;lt;/execution&amp;gt; &amp;lt;/executions&amp;gt; &amp;lt;/plugin&amp;gt; &amp;lt;!-- dockeræ‰“åŒ…æ’ä»¶ --&amp;gt; &amp;lt;plugin&amp;gt; &amp;lt;groupId&amp;gt;com.spotify&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;dockerfile-maven-plugin&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;${dockerfile-maven-plugin.version}&amp;lt;/version&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;username&amp;gt;${anaham-docker.username}&amp;lt;/username&amp;gt; &amp;lt;password&amp;gt;${anaham-docker.password}&amp;lt;/password&amp;gt; &amp;lt;repository&amp;gt;${docker.image.prefix}/${project.artifactId}&amp;lt;/repository&amp;gt; &amp;lt;tag&amp;gt;${ceres.version}&amp;lt;/tag&amp;gt; &amp;lt;!-- ä¸æŒ‡å®štagé»˜è®¤ä¸ºlatest --&amp;gt; &amp;lt;buildArgs&amp;gt; &amp;lt;JAR_FILE&amp;gt;target/${project.build.finalName}.jar&amp;lt;/JAR_FILE&amp;gt; &amp;lt;/buildArgs&amp;gt; &amp;lt;/configuration&amp;gt; &amp;lt;/plugin&amp;gt; &amp;lt;/plugins&amp;gt; &amp;lt;/build&amp;gt;  æ„å»ºé•œåƒ  mvn clean package -Dmaven.è®¡ç®—æœºç§‘å­¦.skip=true dockerfile:build -Ddockerfile.tag=latest å› ä¸ºä¸Šé¢pom.xmlå·²ç»æŒ‡å®šäº†tagï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼šmvn dockerfile:build ä¼šä¼˜å…ˆé€‰æ‹©pom.xmlé…ç½®çš„tag
ä¸Šä¼ é•œåƒ  mvn dockerfile:push -Ddockerfile.username=[é•œåƒä»“åº“è´¦å·] -Ddockerfile.password=[é•œåƒä»“åº“å¯†ç ] å› ä¸ºä¸Šé¢pom.xmlå·²ç»æŒ‡å®šäº†usernameå’Œpasswordï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼šmvn dockerfile:push</description>
    </item>
    
    <item>
      <title>ESç»¼è¿°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/es/es%E7%BB%BC%E8%BF%B0/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/es/es%E7%BB%BC%E8%BF%B0/</guid>
      <description>1. ES çš„åˆ†å¸ƒå¼æ¶æ„åŸç† ElasticSearch è®¾è®¡çš„ç†å¿µå°±æ˜¯åˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼Œåº•å±‚å…¶å®è¿˜æ˜¯åŸºäº lucene çš„ã€‚æ ¸å¿ƒæ€æƒ³å°±æ˜¯åœ¨å¤šå°æœºå™¨ä¸Šå¯åŠ¨å¤šä¸ª ES è¿›ç¨‹å®ä¾‹ï¼Œç»„æˆäº†ä¸€ä¸ª ES é›†ç¾¤ã€‚
é»˜è®¤èŠ‚ç‚¹ä¼šå»åŠ å…¥ä¸€ä¸ªåç§°ä¸º elasticsearch çš„é›†ç¾¤ã€‚å¦‚æœç›´æ¥å¯åŠ¨ä¸€å †èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè‡ªåŠ¨ç»„æˆä¸€ä¸ª elasticsearch é›†ç¾¤ï¼Œå½“ç„¶ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥ç»„æˆ elasticsearch é›†ç¾¤ã€‚
1.1 ESæ•°æ®ç»“æ„ ES ä¸­å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯ç´¢å¼•ï¼Œæ¯”å¦‚è¯´ä½ ç°åœ¨è¦åœ¨ ES ä¸­å­˜å‚¨ä¸€äº›è®¢å•æ•°æ®ï¼Œä½ å°±åº”è¯¥åœ¨ ES ä¸­åˆ›å»ºä¸€ä¸ªç´¢å¼• order_idx ï¼Œæ‰€æœ‰çš„è®¢å•æ•°æ®å°±éƒ½å†™åˆ°è¿™ä¸ªç´¢å¼•é‡Œé¢å»ï¼Œä¸€ä¸ªç´¢å¼•å·®ä¸å¤šå°±æ˜¯ç›¸å½“äºæ˜¯ mysql é‡Œçš„ä¸€å¼ è¡¨ã€‚
index -&amp;gt; type -&amp;gt; mapping -&amp;gt; document -&amp;gt; fieldã€‚ 1.2 ESé«˜å¯ç”¨ ç±»ä¼¼kafkaå°†ä¸€ä¸ªtopicåˆ†æˆå¤šä¸ªpartitionï¼Œeså°†ä¸€ä¸ªindexåˆ†æˆå¤šä¸ªshardã€‚
 æ¯ä¸ª shard å­˜å‚¨éƒ¨åˆ†æ•°æ®ã€‚æ‹†åˆ†å¤šä¸ª shard æ˜¯æœ‰å¥½å¤„çš„ï¼Œä¸€æ˜¯æ”¯æŒæ¨ªå‘æ‰©å±•ï¼Œæ¯”å¦‚ä½ æ•°æ®é‡æ˜¯ 3Tï¼Œ3 ä¸ª shardï¼Œæ¯ä¸ª shard å°± 1T çš„æ•°æ®ï¼Œè‹¥ç°åœ¨æ•°æ®é‡å¢åŠ åˆ° 4Tï¼Œæ€ä¹ˆæ‰©å±•ï¼Œå¾ˆç®€å•ï¼Œé‡æ–°å»ºä¸€ä¸ªæœ‰ 4 ä¸ª shard çš„ç´¢å¼•ï¼Œå°†æ•°æ®å¯¼è¿›å»ï¼›äºŒæ˜¯æé«˜æ€§èƒ½ï¼Œæ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ª shardï¼Œå³å¤šå°æœåŠ¡å™¨ä¸Šï¼Œæ‰€æœ‰çš„æ“ä½œï¼Œéƒ½ä¼šåœ¨å¤šå°æœºå™¨ä¸Šå¹¶è¡Œåˆ†å¸ƒå¼æ‰§è¡Œï¼Œæé«˜äº†ååé‡å’Œæ€§èƒ½ã€‚
 kafkaçš„æ¯ä¸ªpartitionæœ‰å¤šä¸ªreplicaå‰¯æœ¬ï¼Œæ‰€æœ‰å‰¯æœ¬é€‰å‡ºä¸€ä¸ªleaderï¼ˆä¾èµ–zookeeperå®Œæˆé€‰ä¸¾ï¼‰è´Ÿè´£æ‰€æœ‰çš„è¯»å†™è¯·æ±‚ã€‚
ES çš„æ¯ä¸ªshardä¹Ÿå¯ä»¥é…ç½®å¤šä¸ªreplicaå‰¯æœ¬ï¼Œæ¯ä¸ª shard éƒ½æœ‰ä¸€ä¸ª primary shard ï¼Œè´Ÿè´£å†™å…¥æ•°æ®ï¼Œä½†æ˜¯è¿˜æœ‰å‡ ä¸ª replica shard ã€‚ primary shard å†™å…¥æ•°æ®ä¹‹åï¼Œä¼šå°†æ•°æ®åŒæ­¥åˆ°å…¶ä»–å‡ ä¸ª replica shard ä¸Šå»ã€‚</description>
    </item>
    
    <item>
      <title>gitbookå®‰è£…</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/gitbook%E5%AE%89%E8%A3%85/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/gitbook%E5%AE%89%E8%A3%85/</guid>
      <description>gitbookå®‰è£…
 å®‰è£…  sudo npm install gitbook -g sudo npm install -g gitbook-cli éªŒè¯  gitbook -V åˆå§‹åŒ–é¡¹ç›®  mkdir direName //åˆ›å»ºè‡ªå·±çš„æ–‡ä»¶å¤¹ç›®å½• cd direName //è¿›å…¥åˆ°è‡ªå·±çš„gitbookæ–‡ä»¶å¤¹ç›®å½• gitbook init //åˆå§‹åŒ–gitbooké¡¹ç›® å¯åŠ¨  gitbook serve æˆ–è€…gitbook serve &amp;amp;åå°è¿è¡Œï¼Œé»˜è®¤åœ¨4000ç«¯å£å¯åŠ¨ã€‚</description>
    </item>
    
    <item>
      <title>GitHub 443</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/git/github-443/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/git/github-443/</guid>
      <description>æˆ‘ä»¬çœŸæ˜¯ä¸€ä¸ªç¥å¥‡çš„å›½åº¦ï¼Œè¿githubéƒ½è¦å°ç¦ã€‚
æœ€è¿‘github httpsæ— æ³•æ¥å…¥ï¼š
fatal: unable to access &amp;#39;https://github.com/xuzhijvn/tony-demo.git/&amp;#39;: LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443 è¯•äº†nç§æ–¹å¼éƒ½ä¸è¡Œï¼š
  åˆ‡æ¢SSRä»£ç†èŠ‚ç‚¹
  åˆ‡æ¢SSRä»£ç†æ¨¡å¼åˆ°å…¨å±€
  é€€å‡ºSSR
  ä½¿ç”¨è“ç¯ä»£ç†
  è®¾ç½®gitä»£ç†ï¼ˆ61885æ˜¯æˆ‘è“ç¯ä»£ç†çš„ç«¯å£ï¼‰
  git config --global --list git config --global https.proxy &amp;#39;127.0.0.1:61885&amp;#39; git config --global http.proxy &amp;#39;127.0.0.1:61885&amp;#39; git config --global --list ç¦ç”¨gitä»£ç†  git config --global --list git config --global --unset http.proxy git config --global --list networksetup -setv6off Wi-Fi  ä»¥ä¸Šæ–¹æ³•å…¨éƒ¨ä¸å¥½ä½¿ï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹åˆå¿ƒæ€å´©äº†ğŸ’”ğŸ’”</description>
    </item>
    
    <item>
      <title>Golangçš„åç¨‹è°ƒåº¦å™¨åŸç†åŠGMPè®¾è®¡æ€æƒ³</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/go/golang%E7%9A%84%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E5%99%A8%E5%8E%9F%E7%90%86%E5%8F%8Agmp%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/go/golang%E7%9A%84%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E5%99%A8%E5%8E%9F%E7%90%86%E5%8F%8Agmp%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/</guid>
      <description>å¤šçº¿ç¨‹ä¸ºæˆ‘ä»¬çš„ç¨‹åºæä¾›äº†å¼ºå¤§çš„å¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯éšç€ç°ä»£åº”ç”¨å¯¹å¹¶å‘èƒ½åŠ›è¶Šæ¥è¶Šé«˜çš„è¦æ±‚ï¼Œä»ç„¶é€šè¿‡å¢åŠ çº¿ç¨‹æ•°é‡æå‡å¹¶å‘èƒ½åŠ›çš„åšæ³•æ˜¾ç„¶æ— æ³•ç»´ç³»ï¼Œå› ä¸ºåˆ›å»ºçº¿ç¨‹è¦æ¶ˆè€—å†…å­˜ï¼Œæ›´è‡´å‘½çš„æ˜¯ä¼—å¤šçš„çº¿ç¨‹åˆ›å»ºã€é”€æ¯ã€åˆ‡æ¢å°†å¤§å¤§é™ä½CPUçš„æ‰§è¡Œæ•ˆç‡ã€‚
å¦‚ä½•é€šè¿‡æœ‰é™çš„çº¿ç¨‹æ•°é‡è¿›ä¸€æ­¥æå‡åº”ç”¨çš„å¹¶å‘èƒ½åŠ›å‘¢ï¼Ÿåç¨‹ã€çº¿ç¨‹æ± éƒ½æ˜¯è§£å†³ä¹‹é“ã€‚
åç¨‹å¯ä»¥çœ‹ä½œæ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œå› æ­¤åç¨‹é—´çš„åˆ‡æ¢å¹¶ä¸ä¼šæœ‰CPUçš„æŸè€—ï¼Œå¹¶ä¸”å¯ä»¥å°†æ¯ä¸ªåç¨‹è®¾è®¡æˆå‡ kbå¤§å°ï¼Œä»¥è‡³äºå¯ä»¥åˆ›å»ºå¤§é‡çš„åç¨‹ã€‚CPUæœ€ç»ˆè°ƒåº¦è¿è¡Œä»ç„¶æ˜¯çº¿ç¨‹ï¼Œå› æ­¤åç¨‹ä¸çº¿ç¨‹ä¹‹é—´éœ€è¦ä¸€ä¸ª è°ƒåº¦å™¨ï¼ŒGolangä¸­æœ‰GMPè°ƒåº¦å™¨ï¼Œç”¨äºæŠŠå¤§é‡çš„åç¨‹åˆ†é…åˆ°å°‘é‡çº¿ç¨‹ä¸Šå»æ‰§è¡Œã€‚
 æœ¬èŠ‚ä¸ºé‡ç‚¹ç« èŠ‚ æœ¬ç« èŠ‚å«è§†é¢‘ç‰ˆ:
   ä¸€ã€Golangâ€œè°ƒåº¦å™¨â€çš„ç”±æ¥ï¼Ÿ (1) å•è¿›ç¨‹æ—¶ä»£ä¸éœ€è¦è°ƒåº¦å™¨ æˆ‘ä»¬çŸ¥é“ï¼Œä¸€åˆ‡çš„è½¯ä»¶éƒ½æ˜¯è·‘åœ¨æ“ä½œç³»ç»Ÿä¸Šï¼ŒçœŸæ­£ç”¨æ¥å¹²æ´»(è®¡ç®—)çš„æ˜¯CPUã€‚æ—©æœŸçš„æ“ä½œç³»ç»Ÿæ¯ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œç›´åˆ°ä¸€ä¸ªç¨‹åºè¿è¡Œå®Œï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼Œå°±æ˜¯â€œå•è¿›ç¨‹æ—¶ä»£â€
ä¸€åˆ‡çš„ç¨‹åºåªèƒ½ä¸²è¡Œå‘ç”Ÿã€‚
æ—©æœŸçš„å•è¿›ç¨‹æ“ä½œç³»ç»Ÿï¼Œé¢ä¸´2ä¸ªé—®é¢˜ï¼š
1.å•ä¸€çš„æ‰§è¡Œæµç¨‹ï¼Œè®¡ç®—æœºåªèƒ½ä¸€ä¸ªä»»åŠ¡ä¸€ä¸ªä»»åŠ¡å¤„ç†ã€‚
2.è¿›ç¨‹é˜»å¡æ‰€å¸¦æ¥çš„CPUæ—¶é—´æµªè´¹ã€‚
é‚£ä¹ˆèƒ½ä¸èƒ½æœ‰å¤šä¸ªè¿›ç¨‹æ¥å®è§‚ä¸€èµ·æ¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡å‘¢ï¼Ÿ
åæ¥æ“ä½œç³»ç»Ÿå°±å…·æœ‰äº†æœ€æ—©çš„å¹¶å‘èƒ½åŠ›ï¼šå¤šè¿›ç¨‹å¹¶å‘ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹é˜»å¡çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦å¤–ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹ï¼Œè¿™æ ·å°±èƒ½å°½é‡æŠŠCPUåˆ©ç”¨èµ·æ¥ï¼ŒCPUå°±ä¸æµªè´¹äº†ã€‚
(2)å¤šè¿›ç¨‹/çº¿ç¨‹æ—¶ä»£æœ‰äº†è°ƒåº¦å™¨éœ€æ±‚ åœ¨å¤šè¿›ç¨‹/å¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå°±è§£å†³äº†é˜»å¡çš„é—®é¢˜ï¼Œå› ä¸ºä¸€ä¸ªè¿›ç¨‹é˜»å¡cpuå¯ä»¥ç«‹åˆ»åˆ‡æ¢åˆ°å…¶ä»–è¿›ç¨‹ä¸­å»æ‰§è¡Œï¼Œè€Œä¸”è°ƒåº¦cpuçš„ç®—æ³•å¯ä»¥ä¿è¯åœ¨è¿è¡Œçš„è¿›ç¨‹éƒ½å¯ä»¥è¢«åˆ†é…åˆ°cpuçš„è¿è¡Œæ—¶é—´ç‰‡ã€‚è¿™æ ·ä»å®è§‚æ¥çœ‹ï¼Œä¼¼ä¹å¤šä¸ªè¿›ç¨‹æ˜¯åœ¨åŒæ—¶è¢«è¿è¡Œã€‚
ä½†æ–°çš„é—®é¢˜å°±åˆå‡ºç°äº†ï¼Œè¿›ç¨‹æ‹¥æœ‰å¤ªå¤šçš„èµ„æºï¼Œè¿›ç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€é”€æ¯ï¼Œéƒ½ä¼šå ç”¨å¾ˆé•¿çš„æ—¶é—´ï¼ŒCPUè™½ç„¶åˆ©ç”¨èµ·æ¥äº†ï¼Œä½†å¦‚æœè¿›ç¨‹è¿‡å¤šï¼ŒCPUæœ‰å¾ˆå¤§çš„ä¸€éƒ¨åˆ†éƒ½è¢«ç”¨æ¥è¿›è¡Œè¿›ç¨‹è°ƒåº¦äº†ã€‚
æ€ä¹ˆæ‰èƒ½æé«˜CPUçš„åˆ©ç”¨ç‡å‘¢ï¼Ÿ
ä½†æ˜¯å¯¹äºLinuxæ“ä½œç³»ç»Ÿæ¥è®²ï¼Œcpuå¯¹è¿›ç¨‹çš„æ€åº¦å’Œçº¿ç¨‹çš„æ€åº¦æ˜¯ä¸€æ ·çš„ã€‚
å¾ˆæ˜æ˜¾ï¼ŒCPUè°ƒåº¦åˆ‡æ¢çš„æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹ã€‚å°½ç®¡çº¿ç¨‹çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†å®é™…ä¸Šå¤šçº¿ç¨‹å¼€å‘è®¾è®¡ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œè¦è€ƒè™‘å¾ˆå¤šåŒæ­¥ç«äº‰ç­‰é—®é¢˜ï¼Œå¦‚é”ã€ç«äº‰å†²çªç­‰ã€‚
(3)åç¨‹æ¥æé«˜CPUåˆ©ç”¨ç‡ å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹å·²ç»æé«˜äº†ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯åœ¨å½“ä»Šäº’è”ç½‘é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜(è¿›ç¨‹è™šæ‹Ÿå†…å­˜ä¼šå ç”¨4GB[32ä½æ“ä½œç³»ç»Ÿ], è€Œçº¿ç¨‹ä¹Ÿè¦å¤§çº¦4MB)ã€‚
å¤§é‡çš„è¿›ç¨‹/çº¿ç¨‹å‡ºç°äº†æ–°çš„é—®é¢˜
 é«˜å†…å­˜å ç”¨ è°ƒåº¦çš„é«˜æ¶ˆè€—CPU  å¥½äº†ï¼Œç„¶åå·¥ç¨‹å¸ˆä»¬å°±å‘ç°ï¼Œå…¶å®ä¸€ä¸ªçº¿ç¨‹åˆ†ä¸ºâ€œå†…æ ¸æ€â€œçº¿ç¨‹å’Œâ€ç”¨æˆ·æ€â€œçº¿ç¨‹ã€‚
ä¸€ä¸ªâ€œç”¨æˆ·æ€çº¿ç¨‹â€å¿…é¡»è¦ç»‘å®šä¸€ä¸ªâ€œå†…æ ¸æ€çº¿ç¨‹â€ï¼Œä½†æ˜¯CPUå¹¶ä¸çŸ¥é“æœ‰â€œç”¨æˆ·æ€çº¿ç¨‹â€çš„å­˜åœ¨ï¼Œå®ƒåªçŸ¥é“å®ƒè¿è¡Œçš„æ˜¯ä¸€ä¸ªâ€œå†…æ ¸æ€çº¿ç¨‹â€(Linuxçš„PCBè¿›ç¨‹æ§åˆ¶å—)ã€‚
è¿™æ ·ï¼Œæˆ‘ä»¬å†å»ç»†åŒ–å»åˆ†ç±»ä¸€ä¸‹ï¼Œå†…æ ¸çº¿ç¨‹ä¾ç„¶å«â€œçº¿ç¨‹(thread)â€ï¼Œç”¨æˆ·çº¿ç¨‹å«â€œåç¨‹(co-routine)&amp;quot;.
çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±è¦å¼€è„‘æ´äº†ï¼Œæ—¢ç„¶ä¸€ä¸ªåç¨‹(co-routine)å¯ä»¥ç»‘å®šä¸€ä¸ªçº¿ç¨‹(thread)ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½å¤šä¸ªåç¨‹(co-routine)ç»‘å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹(thread)ä¸Šå‘¢ã€‚
ä¹‹åï¼Œæˆ‘ä»¬å°±çœ‹åˆ°äº†æœ‰3ä¸­åç¨‹å’Œçº¿ç¨‹çš„æ˜ å°„å…³ç³»ï¼š
 N:1å…³ç³»  Nä¸ªåç¨‹ç»‘å®š1ä¸ªçº¿ç¨‹ï¼Œä¼˜ç‚¹å°±æ˜¯åç¨‹åœ¨ç”¨æˆ·æ€çº¿ç¨‹å³å®Œæˆåˆ‡æ¢ï¼Œä¸ä¼šé™·å…¥åˆ°å†…æ ¸æ€ï¼Œè¿™ç§åˆ‡æ¢éå¸¸çš„è½»é‡å¿«é€Ÿã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œ1ä¸ªè¿›ç¨‹çš„æ‰€æœ‰åç¨‹éƒ½ç»‘å®šåœ¨1ä¸ªçº¿ç¨‹ä¸Š
ç¼ºç‚¹ï¼š
 æŸä¸ªç¨‹åºç”¨ä¸äº†ç¡¬ä»¶çš„å¤šæ ¸åŠ é€Ÿèƒ½åŠ› ä¸€æ—¦æŸåç¨‹é˜»å¡ï¼Œé€ æˆçº¿ç¨‹é˜»å¡ï¼Œæœ¬è¿›ç¨‹çš„å…¶ä»–åç¨‹éƒ½æ— æ³•æ‰§è¡Œäº†ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¹¶å‘çš„èƒ½åŠ›äº†ã€‚   1:1 å…³ç³»  1ä¸ªåç¨‹ç»‘å®š1ä¸ªçº¿ç¨‹ï¼Œè¿™ç§æœ€å®¹æ˜“å®ç°ã€‚åç¨‹çš„è°ƒåº¦éƒ½ç”±CPUå®Œæˆäº†ï¼Œä¸å­˜åœ¨N:1ç¼ºç‚¹ï¼Œ
ç¼ºç‚¹ï¼š
 åç¨‹çš„åˆ›å»ºã€åˆ é™¤å’Œåˆ‡æ¢çš„ä»£ä»·éƒ½ç”±CPUå®Œæˆï¼Œæœ‰ç‚¹ç•¥æ˜¾æ˜‚è´µäº†ã€‚   M:Nå…³ç³»  Mä¸ªåç¨‹ç»‘å®š1ä¸ªçº¿ç¨‹ï¼Œæ˜¯N:1å’Œ1:1ç±»å‹çš„ç»“åˆï¼Œå…‹æœäº†ä»¥ä¸Š2ç§æ¨¡å‹çš„ç¼ºç‚¹ï¼Œä½†å®ç°èµ·æ¥æœ€ä¸ºå¤æ‚ã€‚
åç¨‹è·Ÿçº¿ç¨‹æ˜¯æœ‰åŒºåˆ«çš„ï¼Œçº¿ç¨‹ç”±CPUè°ƒåº¦æ˜¯æŠ¢å å¼çš„ï¼Œåç¨‹ç”±ç”¨æˆ·æ€è°ƒåº¦æ˜¯åä½œå¼çš„ï¼Œä¸€ä¸ªåç¨‹è®©å‡ºCPUåï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ã€‚
(4)Goè¯­è¨€çš„åç¨‹goroutine Goä¸ºäº†æä¾›æ›´å®¹æ˜“ä½¿ç”¨çš„å¹¶å‘æ–¹æ³•ï¼Œä½¿ç”¨äº†goroutineå’Œchannelã€‚goroutineæ¥è‡ªåç¨‹çš„æ¦‚å¿µï¼Œè®©ä¸€ç»„å¯å¤ç”¨çš„å‡½æ•°è¿è¡Œåœ¨ä¸€ç»„çº¿ç¨‹ä¹‹ä¸Šï¼Œå³ä½¿æœ‰åç¨‹é˜»å¡ï¼Œè¯¥çº¿ç¨‹çš„å…¶ä»–åç¨‹ä¹Ÿå¯ä»¥è¢«runtimeè°ƒåº¦ï¼Œè½¬ç§»åˆ°å…¶ä»–å¯è¿è¡Œçš„çº¿ç¨‹ä¸Šã€‚æœ€å…³é”®çš„æ˜¯ï¼Œç¨‹åºå‘˜çœ‹ä¸åˆ°è¿™äº›åº•å±‚çš„ç»†èŠ‚ï¼Œè¿™å°±é™ä½äº†ç¼–ç¨‹çš„éš¾åº¦ï¼Œæä¾›äº†æ›´å®¹æ˜“çš„å¹¶å‘ã€‚
Goä¸­ï¼Œåç¨‹è¢«ç§°ä¸ºgoroutineï¼Œå®ƒéå¸¸è½»é‡ï¼Œä¸€ä¸ªgoroutineåªå å‡ KBï¼Œå¹¶ä¸”è¿™å‡ KBå°±è¶³å¤Ÿgoroutineè¿è¡Œå®Œï¼Œè¿™å°±èƒ½åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´å†…æ”¯æŒå¤§é‡goroutineï¼Œæ”¯æŒäº†æ›´å¤šçš„å¹¶å‘ã€‚è™½ç„¶ä¸€ä¸ªgoroutineçš„æ ˆåªå å‡ KBï¼Œä½†å®é™…æ˜¯å¯ä¼¸ç¼©çš„ï¼Œå¦‚æœéœ€è¦æ›´å¤šå†…å®¹ï¼Œruntimeä¼šè‡ªåŠ¨ä¸ºgoroutineåˆ†é…ã€‚
Goroutineç‰¹ç‚¹ï¼š
 å ç”¨å†…å­˜æ›´å°ï¼ˆå‡ kbï¼‰ è°ƒåº¦æ›´çµæ´»(runtimeè°ƒåº¦)  (5)è¢«åºŸå¼ƒçš„goroutineè°ƒåº¦å™¨ å¥½äº†ï¼Œæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†åç¨‹å’Œçº¿ç¨‹çš„å…³ç³»ï¼Œé‚£ä¹ˆæœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯è°ƒåº¦åç¨‹çš„è°ƒåº¦å™¨çš„å®ç°äº†ã€‚</description>
    </item>
    
    <item>
      <title>goå¤šç‰ˆæœ¬åˆ‡æ¢</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/go/go%E5%A4%9A%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/go/go%E5%A4%9A%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2/</guid>
      <description>æ–¹æ³•ä¸€ï¼šè°ƒæ•´PATH export PATH=/usr/local/go/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin æ–¹æ³•äºŒï¼šè°ƒæ•´è½¯é“¾æ¥(æœªéªŒè¯) //æŸ¥çœ‹å½“å‰è½¯é“¾æ¥æŒ‡å‘ cd /usr/local/bin ls -trl | grep go //è°ƒæ•´è½¯é“¾æ¥ ln -snf /usr/local/Cellar/go/1.16.3/bin go </description>
    </item>
    
    <item>
      <title>HashMapå’ŒHashTableåŒºåˆ«</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/hashmap%E5%92%8Chashtable%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/hashmap%E5%92%8Chashtable%E5%8C%BA%E5%88%AB/</guid>
      <description> HashMapæ˜¯HashTableçš„è½»é‡çº§ç‰ˆæœ¬ï¼Œ HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶æ–¹æ³•éƒ½è¢«synchronizedå…³é”®åŒæ­¥ HashMap æŠŠ Hashtable çš„ contains æ–¹æ³•å»æ‰äº†ï¼Œæ”¹æˆ containsValue å’Œ containsKeyã€‚å› ä¸º contains æ–¹æ³•å®¹æ˜“è®©äººå¼•èµ·è¯¯è§£ã€‚ HashMapå…è®¸å°† null ä½œä¸ºä¸€ä¸ª entry çš„ key æˆ–è€… valueï¼Œè€Œ Hashtable ä¸å…è®¸ã€‚ HashTable ç»§æ‰¿è‡ª Dictionary ç±»ï¼Œè€Œ HashMap æ˜¯ Java1.2 å¼•è¿›çš„ Map interface çš„ä¸€ä¸ªå®ç°ã€‚ Hashtable å’Œ HashMap é‡‡ç”¨çš„ hash/rehash ç®—æ³•éƒ½å¤§æ¦‚ä¸€æ ·ï¼Œæ‰€ä»¥æ€§èƒ½ä¸ä¼šæœ‰å¾ˆå¤§çš„å·®å¼‚ã€‚  </description>
    </item>
    
    <item>
      <title>http2</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/http/http2/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/http/http2/</guid>
      <description>http/2åœ¨http/1ç³»åˆ—çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†é€šä¿¡æ•ˆç‡ï¼Œä¸»è¦å¾—ç›Šäºå¦‚ä¸‹å‡ ç‚¹æ”¹è¿›ï¼š
1. å¤šè·¯å¤ç”¨çš„å•ä¸€é•¿è¿æ¥ 1.1 å•ä¸€é•¿è¿æ¥ åœ¨HTTP/2ä¸­ï¼Œå®¢æˆ·ç«¯å‘æŸä¸ªåŸŸåçš„æœåŠ¡å™¨è¯·æ±‚é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œåªä¼šåˆ›å»ºä¸€æ¡TCPè¿æ¥ï¼Œå³ä½¿è¿™é¡µé¢å¯èƒ½åŒ…å«ä¸Šç™¾ä¸ªèµ„æºã€‚ å•ä¸€çš„è¿æ¥åº”è¯¥æ˜¯HTTP2çš„ä¸»è¦ä¼˜åŠ¿ï¼Œå•ä¸€çš„è¿æ¥èƒ½å‡å°‘TCPæ¡æ‰‹ï¼ˆè¿˜æœ‰sslæ¡æ‰‹çš„å¼€é”€ï¼‰å¸¦æ¥çš„æ—¶å»¶ ã€‚HTTP2ä¸­ç”¨ä¸€æ¡å•ä¸€çš„é•¿è¿æ¥ï¼Œé¿å…äº†åˆ›å»ºå¤šä¸ªTCPè¿æ¥å¸¦æ¥çš„ç½‘ç»œå¼€é”€ï¼Œæé«˜äº†ååé‡ã€‚
1.2 å¤šè·¯å¤ç”¨ HTTP2è™½ç„¶åªæœ‰ä¸€æ¡TCPè¿æ¥ï¼Œä½†æ˜¯åœ¨é€»è¾‘ä¸Šåˆ†æˆäº†å¾ˆå¤šstreamã€‚HTTP2æŠŠè¦ä¼ è¾“çš„ä¿¡æ¯åˆ†å‰²æˆä¸€ä¸ªä¸ªäºŒè¿›åˆ¶å¸§ï¼Œé¦–éƒ¨ä¿¡æ¯ä¼šè¢«å°è£…åˆ°HEADER Frameï¼Œç›¸åº”çš„request bodyå°±æ”¾åˆ°DATA Frame,ä¸€ä¸ªå¸§ä½ å¯ä»¥çœ‹æˆè·¯ä¸Šçš„ä¸€è¾†è½¦,åªè¦ç»™è¿™äº›è½¦ç¼–å·ï¼Œè®©1å·è½¦éƒ½èµ°1å·é—¨å‡ºï¼Œ2å·è½¦éƒ½èµ°2å·é—¨å‡ºï¼Œå°±æŠŠä¸åŒçš„httpè¯·æ±‚æˆ–è€…å“åº”åŒºåˆ†å¼€æ¥äº†ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ±‚åŒä¸€ä¸ªè¯·æ±‚æˆ–è€…å“åº”çš„å¸§å¿…é¡»æ˜¯æœ‰æœ‰åºçš„ï¼Œè¦ä¿è¯FIFOçš„ï¼Œä½†æ˜¯ä¸åŒçš„è¯·æ±‚æˆ–è€…å“åº”å¸§å¯ä»¥äº’ç›¸ç©¿æ’ã€‚è¿™å°±æ˜¯HTTP2çš„å¤šè·¯å¤ç”¨ï¼Œæ˜¯ä¸æ˜¯å……åˆ†åˆ©ç”¨äº†ç½‘ç»œå¸¦å®½ï¼Œæ˜¯ä¸æ˜¯æé«˜äº†å¹¶å‘åº¦ï¼Ÿ
2. å¤´éƒ¨å‹ç¼©å’ŒäºŒè¿›åˆ¶æ ¼å¼ http1.xä¸€ç›´éƒ½æ˜¯plain textï¼Œå¯¹æ­¤æˆ‘åªèƒ½æƒ³åˆ°ä¸€ä¸ªä¼˜ç‚¹ï¼Œä¾¿äºé˜…è¯»å’Œdebugã€‚ä½†æ˜¯ï¼Œç°åœ¨å¾ˆå¤šéƒ½èµ°httpsï¼ŒSSLä¹ŸæŠŠplain textå˜æˆäº†äºŒè¿›åˆ¶ï¼Œé‚£è¿™ä¸ªä¼˜ç‚¹ä¹Ÿæ²¡äº†ã€‚ äºæ˜¯HTTP2æäº†ä¸ªHPACKå‹ç¼©æ¥å‹ç¼©å¤´éƒ¨ï¼Œå‡å°‘æŠ¥æ–‡å¤§å°(è°ƒè¯•è¿™æ ·çš„åè®®å°†éœ€è¦curlè¿™æ ·çš„å·¥å…·ï¼Œè¦è¿›ä¸€æ­¥åœ°åˆ†æç½‘ç»œæ•°æ®æµéœ€è¦ç±»ä¼¼Wiresharkçš„http2è§£æå™¨)ã€‚
3. æœåŠ¡ç«¯æ¨é€Server Push è¿™ä¸ªåŠŸèƒ½é€šå¸¸è¢«ç§°ä½œâ€œç¼“å­˜æ¨é€â€ã€‚ä¸»è¦çš„æ€æƒ³æ˜¯ï¼šå½“ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚èµ„æºXï¼Œè€ŒæœåŠ¡å™¨çŸ¥é“å®ƒå¾ˆå¯èƒ½ä¹Ÿéœ€è¦èµ„æºZçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚å‰ï¼Œä¸»åŠ¨å°†èµ„æºZæ¨é€ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸ªåŠŸèƒ½å¸®åŠ©å®¢æˆ·ç«¯å°†Zæ”¾è¿›ç¼“å­˜ä»¥å¤‡å°†æ¥ä¹‹éœ€ã€‚
æ€»ç»“  å•ä¸€çš„é•¿è¿æ¥ï¼Œå‡å°‘äº†SSLæ¡æ‰‹çš„å¼€é”€ å¤´éƒ¨è¢«å‹ç¼©ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“é‡ å¤šè·¯å¤ç”¨èƒ½å¤§å¹…æé«˜ä¼ è¾“æ•ˆç‡ï¼Œä¸ç”¨ç­‰å¾…ä¸Šä¸€ä¸ªè¯·æ±‚çš„å“åº” ä¸ç”¨åƒhttp1.xé‚£æ ·æŠŠå¤šä¸ªæ–‡ä»¶æˆ–è€…èµ„æºå¼„æˆä¸€ä¸ªæ–‡ä»¶æˆ–è€…èµ„æºï¼ˆhttp1.xå¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µï¼‰ï¼Œè¿™æ—¶å€™ï¼Œç¼“å­˜å°±èƒ½æ›´å®¹æ˜“å‘½ä¸­å•Šï¼ˆhttp1.xé‡Œé¢ä½ æ‰æˆä¸€å›¢çš„ä¸œè¥¿æ€ä¹ˆå‘½ä¸­ç¼“å­˜ï¼Ÿï¼‰  å‚è€ƒ HTTP/2 ç›¸æ¯” 1.0 æœ‰å“ªäº›é‡å¤§æ”¹è¿›ï¼Ÿ HTTP 2 çš„æ–°ç‰¹æ€§ä½  get äº†å—ï¼Ÿ HTTP/2 æœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰æ•™ç¨‹ </description>
    </item>
    
    <item>
      <title>io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/exception/io.lettuce.core.rediscommandtimeoutexception_-comm/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/exception/io.lettuce.core.rediscommandtimeoutexception_-comm/</guid>
      <description>lettuceè¿æ¥redisæŠ¥é”™io.lettuce.core.RedisCommandTimeoutException: Command timed out after 5 second(s)ï¼Œæˆ‘çš„spring.redis.timeout = 5000ã€‚
è§£å†³åŠæ³•ï¼š
 ç™»é™†rediså®¹å™¨ è¾“å…¥redis-cliè¿›å…¥redisæ§åˆ¶å° è®¾ç½® CONFIG SET timeout &amp;quot;60&amp;quot; è®¾ç½® CONFIG SET tcp-keepalive &amp;quot;300&amp;quot;  å‚è€ƒ Redis é…ç½® </description>
    </item>
    
    <item>
      <title>iptables: No chain/target/match by that name.</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/iptables_-no-chain_target_match-by-that-name/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/iptables_-no-chain_target_match-by-that-name/</guid>
      <description>iptables: No chain/target/match by that name.
é‡å¯redisé•œåƒçš„æ—¶å€™æŠ¥é”™å¦‚ä¸‹ï¼š
ERROR: for redis Cannot start service redis: driver failed programming external connectivity on endpoint redis (f5211771e5a0ee705edb72f8a8dfbca2503456ab0e8330a32932b029a7c0568d): (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 6379 -j DNAT --to-destination 192.168.80.2:6379 ! -i br-fbefac0273aa: iptables: No chain/target/match by that name. åŸå› ï¼š
docker æœåŠ¡å¯åŠ¨çš„æ—¶å€™ï¼ŒdockeræœåŠ¡ä¼šå‘iptablesæ³¨å†Œä¸€ä¸ªé“¾ï¼Œä»¥ä¾¿è®©dockeræœåŠ¡ç®¡ç†çš„containneræ‰€æš´éœ²çš„ç«¯å£ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚é€šè¿‡å‘½ä»¤iptables -Lå¯ä»¥æŸ¥çœ‹iptables é“¾ã€‚å¦‚æœä½ åˆ é™¤äº†iptablesä¸­çš„dockeré“¾ï¼Œæˆ–è€…iptablesçš„è§„åˆ™è¢«ä¸¢å¤±äº†ï¼ˆä¾‹å¦‚é‡å¯firewalldï¼Œæˆ‘å°±æ˜¯ä½¿ç”¨äº†systemctl stop iptableså¯¼è‡´é“¾ä¸¢å¤±ï¼‰ï¼Œdockerå°±ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚
è§£å†³åŠæ³•ï¼š
systemctl restart docker é‡å¯dockeræœåŠ¡ï¼Œä¹‹åï¼Œæ­£ç¡®çš„iptablesè§„åˆ™å°±ä¼šè¢«åˆ›å»ºå‡ºæ¥ã€‚
å‚è€ƒï¼š
Docker å¯åŠ¨æ—¶æŠ¥é”™ï¼šiptables:No chain/target/match by the name </description>
    </item>
    
    <item>
      <title>Java Agent</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-agent/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-agent/</guid>
      <description>Java Agentå°±æ˜¯ä¸€ä¸ªå¯ä»¥ä½œä¸ºjavaä»£ç†çš„å·¥å…·, ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¯ä¾›ç”¨äºç¼–å†™çš„javaåˆ‡é¢, å®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯ä¸ºç”¨æˆ·æä¾›äº†åœ¨ JVM å°†å­—èŠ‚ç æ–‡ä»¶è¯»å…¥å†…å­˜ä¹‹åï¼ŒJVM ä½¿ç”¨å¯¹åº”çš„å­—èŠ‚æµåœ¨ Java å †ä¸­ç”Ÿæˆä¸€ä¸ª Class å¯¹è±¡ä¹‹å‰ï¼Œç”¨æˆ·å¯ä»¥å¯¹å…¶å­—èŠ‚ç è¿›è¡Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œä»è€Œ JVM ä¹Ÿå°†ä¼šä½¿ç”¨ç”¨æˆ·ä¿®æ”¹è¿‡ä¹‹åçš„å­—èŠ‚ç è¿›è¡Œæ–°çš„Class å¯¹è±¡çš„åˆ›å»º(æ‰“ç ´äº†ä¸€ä¸ªç±»åªèƒ½åŠ è½½ä¸€æ¬¡çš„è§„åˆ™)ã€‚
Java Agentçš„ä½¿ç”¨å¯¹äºä½ è‡ªèº«çš„ä»£ç æ˜¯æ— ä¾µå…¥æ€§çš„ã€‚åº”ç”¨åœºæ™¯ï¼šçƒ­æ›´æ–°ã€‚
çƒ­æ›´æ–°æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°ï¼Œè¿™ç§æ–¹å¼çš„çƒ­æ›´æ–°æ˜¯jvmåŸç”Ÿæ”¯æŒçš„æ–¹å¼, ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾:
  ä¸å¤Ÿçµæ´», éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶ç­‰æ“ä½œ
  é‡å¤åˆ›å»ºç±»åŠ è½½å™¨, å¹¶ä¸”å¸è½½å›°éš¾, ä¼šå¢åŠ ç³»ç»Ÿè´Ÿæ‹…
  ä½¿ç”¨èµ·æ¥å…·æœ‰ä»£ç ä¾µå…¥æ€§, éœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€å®šæ”¹é€ 
  é€šè¿‡ Java Agentå®Œç¾çš„è§£å†³äº†æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨å®ç°çƒ­æ›´æ–°çš„ç¼ºç‚¹ã€‚
1.1 JVMå¯åŠ¨å‰é™æ€Instrument é€šè¿‡å¯åŠ¨å‘½ä»¤ java -javaagent:agent1.jar -javaagent:agent2.jar -jar MyProgram.jar åœ¨ç›®æ ‡ç¨‹åºmainæ–¹æ³•æ‰§è¡Œå‰ï¼Œå…ˆæ‰§è¡Œagentä¸­å®šä¹‰çš„ premain æ–¹æ³•
1.2 JVMå¯åŠ¨ååŠ¨æ€Instrument Java6 ä»¥åæä¾›äº†åœ¨ç›®æ ‡ç¨‹åºmainæ–¹æ³•æ‰§è¡Œåï¼Œæ‰§è¡Œagentçš„agentmainæ–¹æ³•çš„æœºåˆ¶ï¼Œé€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€ä¿®æ”¹ç›®æ ‡ç¨‹åºå·²ç»åŠ è½½è¿‡çš„å­—èŠ‚ç ã€‚
åœ¨Java6 ä»¥åå®ç°å¯åŠ¨ååŠ è½½çš„æ–°å®ç°æ˜¯Attach API ã€‚Attach API å¾ˆç®€å•ï¼Œåªæœ‰ 2 ä¸ªä¸»è¦çš„ç±»ï¼Œå³VirtualMachine å’Œ VirtualMachineDescriptorï¼Œéƒ½åœ¨tool.jar çš„ com.sun.tools.attach åŒ…é‡Œé¢ã€‚
attachå®ç°åŠ¨æ€æ³¨å…¥çš„åŸç†å¦‚ä¸‹ï¼š
é€šè¿‡VirtualMachineç±»çš„attach(pid)æ–¹æ³•ï¼Œä¾¿å¯ä»¥attachåˆ°ä¸€ä¸ªè¿è¡Œä¸­çš„javaè¿›ç¨‹ä¸Šï¼Œä¹‹åä¾¿å¯ä»¥é€šè¿‡loadAgent(agentJarPath)æ¥å°†agentçš„jaråŒ…æ³¨å…¥åˆ°å¯¹åº”çš„è¿›ç¨‹ï¼Œç„¶åå¯¹åº”çš„è¿›ç¨‹ä¼šè°ƒç”¨agentmainæ–¹æ³•ã€‚
æ—¢ç„¶æ˜¯ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´é€šä¿¡é‚£è‚¯å®šçš„å»ºç«‹èµ·è¿æ¥ï¼ŒVirtualMachine.attachåŠ¨ä½œç±»ä¼¼TCPåˆ›å»ºè¿æ¥çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œç›®çš„å°±æ˜¯æ­å»ºattaché€šä¿¡çš„è¿æ¥ã€‚è€Œåé¢æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚vm.loadAgentï¼Œå…¶å®å°±æ˜¯å‘è¿™ä¸ªsocketå†™å…¥æ•°æ®æµï¼Œæ¥æ”¶æ–¹target VMä¼šé’ˆå¯¹ä¸åŒçš„ä¼ å…¥æ•°æ®æ¥åšä¸åŒçš„å¤„ç†ã€‚
ä¾‹å¦‚ï¼šæ‰¾åˆ°å½“å‰JVMå¹¶åŠ è½½agent.jarï¼ˆå³attach JVM å’Œ runing JVM æ˜¯åŒä¸€ä¸ª JVMï¼ŒçœŸæ­£çš„åº”ç”¨ä¸­æ›´å¤šçš„æ˜¯ä¸åŒçš„ä¸¤ä¸ªJVMï¼Œè¿™é‡Œä»…ä¸ºäº†æµ‹è¯•æ–¹ä¾¿ã€‚ï¼‰</description>
    </item>
    
    <item>
      <title>Java switchè¡¨è¾¾å¼æ”¯æŒçš„æ•°æ®ç±»å‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-switch%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java-switch%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</guid>
      <description>switch(expression){ case value : //è¯­å¥  break; //å¯é€‰  case value : //è¯­å¥  break; //å¯é€‰  //ä½ å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„caseè¯­å¥  default : //å¯é€‰  //è¯­å¥ } è¿™é‡Œçš„ expression æ”¯æŒï¼š
1ã€åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyte, short, char, int
2ã€åŒ…è£…æ•°æ®ç±»å‹ï¼šByte, Short, Character, Integer
3ã€æšä¸¾ç±»å‹ï¼šEnum
4ã€ å­—ç¬¦ä¸²ç±»å‹ï¼šStringï¼ˆJdk 7+ å¼€å§‹æ”¯æŒï¼‰
ä¸ºä»€ä¹ˆä¸æ”¯æŒlongã€floatã€doubleæ•°æ®ç±»å‹ï¼Ÿ
switch åº•å±‚æ˜¯ä½¿ç”¨ int å‹ æ¥è¿›è¡Œåˆ¤æ–­çš„ï¼Œå³ä½¿æ˜¯æšä¸¾ã€Stringç±»å‹ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è½¬å˜æˆ int å‹ã€‚ç”±äº longã€floatã€double å‹è¡¨ç¤ºèŒƒå›´å¤§äº int å‹ï¼Œå› æ­¤ä¸æ”¯æŒ longã€floatã€double ç±»å‹ã€‚ ï¼ˆStringç±»å‹æœ€ç»ˆæ˜¯è½¬æˆäº†intç±»å‹çš„hashCodeï¼›æšä¸¾æœ€ç»ˆè½¬æˆäº†æšä¸¾å¯¹è±¡çš„å®šä¹‰é¡ºåºï¼Œå³ ordinalå€¼ï¼‰
ä¸‹é¢ä¸¾ä¸€ä¸ªä½¿ç”¨åŒ…è£…ç±»å‹å’Œæšä¸¾çš„ï¼Œå…¶å®ä¹Ÿä¸éš¾ï¼Œæ³¨æ„åªèƒ½ç”¨åœ¨ switch å—é‡Œé¢
// ä½¿ç”¨åŒ…è£…ç±»å‹ Integer value = 5; switch (value) { case 3: System.</description>
    </item>
    
    <item>
      <title>Javaåç¨‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%8D%8F%E7%A8%8B/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%8D%8F%E7%A8%8B/</guid>
      <description>1. ç°çŠ¶ æ—¶è‡³ä»Šæ—¥ï¼ŒJDK17å·²ç»æ­£å¼å‘å¸ƒï¼ŒJavaä¹Ÿæ²¡æœ‰åœ¨è¯­è¨€å±‚é¢å¯¹åç¨‹æä¾›åŸç”Ÿæ”¯æŒã€‚
ä¸€å®šè¦åœ¨Javaä¸­ä½¿ç”¨åç¨‹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¯¸å¦‚quasar , kilim , coroutines ç¬¬ä¸‰æ–¹åº“æ„Ÿå—ä¸€ä¸‹ï¼Œå®ƒä»¬çš„åŸç†åŸºæœ¬éƒ½æ˜¯å­—èŠ‚ç å¢å¼º + Java Agentæœºåˆ¶ï¼Œè¿™ç§åšæ³•ä¸€æ˜¯å¯¹æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œå¯¹JITç¼–è¯‘å™¨çš„å½±å“ä¹Ÿéå¸¸å¤§ï¼Œå¦å¤–è¿™äº›åº“éƒ½å‡ å¹´å‰å°±ä¸åœ¨æ›´æ–°äº†ï¼Œè¿œè¾¾ä¸åˆ°ç”Ÿäº§ä½¿ç”¨çš„æ ‡å‡†ã€‚
è¿˜å¯ä»¥ä½¿ç”¨Kotlinæ··åˆç¼–ç¨‹ï¼ŒKotlinä¸­çš„åç¨‹æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€å¥—åŸºäºåŸç”ŸJava Thread API çš„å°è£…ï¼Œå’ŒGoä¸­çš„åç¨‹å®Œå…¨ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä¸è¦æ··æ·†ï¼Œæ›´è°ˆä¸ä¸Šä»€ä¹ˆæ€§èƒ½æ›´å¥½ï¼ŒKotlinä¸­çš„åç¨‹æœ€å¤§çš„ä»·å€¼æ˜¯å†™èµ·æ¥æ¯”RxJavaçš„çº¿ç¨‹åˆ‡æ¢è¿˜è¦æ–¹ä¾¿ï¼Œå‡ ä¹å°±æ˜¯ç”¨é˜»å¡çš„å†™æ³•æ¥å®Œæˆéé˜»å¡çš„ä»»åŠ¡ã€‚
openjdkä¹Ÿæœ‰æ­£åœ¨å­µåŒ–çš„å®˜æ–¹åç¨‹é¡¹ç›®loom ï¼Œå…¶èƒ½å¦releaseè¿˜éœ€æ‹­ç›®ä»¥å¾…ã€‚
2. æˆå›  æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´Oracleä¸€ç›´ä¸ç€æ€¥æ¨å‡ºå¯¹åç¨‹çš„æ”¯æŒå‘¢ï¼Ÿ
å…ˆè¿”å›åˆ°é—®é¢˜çš„æœ¬æºã€‚å½“æˆ‘ä»¬å¸Œæœ›å¼•å…¥åç¨‹ï¼Œæˆ‘ä»¬æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚æˆ‘æƒ³ä¸å¤–ä¹ä¸‹é¢å‡ ç‚¹ï¼š
  èŠ‚çœèµ„æºï¼šèŠ‚çœå†…å­˜ã€èŠ‚çœåˆ†é…çº¿ç¨‹çš„å¼€é”€ï¼ˆåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹è¦å„åšä¸€æ¬¡syscallï¼‰ã€èŠ‚çœå¤§é‡çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„å¼€é”€
  ä¸NIOé…åˆå®ç°éé˜»å¡çš„ç¼–ç¨‹ï¼Œæé«˜ç³»ç»Ÿçš„åå
  ä½¿ç”¨èµ·æ¥æ›´åŠ èˆ’æœé¡ºç•…ï¼ŒåŒæ­¥çš„ç¼–ç¨‹é£æ ¼ç¼–å†™å¼‚æ­¥ç¨‹åº
  2.1 èŠ‚çœèµ„æº 1. èŠ‚çœå†…å­˜ æˆ‘ä»¬ä»¥å¸¸è§çš„Java Webä¸¾ä¾‹ï¼Œspingbootåˆ†é…ç»™tomcatçš„çº¿ç¨‹æ± å¤§å°é»˜è®¤å€¼æ˜¯200ï¼Œå³ä½¿æŒ‰ç…§1Mçº¿ç¨‹å¤§å°è®¡ç®—ï¼Œ200Mçš„å†…å­˜å ç”¨å¯¹äºåŠ¨è¾„å‡ ä¸ªGçš„Java Webåº”ç”¨å¹¶ä¸ç®—ä»€ä¹ˆã€‚
å³ä½¿æ˜¯IMçš„åœºæ™¯ï¼Œæœ‰æ•°ç™¾ä¸‡çš„é•¿é“¾æ¥éœ€è¦ç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨NIO+Workerçº¿ç¨‹åº”å¯¹ã€‚
è¿˜å¯ä»¥è°ƒæ•´çº¿ç¨‹æ ˆå ç”¨å†…å­˜å¤§å°ï¼ˆ-Xss1024k æˆ–è€… -XX:ThreadStackSize=1024kï¼‰
2. èŠ‚çœçº¿ç¨‹åˆ†é…å¼€é”€ çº¿ç¨‹æ± 
3. èŠ‚çœçº¿ç¨‹åˆ‡æ¢å¼€é”€ æˆ‘ä»¬ä»ç„¶ä»¥Java Webä¸¾ä¾‹ï¼Œå¤§é‡çš„çº¿ç¨‹å¤§éƒ¨åˆ†æ—¶é—´å®é™…ä¸Šå› ä¸ºIOï¼ˆå‘è¯·æ±‚/è¯»DBï¼‰è€ŒæŒ‚èµ·ï¼Œæ ¹æœ¬ä¸ä¼šå‚ä¸OSçš„çº¿ç¨‹åˆ‡æ¢ï¼Œç°å®å½“ä¸­ä¸€ä¸ªæœ€å¤§200çº¿ç¨‹çš„æœåŠ¡å™¨å¯èƒ½åŒä¸€æ—¶åˆ»çš„â€œæ´»è·ƒçº¿ç¨‹â€æ€»æ•°åªæœ‰æ•°åè€Œå·²ã€‚å…¶å¼€é”€æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆå¤§ã€‚
2.2 éé˜»å¡ç¼–ç¨‹ nio ğŸ‘‰ netty
2.3 ä¼˜é›…å¼‚æ­¥ç¼–ç¨‹ å“åº”å¼ç¼–ç¨‹åº“
å¯è§Javaå¯¹äºå¼•å…¥åç¨‹æœºåˆ¶å¹¶ä¸é‚£ä¹ˆç´§è¿«ï¼›å¹¶ä¸”Javaä¸åƒGolangç­‰æ–°è¯­è¨€ï¼Œæ²¡æœ‰å†å²åŒ…è¢±ï¼Œå®ƒä»¬å¯ä»¥ä¸æä¾›çº¿ç¨‹åªæä¾›åç¨‹ç¼–ç¨‹ï¼Œä½†æ˜¯Javaå¦‚æœæ²¡æœ‰threadï¼Œä¹Ÿæ²¡æœ‰ThreadLocalï¼Œ@Transactionalä¸èµ·ä½œç”¨äº†ï¼Œåˆæ²¡æœ‰ç­‰ä»·çš„å·¥å…·ï¼Œæ˜¯ä¸æ˜¯å¾ˆéƒé—·ï¼Ÿ
å‚è€ƒ ä¸ºä»€ä¹ˆ Java åšæŒå¤šçº¿ç¨‹ä¸é€‰æ‹©åç¨‹ï¼Ÿ Kotlin åç¨‹çœŸçš„æ¯” Java çº¿ç¨‹æ›´é«˜æ•ˆå—ï¼Ÿ ç¡¬æ ¸ç³»åˆ— | æ·±å…¥å‰–æ Java åç¨‹ Golang çš„ åç¨‹è°ƒåº¦æœºåˆ¶ ä¸ GOMAXPROCS æ€§èƒ½è°ƒä¼˜ </description>
    </item>
    
    <item>
      <title>Javaåå°„</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%8F%8D%E5%B0%84/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%8F%8D%E5%B0%84/</guid>
      <description>åå°„å¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€çš„æ„é€ ç±»ã€è·å–ç±»çš„å…¨éƒ¨ä¿¡æ¯ã€è°ƒç”¨ç±»å‹æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è¿™ä¹ˆåšå‘¢ï¼Ÿéœ€è¦æ„é€ ç±»ï¼Œnewå°±å¥½äº†ï¼Œéœ€è¦è®¿é—®ç±»æˆå‘˜å˜é‡ã€è°ƒç”¨æ–¹æ³•ï¼Œç›´æ¥è®¿é—®ã€è°ƒç”¨å°±å¥½äº†ï¼Œä¸ºä»€ä¹ˆè¦é€šè¿‡ä¸€å¤§å †åå°„ä»£ç å»å®ç°å‘¢ï¼Ÿ
é€šå¸¸ï¼Œclassåœ¨ç¼–è¯‘æœŸé—´å°±ç¡®å®šï¼ŒJVMåœ¨è¿è¡Œæ—¶é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½ç¡®å®šçš„classã€‚å¦‚æœåœ¨è¿è¡Œæ—¶æ‰ç¡®å®šéœ€è¦åŠ è½½ä»€ä¹ˆç±»ï¼Œå°±éœ€è¦åˆ©ç”¨javaåå°„ã€‚javaåå°„ä½¿å¾—ç¨‹åºæ›´åŠ çµæ´»ï¼Œç±»ä¼¼springçš„æ¡†æ¶å°†ç±»ä»¥å…¨é™å®šåçš„å½¢æˆé…ç½®åœ¨é…ç½®æ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡åå°„å®ä¾‹åŒ–ã€‚
å‚è€ƒï¼š
https://blog.csdn.net/Appleyk/article/details/77879073 </description>
    </item>
    
    <item>
      <title>Javaå †å¤–å†…å­˜æº¢å‡º</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%A0%86%E5%A4%96%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/</guid>
      <description>å‰æ®µæ—¶é—´åœ¨åšä¸€ä¸ªå®æ—¶äººè„¸æŠ“æ‹é¡¹ç›®çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªå †å¤–å†…å­˜OOMçš„é—®é¢˜ï¼Œç°åœ¨æŠŠæ€è·¯å¥½å¥½æ•´ç†ä¸€ä¸‹ã€‚
é¡¹ç›®ä¸­ç”¨opencvé€šè¿‡rtspåè®®ï¼Œå®æ—¶çš„è¯»å–é€šç”¨ç½‘ç»œæ‘„åƒå¤´çš„è§†é¢‘å¸§ã€‚å› ä¸ºé¡¹ç›®ä¸­å¤šå¤„ç”¨åˆ°äº†org.opencv.core.Matè¿™ä¸ªå¯¹è±¡ï¼Œè€ŒMatå¯¹è±¡çš„æ„é€ æ˜¯é€šè¿‡è°ƒç”¨nativeæ–¹æ³•å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ„é€ Matå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šåœ¨å †å¤–åˆ†é…å†…å­˜ï¼š
//  // C++: Mat::Mat()  //  // javadoc: Mat::Mat()  public Mat() { nativeObj = n_Mat(); return; } // C++: Mat::Mat()  private static native long n_Mat(); å †å¤–åˆ†é…çš„å†…å­˜ä¸å—JVMçš„å†…å­˜ç®¡ç†ã€‚ç”±äºåˆæ²¡æœ‰ä¸»åŠ¨è°ƒç”¨Mat.realse()å»é‡Šæ”¾å †å¤–å†…å­˜ï¼Œå¯¼è‡´å †å¤–å†…å­˜OOMã€‚
å…¶å®è§£å†³çš„åŠæ³•å¾ˆç®€å•ï¼Œå¯ä»¥åœ¨Matå¯¹è±¡ä½¿ç”¨å®Œæ¯•åç›´æ¥è°ƒç”¨Mat.realse()é‡Šæ”¾å †å¤–å†…å­˜ã€‚ï¼ˆæ²¡æœ‰è¯•è¿‡ï¼Œæœ¬äººä½¿ç”¨çš„ä¸‹é¢çš„æ–¹å¼ï¼‰
ä½†æ˜¯ï¼ŒMatå¯¹è±¡å……æ–¥ç€æ•´ä¸ªé¡¹ç›®ï¼Œè¦è·Ÿè¸ªMatå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¾å¾—æœ‰ç‚¹å¤æ‚ï¼Œè€Œä¸”å› ä¸ºå¤ªå¤šåœ°æ–¹ä½¿ç”¨äº†Matå¯¹è±¡ï¼Œå¾ˆæœ‰å¯èƒ½é—æ¼è°ƒç”¨Mat.realse()é‡Šæ”¾å†…å­˜ã€‚å› æ­¤ï¼Œè¿˜æ˜¯æƒ³æŠŠè¿™éƒ¨åˆ†å†…å­˜çš„é‡Šæ”¾äº¤ç”±JVMæ¥åšï¼Œå…·ä½“çš„æ–¹å¼æ˜¯ï¼šå®šæœŸçš„è°ƒç”¨System.gc()æ‰§è¡Œåƒåœ¾å›æ”¶ï¼ˆå¾ˆå¤šäººè¯´System.gc()åªæ˜¯å»ºè®®JVMæ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œå¹¶ä¸æ˜¯å‘½ä»¤ï¼Œæ˜¯å¦æ‰§è¡Œå–å†³å»JVMè‡ªå·±ï¼Œä½†æ˜¯ï¼Œç»æˆ‘å®æµ‹ï¼Œæ¯æ¬¡è°ƒç”¨System.gc()éƒ½ä¼šè§¦å‘åƒåœ¾å›æ”¶ã€‚ï¼‰ï¼ŒJVMåœ¨åƒåœ¾å›æ”¶å‰ä¼šæ‰§è¡Œæ¯ä¸ª**ç©ºjavaå¯¹è±¡ï¼ˆnullï¼‰**çš„finalize()æ–¹æ³•ï¼Œè€ŒMatå¯¹è±¡çš„finalize()æ–¹æ³•æ­£å¥½å®ç°äº†é‡Šæ”¾å†…å­˜çš„é€»è¾‘ï¼š
@Override protected void finalize() throws Throwable { n_delete(nativeObj); super.finalize(); } // native support for java finalize()  private static native void n_delete(long nativeObj); å› ä¸ºä¼šå®šæ—¶çš„è°ƒç”¨System.gc()è§¦å‘Full GC, è€ŒFull GCçš„ä¹‹å‰ä¼šè°ƒç”¨é‚£äº›ä¸å†è¢«å¼•ç”¨çš„Matå¯¹è±¡çš„finalize()æ–¹æ³•é‡Šæ”¾å®ƒçš„å †å¤–å†…å­˜ï¼Œæ‰€ä»¥é—´æ¥çš„å®ç°äº†ç”±JVMé‡Šæ”¾å †å¤–å†…å­˜çš„ç›®çš„ã€‚
ä½†æ˜¯ï¼Œè¿™ç§åšæ³•å¹¶ä¸å¥½ï¼Œå› ä¸ºé€šè¿‡System.gc()å¼ºåˆ¶å®šæœŸæ‰§è¡ŒFull GCï¼ŒåŠ¿å¿…ä¼šå½±å“javaåº”ç”¨æœ¬èº«ã€‚
ä¸ºä½•ä¸€å®šè¦å¤åˆ¶åˆ°DirectByteBufferæ¥è¯»å†™ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Ÿ
GCä¼šå›æ”¶æ— ç”¨å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ä¼šè¿›è¡Œç¢ç‰‡æ•´ç†ï¼Œç§»åŠ¨å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œæ¥å‡å°‘å†…å­˜ç¢ç‰‡ã€‚DirectByteBufferä¸å—GCæ§åˆ¶ã€‚å¦‚æœä¸ç”¨DirectByteBufferè€Œæ˜¯ç”¨HeapByteBufferï¼Œå¦‚æœåœ¨è°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œå‘ç”Ÿäº†GCï¼Œå¯¼è‡´HeapByteBufferå†…å­˜ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯å†…æ ¸æ€å¹¶ä¸èƒ½æ„ŸçŸ¥åˆ°è¿™ä¸ªå˜åŒ–å¯¼è‡´ç³»ç»Ÿè°ƒç”¨è¯»å–æˆ–è€…å†™å…¥é”™è¯¯çš„æ•°æ®ã€‚æ‰€ä»¥ä¸€å®šè¦é€šè¿‡ä¸å—GCå½±å“çš„DirectByteBufferæ¥è¿›è¡ŒIOç³»ç»Ÿè°ƒç”¨ã€‚
å‡è®¾æˆ‘ä»¬è¦ä»ç½‘ç»œä¸­è¯»å…¥ä¸€æ®µæ•°æ®ï¼Œå†æŠŠè¿™æ®µæ•°æ®å‘é€å‡ºå»çš„è¯ï¼Œé‡‡ç”¨Non-direct ByteBufferçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š
ç½‘ç»œ â€“&amp;gt; ä¸´æ—¶çš„DirectByteBuffer â€“&amp;gt; åº”ç”¨ Non-direct ByteBuffer â€“&amp;gt; ä¸´æ—¶çš„Direct ByteBuffer â€“&amp;gt; ç½‘ç»œ è¿™ç§æ–¹å¼æ˜¯ç›´æ¥åœ¨å †å¤–åˆ†é…ä¸€ä¸ªå†…å­˜(å³ï¼Œnative memory)æ¥å­˜å‚¨æ•°æ®ï¼Œ ç¨‹åºé€šè¿‡JNIç›´æ¥å°†æ•°æ®è¯»/å†™åˆ°å †å¤–å†…å­˜ä¸­ã€‚å› ä¸ºæ•°æ®ç›´æ¥å†™å…¥åˆ°äº†å †å¤–å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼å°±ä¸ä¼šå†åœ¨JVMç®¡æ§çš„å †å†…å†åˆ†é…å†…å­˜æ¥å­˜å‚¨æ•°æ®äº†ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å †å†…å†…å­˜å’Œå †å¤–å†…å­˜æ•°æ®æ‹·è´çš„æ“ä½œäº†ã€‚è¿™æ ·åœ¨è¿›è¡ŒI/Oæ“ä½œæ—¶ï¼Œåªéœ€è¦å°†è¿™ä¸ªå †å¤–å†…å­˜åœ°å€ä¼ ç»™JNIçš„I/Oçš„å‡½æ•°å°±å¥½äº†ã€‚</description>
    </item>
    
    <item>
      <title>Javaå¦‚ä½•ç»‘å®šçº¿ç¨‹åˆ°æŒ‡å®šCPUä¸Šæ‰§è¡Œ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%A6%82%E4%BD%95%E7%BB%91%E5%AE%9A%E7%BA%BF%E7%A8%8B%E5%88%B0%E6%8C%87%E5%AE%9Acpu%E4%B8%8A%E6%89%A7%E8%A1%8C/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%A6%82%E4%BD%95%E7%BB%91%E5%AE%9A%E7%BA%BF%E7%A8%8B%E5%88%B0%E6%8C%87%E5%AE%9Acpu%E4%B8%8A%E6%89%A7%E8%A1%8C/</guid>
      <description>ç»‘å®šæ ¸å¿ƒä¹‹åä¸å­˜åœ¨çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå°±å¯ä»¥æ›´å¥½çš„åˆ©ç”¨CPUç¼“å­˜ã€‚
 ä¸çŸ¥é“ä½ æ˜¯å•¥æ„Ÿè§‰ï¼Œä½†æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘æ˜¯æ‡µé€¼çš„ã€‚
è€Œä¸”å®ƒè¿˜æ˜¯ä¸€ä¸ªé¢è¯•é¢˜ã€‚
æˆ‘æ‡µé€¼å€’ä¸æ˜¯å› ä¸ºæˆ‘ä¸çŸ¥é“ç­”æ¡ˆï¼Œè€Œæ˜¯æ°å¥½æˆ‘ä¹‹å‰åœ¨éå¸¸æœºç¼˜å·§åˆçš„æƒ…å†µä¸‹çŸ¥é“äº†ç­”æ¡ˆã€‚
æˆ‘æ„Ÿè§‰éå¸¸çš„å†·é—¨ï¼Œä½œä¸ºä¸€ä¸ªè€ƒå¯Ÿå€™é€‰è€…çš„çŸ¥è¯†ç‚¹å‡ºç°åœ¨é¢è¯•ç¯èŠ‚ä¸­ä¸å¤ªåˆé€‚ï¼Œé™¤éæ˜¯å€™é€‰è€…ä¸»åŠ¨æèµ·åšè¿‡è¿™æ ·çš„ä¼˜åŒ–ã€‚
è€Œä¸”æ€•å°±æ€•é¢è¯•å®˜ä¹Ÿæ˜¯æ°å·§åœ¨æŸä¸ªä¹¦ä¸Šæˆ–è€…åšå®¢ä¸­çŸ¥é“è¿™ä¸ªä¸œè¥¿ï¼Œç¨å¾®çš„çœ‹äº†ä¸€ä¸‹ï¼Œä»¥ä¸ºè‡ªå·±å­¦åˆ°äº†ç»ä¸–æ­¦åŠŸï¼Œç„¶åæ‹¿å‡ºå»è€ƒåˆ«äººã€‚
è¿™æ ·ä¸åˆé€‚ã€‚
è¯´å›è¿™ä¸ªé¢˜ç›®ã€‚
æ­£å¸¸æ¥è¯´ï¼Œå…¶å®åº”è¯¥æ˜¯å±äºè€ƒå¯Ÿæ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ç‚¹èŒƒç•´ã€‚
ä½†æ˜¯é¢è¯•å®˜å‘¢åˆç‰¹å®šçš„åŠ äº†â€œåœ¨ Java ä¸­å¦‚ä½•å®ç°â€ã€‚
é‚£æˆ‘ä»¬å°±èŠèŠè¿™ä¸ªé—®é¢˜ã€‚
Javaçº¿ç¨‹ åœ¨èŠå¦‚ä½•ç»‘å®šä¹‹å‰ï¼Œå…ˆé“ºå«ä¸€ä¸ªç›¸å…³çš„èƒŒæ™¯çŸ¥è¯†ï¼šJavaçº¿ç¨‹çš„å®ç°ã€‚
å…¶å®æˆ‘ä»¬éƒ½çŸ¥é“ Thread ç±»çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯ native æ–¹æ³•ï¼š
åœ¨ Java ä¸­ä¸€ä¸ªæ–¹æ³•è¢«å£°æ˜ä¸º native æ–¹æ³•ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¯´æ˜è¿™ä¸ªæ–¹æ³•æ²¡æœ‰æˆ–è€…ä¸èƒ½ä½¿ç”¨å¹³å°æ— å…³çš„æ‰‹æ®µæ¥å®ç°ã€‚
è¯´æ˜éœ€è¦æ“ä½œçš„æ˜¯å¾ˆåº•å±‚çš„ä¸œè¥¿äº†ï¼Œå·²ç»è„±ç¦»äº† Java è¯­è¨€å±‚é¢çš„èŒƒç•´ã€‚
æŠ›å¼€ Java è¯­è¨€è¿™ä¸ªå¤§å‰æï¼Œå®ç°çº¿ç¨‹ä¸»è¦æ˜¯æœ‰ä¸‰ç§æ–¹å¼ï¼š
 1.ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°ï¼ˆ1:1å®ç°ï¼‰ 2.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°ï¼ˆ1:Nå®ç°ï¼‰ 3.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°ï¼ˆN:Må®ç°ï¼‰
 è¿™ä¸‰ç§å®ç°æ–¹æ¡ˆï¼Œåœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹çš„ 12.4 å°èŠ‚æœ‰è¯¦ç»†çš„æè¿°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»ä»”ç»†çš„ç¿»é˜…ä¸€ä¸‹ã€‚
æ€»ä¹‹ï¼Œä½ è¦çŸ¥é“çš„æ˜¯è™½ç„¶æœ‰è¿™ä¸‰ç§ä¸åŒçš„çº¿ç¨‹æ¨¡å‹ï¼Œä½†æ˜¯ Java ä½œä¸ºä¸Šå±‚åº”ç”¨ï¼Œå…¶å®æ˜¯æ„ŸçŸ¥ä¸åˆ°è¿™ä¸‰ç§æ¨¡å‹ä¹‹é—´çš„åŒºåˆ«çš„ã€‚
JVM è§„èŒƒé‡Œé¢ä¹Ÿæ²¡æœ‰è§„å®šï¼Œå¿…é¡»ä½¿ç”¨å“ªä¸€ç§æ¨¡å‹ã€‚
å› ä¸ºæ“ä½œç³»ç»Ÿæ”¯æŒæ˜¯æ€æ ·çš„çº¿ç¨‹æ¨¡å‹ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†è¿è¡Œåœ¨ä¸Šé¢çš„ Java è™šæ‹Ÿæœºçš„çº¿ç¨‹æ€æ ·å»æ˜ å°„ï¼Œä½†æ˜¯è¿™ä¸€ç‚¹åœ¨ä¸åŒçš„å¹³å°ä¸Šå¾ˆéš¾è¾¾æˆä¸€è‡´ã€‚
æ‰€ä»¥JVM è§„èŒƒé‡Œé¢æ²¡æœ‰ã€ä¹Ÿä¸å¥½å»è§„å®š Java çº¿ç¨‹éœ€è¦ä½¿ç”¨å“ªç§çº¿ç¨‹æ¨¡å‹æ¥å®ç°ã€‚
åŒæ—¶å…³äºæœ¬æ–‡è¦è®¨è®ºçš„è¯é¢˜ï¼Œæˆ‘åœ¨çŸ¥ä¹ä¸Šä¹Ÿæ‰¾åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼š
 https://www.zhihu.com/question/64072646/answer/216184631  è¿™é‡Œé¢æœ‰ä¸€ä¸ªRå¤§çš„å›ç­”ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ä¸€ä¸‹ã€‚
ä»–ä¹Ÿæ˜¯å…ˆä»çº¿ç¨‹æ¨¡å‹çš„è§’åº¦é“ºå«äº†ä¸€ä¸‹ã€‚
æˆ‘è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°ï¼ˆ1:1å®ç°ï¼‰çš„è¿™ä¸ªæ¨¡å‹ã€‚
å› ä¸ºæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„ HotSpot è™šæ‹Ÿæœºï¼Œå°±æ˜¯é‡‡ç”¨ 1:1 æ¨¡å‹æ¥å®ç° Java çº¿ç¨‹çš„ã€‚
è¿™æ˜¯ä¸ªå•¥æ„æ€å‘¢ï¼Ÿ
è¯´äººè¯å°±æ˜¯ä¸€ä¸ª Java çº¿ç¨‹æ˜¯ç›´æ¥æ˜ å°„ä¸ºä¸€ä¸ªæ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹çš„ï¼Œä¸­é—´æ²¡æœ‰é¢å¤–çš„é—´æ¥ç»“æ„ã€‚HotSpot è™šæ‹Ÿæœºä¹Ÿä¸å¹²æ¶‰çº¿ç¨‹çš„è°ƒåº¦ï¼Œè¿™äº‹å…¨æƒäº¤ç»™åº•ä¸‹çš„æ“ä½œç³»ç»Ÿå»åšã€‚</description>
    </item>
    
    <item>
      <title>Javaå®‰è£…æŒ‡å—</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/</guid>
      <description>1. ä¸‹è½½JDK è¿›å…¥Oracle å®˜æ–¹ç½‘ç«™ ä¸‹è½½åˆé€‚çš„ JDK ç‰ˆæœ¬ï¼Œå‡†å¤‡å®‰è£…ã€‚
2. åˆ›å»ºç›®å½• æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåœ¨ /usr/ ç›®å½•ä¸‹åˆ›å»º java ç›®å½•ã€‚
mkdir /usr/java cd /usr/java å°†ä¸‹è½½çš„æ–‡ä»¶ jdk-8u151-linux-x64.tar.gz å¤åˆ¶åˆ° /usr/java/ ç›®å½•ä¸‹ã€‚
3. è§£å‹ JDK tar -zxvf jdk-8u151-linux-x64.tar.gz 4. è®¾ç½®ç¯å¢ƒå˜é‡ set java environment JAVA_HOME=/usr/java/jdk1.8.0_151 JRE_HOME=/usr/java/jdk1.8.0_151/jre CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin export JAVA_HOME JRE_HOME CLASS_PATH PATH ä½¿ä¿®æ”¹ç”Ÿæ•ˆï¼š
source /etc/profile 5. æµ‹è¯• æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œæµ‹è¯•ã€‚
java -version è‹¥æ˜¾ç¤º Java ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¯´æ˜ JDK å®‰è£…æˆåŠŸï¼š
java version &amp;#34;1.8.0_151&amp;#34; Java(TM) SE Runtime Environment (build 1.8.0_151-b12) Java HotSpot(TM) 64-Bit Server VM (build 25.</description>
    </item>
    
    <item>
      <title>Javaå¯¹è±¡çš„hashCodeæ–¹æ³•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%AF%B9%E8%B1%A1%E7%9A%84hashcode%E6%96%B9%E6%B3%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/java%E5%AF%B9%E8%B1%A1%E7%9A%84hashcode%E6%96%B9%E6%B3%95/</guid>
      <description>javaä¸­çš„Objectç±»çš„hashCodeæ–¹æ³•æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼ŒæŸ¥çœ‹nativeæºç è¿‡äºå›°éš¾ï¼Œæ‰€ä»¥æš‚ä¸”è®¤ä¸º Objectç±»çš„hashCodeç”Ÿæˆè§„åˆ™æ˜¯ï¼šhash(å¯¹è±¡çš„å†…å­˜åœ°å€+ä¸€äº›å…¶ä»–ä¿¡æ¯)
javaä¸­Stringç±»çš„ hashCodeæ–¹æ³• æ¯”è¾ƒç›´è§‚ï¼Œæºç å¦‚ä¸‹ï¼š
public int hashCode() { int h = hash; if (h == 0 &amp;amp;&amp;amp; value.length &amp;gt; 0) { char val[] = value; for (int i = 0; i &amp;lt; value.length; i++) { h = 31 * h + val[i]; } hash = h; } return h; } ç”Ÿæˆè§„åˆ™ï¼šs[0]*31^(n-1) + s[1]*31^(n-2) + &amp;hellip; + s[n-1]
ä¸ºä»€ä¹ˆæ˜¯ç´ æ•°31ï¼Ÿ
ç´ æ•°ï¼šæ ¹æ®ç´ æ•°çš„ç‰¹ç‚¹ï¼Œä¸€ä¸ªæ•°ä¸ç´ æ•°ç›¸ä¹˜ï¼Œå¾—åˆ°ç»“æœåªèƒ½è¢«1ã€è¿™ä¸ªæ•°ã€ç´ æ•°æœ¬èº«æ•´é™¤ã€‚å› æ­¤ï¼ŒæŒ‰ç…§ s[0]*31^(n-1) + s[1]*31^(n-2) + &amp;hellip; + s[n-1] ç”Ÿæˆçš„hashCodeè¶Šä¸å®¹æ˜“å‘ç”Ÿç¢°æ’ã€‚
31ï¼šå“ˆå¸Œè®¡ç®—é€Ÿåº¦å¿«ã€‚å¯ç”¨ç§»ä½å’Œå‡æ³•æ¥ä»£æ›¿ä¹˜æ³•ã€‚ç°ä»£çš„VMå¯ä»¥è‡ªåŠ¨å®Œæˆè¿™ç§ä¼˜åŒ–ï¼Œå¦‚31 * i = (i &amp;laquo; 5) - iã€‚</description>
    </item>
    
    <item>
      <title>JITå³æ—¶ç¼–è¯‘</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/jit%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/jit%E5%8D%B3%E6%97%B6%E7%BC%96%E8%AF%91/</guid>
      <description>JIT (just-in-time compilation) æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯¹çƒ­ç‚¹ä»£ç è¿›è¡Œç¼–è¯‘çš„è¿‡ç¨‹ï¼Œç¼–è¯‘åçš„æœºå™¨ç å­˜å…¥CodeCacheï¼Œä¸‹æ¬¡å†é‡åˆ°è¿™æ®µä»£ç ï¼Œå°±ä¼šä»CodeCacheä¸­è¯»å–æœºå™¨ç ï¼Œç›´æ¥æ‰§è¡Œï¼Œä»¥æ­¤æ¥æå‡ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚
æœ‰çš„JVMå…¨ç¨‹éƒ½æ˜¯JITç¼–è¯‘è¿è¡Œï¼Œä¾‹å¦‚ï¼šJRockitï¼›æœ‰çš„JVMæ˜¯è§£é‡Šå™¨ + JITè¿è¡Œï¼Œä¾‹å¦‚ï¼šHotSpot, J9ï¼ˆä¹Ÿæ”¯æŒAOTï¼‰ï¼›æœ‰çš„JVMæ²¡æœ‰è§£é‡Šå™¨ï¼Œåªæ”¯æŒAOT+JITæˆ–è€…çº¯AOTï¼Œä¾‹å¦‚ï¼šExcelsior JET
ä»¥HotSpot JVMä¸¾ä¾‹ï¼ŒJITè¿˜å¯ä»¥åˆ†ä¸ºC1, C2ç­‰ã€‚C1ç¼–è¯‘å¿«ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼›C2ç¼–è¯‘æ…¢ï¼Œæ•ˆç‡é«˜ã€‚å¯ä»¥é€šè¿‡ -XX:+TieredCompilation å¼€å¯åˆ†å±‚ç¼–è¯‘ï¼Œå¯¹çƒ­ç‚¹ä»£ç å…ˆC1ç¼–è¯‘ä»¥å°½å¿«è¿›å…¥åˆ°ç¼–è¯‘æ‰§è¡Œæ¨¡å¼ï¼›éšç€åº”ç”¨ç»§ç»­è¿è¡Œï¼Œæ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„æŒ‡æ ‡åï¼Œå†è¿›è¡ŒC2ç¼–è¯‘ï¼Œä»¥æœŸè·å¾—æœ€å¥½çš„æ‰§è¡Œæ•ˆç‡ã€‚
JITåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šé‡‡ç”¨ä¸€äº›ä¼˜åŒ–æ‰‹æ®µï¼ŒåŒ…æ‹¬ï¼šå…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ã€æ•°ç»„èŒƒå›´æ£€æŸ¥æ¶ˆé™¤ã€æ–¹æ³•å†…è”ã€é€ƒé€¸åˆ†æï¼ˆç›®çš„æ˜¯æ ˆä¸Šåˆ†é…ã€åŒæ­¥æ¶ˆé™¤ã€æ ‡é‡æ›¿æ¢ã€å¾ªç¯å˜å‹ã€çª¥å­”ä¼˜åŒ–ä¸å¯„å­˜å™¨åˆ†é…ï¼‰
1. ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ ä¸åšç‰¹åˆ«è¯´æ˜çš„è¯ï¼Œæˆ‘ä»¬è®²çš„ï¼Œ
ç¼–è¯‘å™¨ï¼šç¨‹åºè¿è¡Œå‰å°†å…¶ç¼–è¯‘æˆæœºå™¨ç çš„ç¨‹åº
è§£é‡Šå™¨ï¼šç¨‹åºè¿ä½œä¸­é€è¡Œè§£é‡Šæºç å¾—åˆ°ç»“æœçš„ç¨‹åº
 ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè§£é‡Šå™¨ä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºï¼Œè¾“å…¥æºç ï¼Œè¾“å‡ºç»“æœï¼Œå¹¶æ²¡æœ‰æ˜¾ç¤ºçš„å°†æºç è½¬æ¢æˆæœºå™¨ç çš„è¿‡ç¨‹ è§£é‡Šå™¨ä¸ JIT  æ— è®ºæ˜¯ç¼–è¯‘å™¨è¿˜æ˜¯è§£é‡Šå™¨ï¼Œä» æºç  åˆ°ç»“æœéƒ½éœ€è¦å°†æºç ç»è¿‡ï¼šè¯æ³•åˆ†æ -&amp;gt; è¯­æ³•åˆ†æ -&amp;gt; è¯­ä¹‰åˆ†æ å¤„ç†ï¼Œ
ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç¼–è¯‘å™¨çš„å¤„ç†æ­¥éª¤çœ‹èµ·æ¥ï¼š
ç¼–è¯‘æµç¨‹ï¼š æºç  [å­—ç¬¦æµ] - è¯æ³•åˆ†æ -&amp;gt; å•è¯ï¼ˆtokenï¼‰æµ - è¯­æ³•åˆ†æ -&amp;gt; è¯­æ³•æ ‘ / æŠ½è±¡è¯­æ³•æ ‘ - è¯­ä¹‰åˆ†æ -&amp;gt; æ ‡æ³¨äº†å±æ€§çš„æŠ½è±¡è¯­æ³•æ ‘ - ä»£ç ç”Ÿæˆ -&amp;gt; ç›®æ ‡ä»£ç  æ‰§è¡Œæµç¨‹ï¼š ç›®æ ‡ä»£ç  - æ“ä½œç³»ç»Ÿ/ç¡¬ä»¶ -&amp;gt; æ‰§è¡Œç»“æœ ç‹­ä¹‰çš„è§£é‡Šå™¨å¤„ç†æ­¥éª¤çœ‹èµ·æ¥ï¼š
è§£é‡Šæ‰§è¡Œæµç¨‹ï¼š æºç  [å­—ç¬¦æµ] - éœ€è¦åšè¯æ³•åˆ†æ+è¯­æ³•åˆ†æ+ç±»å‹æ£€æŸ¥çš„å­—ç¬¦æµè§£é‡Šå™¨ -&amp;gt; æ‰§è¡Œç»“æœ  ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè§£é‡Šå™¨çœŸæ­£çš„è¾“å…¥å¾€å¾€å¹¶ç›´æ¥æ˜¯æºç ï¼Œä½¿ç”¨è§£é‡Šå™¨å®ç°çš„ç¼–ç¨‹è¯­è¨€å®ç°é‡Œï¼Œé€šå¸¸ï¼š</description>
    </item>
    
    <item>
      <title>Linuxé…ç½®gitè´¦å·å¯†ç </title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/linux%E9%85%8D%E7%BD%AEgit%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/linux%E9%85%8D%E7%BD%AEgit%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/</guid>
      <description>Linuxé…ç½®gitè´¦å·å¯†ç 
1. åœ¨~/ä¸‹ï¼Œ touchåˆ›å»ºæ–‡ä»¶ .git-credentials, ç”¨vimç¼–è¾‘æ­¤æ–‡ä»¶ touch .git-credentials vim .git-credentials åœ¨é‡Œé¢æŒ‰â€œiâ€ç„¶åè¾“å…¥ï¼š https://{username}:{password}@github.com æ¯”å¦‚ https://account:password@github.com 2. åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œ git config --global credential.helper store 3. å¯ä»¥çœ‹åˆ°~/.gitconfigæ–‡ä»¶ï¼Œä¼šå¤šäº†ä¸€é¡¹ [credential] helper = store </description>
    </item>
    
    <item>
      <title>LRUå’ŒLFU</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/lru%E5%92%8Clfu/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/lru%E5%92%8Clfu/</guid>
      <description>LRUå’ŒLFUéƒ½æ˜¯å†…å­˜ç®¡ç†çš„é¡µé¢ç½®æ¢ç®—æ³•ã€‚
LRUï¼Œå³ï¼šæœ€è¿‘æœ€å°‘ä½¿ç”¨æ·˜æ±°ç®—æ³•ï¼ˆLeast Recently Usedï¼‰ã€‚LRUæ˜¯æ·˜æ±°æœ€é•¿æ—¶é—´æ²¡æœ‰è¢«ä½¿ç”¨çš„é¡µé¢ã€‚
LFUï¼Œå³ï¼šæœ€ä¸ç»å¸¸ä½¿ç”¨æ·˜æ±°ç®—æ³•ï¼ˆLeast Frequently Usedï¼‰ã€‚LFUæ˜¯æ·˜æ±°ä¸€æ®µæ—¶é—´å†…ï¼Œä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„é¡µé¢ã€‚
æ¡ˆä¾‹ï¼š
å‡è®¾LFUæ–¹æ³•çš„æ—¶æœŸTä¸º10åˆ†é’Ÿï¼Œè®¿é—®å¦‚ä¸‹é¡µé¢æ‰€èŠ±çš„æ—¶é—´æ­£å¥½ä¸º10åˆ†é’Ÿï¼Œå†…å­˜å—å¤§å°ä¸º3ã€‚
è‹¥æ‰€éœ€é¡µé¢é¡ºåºä¾æ¬¡å¦‚ä¸‹ï¼š
2 1 2 1 2 3 4
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&amp;gt;
å½“éœ€è¦ä½¿ç”¨é¡µé¢4æ—¶ï¼Œå†…å­˜å—ä¸­å­˜å‚¨ç€1ã€2ã€3ï¼Œå†…å­˜å—ä¸­æ²¡æœ‰é¡µé¢4ï¼Œå°±ä¼šå‘ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œè€Œä¸”æ­¤æ—¶å†…å­˜å—å·²æ»¡ï¼Œéœ€è¦è¿›è¡Œé¡µé¢ç½®æ¢ã€‚
è‹¥æŒ‰LRUç®—æ³•ï¼Œåº”æ›¿æ¢æ‰é¡µé¢1ã€‚å› ä¸ºé¡µé¢1æ˜¯æœ€é•¿æ—¶é—´æ²¡æœ‰è¢«ä½¿ç”¨çš„äº†ï¼Œé¡µé¢2å’Œ3éƒ½åœ¨å®ƒåé¢è¢«ä½¿ç”¨è¿‡ã€‚
è‹¥æŒ‰LFUç®—æ³•ï¼Œåº”æ¢é¡µé¢3ã€‚å› ä¸ºåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œé¡µé¢1è¢«è®¿é—®äº†2æ¬¡ï¼Œé¡µé¢2è¢«è®¿é—®äº†3æ¬¡ï¼Œè€Œé¡µé¢3åªè¢«è®¿é—®äº†1æ¬¡ï¼Œä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°æœ€å°‘ã€‚
å¯è§LRUå…³é”®æ˜¯çœ‹é¡µé¢æœ€åä¸€æ¬¡è¢«ä½¿ç”¨åˆ°å‘ç”Ÿè°ƒåº¦çš„æ—¶é—´é•¿çŸ­ï¼Œè€ŒLFUå…³é”®æ˜¯çœ‹ä¸€å®šæ—¶é—´æ®µå†…é¡µé¢è¢«ä½¿ç”¨çš„é¢‘ç‡!
å‚è€ƒé“¾æ¥ï¼š LRUå’ŒLFUçš„åŒºåˆ« </description>
    </item>
    
    <item>
      <title>MavenåŸºç¡€</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/maven/maven%E5%9F%BA%E7%A1%80/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/maven/maven%E5%9F%BA%E7%A1%80/</guid>
      <description>1. é—®é¢˜ é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°jarå†²çªï¼Œç„¶åmavenæ ¹æ®è‡ªå·±çš„è§„åˆ™è¿›è¡Œå†²çªè§£å†³ï¼Œå¯¼è‡´é¡¹ç›®åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­æŠ¥é”™ã€‚
1ã€mavenè‡ªåŠ¨è§£å†³ä¾èµ–å†²çªçš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ
2ã€å¦‚ä½•æŸ¥çœ‹å½“å‰é¡¹ç›®çš„mavençš„ä¾èµ–æ ‘ï¼Ÿ
3ã€å¦‚ä½•ä»ä¾èµ–æ ‘ä¸­æ‰¾åˆ°è‡ªå·±é¢„æœŸçš„ç‰ˆæœ¬ï¼Œæ˜¯è¢«é‚£ä¸ªjarç»™è¦†ç›–äº†ï¼Ÿ
4ã€å¦‚ä½•äººå·¥è¿›è¡Œä¾èµ–å†²çªè§£å†³ï¼Œè¾¾åˆ°ä½¿ç”¨ç›®çš„ï¼Ÿ
2. è§£å†³é—®é¢˜ 2.1 mavenè‡ªåŠ¨è§£å†³ä¾èµ–å†²çªçš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ 2.1.1 ç¬¬ä¸€åŸåˆ™ï¼šè·¯å¾„æœ€è¿‘è€…ä¼˜å…ˆ é¡¹ç›®Aæœ‰å¦‚ä¸‹çš„ä¾èµ–å…³ç³»ï¼š
A-&amp;gt;B-&amp;gt;C-&amp;gt;X(1.0)
A-&amp;gt;D-&amp;gt;X(2.0)
åˆ™è¯¥ä¾‹å­ä¸­ï¼ŒXçš„ç‰ˆæœ¬æ˜¯2.0
2.1.2 ç¬¬äºŒåŸåˆ™ï¼šè·¯å¾„ç›¸ç­‰ï¼Œå…ˆå£°æ˜è€…ä¼˜å…ˆ é¡¹ç›®Aæœ‰å¦‚ä¸‹çš„ä¾èµ–å…³ç³»ï¼š
A-&amp;gt;B-&amp;gt;Y(1.0)
A-&amp;gt;C-&amp;gt;Y(2.0)
è‹¥pomæ–‡ä»¶ä¸­Bçš„ä¾èµ–åæ ‡å…ˆäºCè¿›è¡Œå£°æ˜ï¼Œåˆ™æœ€ç»ˆYçš„ç‰ˆæœ¬ä¸º1.0
2.2 å¦‚ä½•æŸ¥çœ‹å½“å‰é¡¹ç›®çš„mavenä¾èµ–æ ‘ï¼Ÿ //è¿›å…¥é¡¹ç›®çš„pom.xmlæ–‡ä»¶çš„ç›®å½•ä¸‹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ //è¿™ä¸ªæ˜¯æ­£å¸¸ä¾èµ–çš„æ ‘ mvn dependency:tree //è¿™ä¸ªå‘½ä»¤æ˜¯æŸ¥çœ‹mavenæ˜¯å¦‚ä½•è§£å†³ä¾èµ–å†²çªçš„ä¾èµ–æ ‘ mvn -Dverbose dependency:tree //å¦‚æœæƒ³å°†ä¾èµ–æ ‘æ‰“å°åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œåˆ™å‘½ä»¤å¦‚ä¸‹ mvn -Dverbose dependency:tree -Doutput=/Users/shangxiaofei/sxfoutput.txt 3. å¦‚ä½•ä»ä¾èµ–æ ‘ä¸­æ‰¾åˆ°è‡ªå·±é¢„æœŸçš„ç‰ˆæœ¬ï¼Œæ˜¯è¢«é‚£ä¸ªjarç»™è¦†ç›–äº†ï¼Ÿ ä¾‹å­ï¼š
é€’å½’ä¾èµ–çš„å…³ç³»åˆ—çš„ç®—æ˜¯æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œæ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œæ ¹æ®ç¼©è¿›å¯ä»¥çœ‹åˆ°ä¾èµ–çš„å…³ç³»ã€‚
æœ€åå†™ç€compileçš„å°±æ˜¯ç¼–è¯‘æˆåŠŸçš„ã€‚
æœ€åå†™ç€omitted for duplicateçš„å°±æ˜¯æœ‰jaråŒ…è¢«é‡å¤ä¾èµ–äº†ï¼Œä½†æ˜¯jaråŒ…çš„ç‰ˆæœ¬æ˜¯ä¸€æ ·çš„ã€‚
æœ€åå†™ç€omitted for conflict with xxxxçš„ï¼Œè¯´æ˜å’Œåˆ«çš„jaråŒ…ç‰ˆæœ¬å†²çªäº†ï¼Œè€Œè¯¥è¡Œçš„jaråŒ…ä¸ä¼šè¢«å¼•å…¥ã€‚æ¯”å¦‚ä¸Šé¢æœ‰ä¸€è¡Œæœ€åå†™ç€omitted for conflict with 3.4.6ï¼Œé‚£ä¹ˆè¯¥è¡Œçš„zookeeper:jar:3.4.8ä¸ä¼šè¢«å¼•å…¥ï¼Œä¼šå¼•å…¥3.4.6ç‰ˆæœ¬
æœ€åå†™ç€version managed from 2.3 ;omitted for duplicate ,è¡¨ç¤ºæœ€ç»ˆä½¿ç”¨commons-pool2æœ€ç»ˆä¼šä½¿ç”¨2.4.2ï¼Œæ‹’ç»ä½¿ç”¨ä¸­å£°æ˜çš„2.3ç‰ˆæœ¬
æœ€åå†™ç€version managed from 1.16.8 ;è¡¨ç¤ºæœ€ç»ˆä½¿ç”¨lombok:jar:1.16.22ç‰ˆæœ¬
4. å¦‚ä½•äººå·¥è¿›è¡Œä¾èµ–å†²çªè§£å†³ï¼Œè¾¾åˆ°ä½¿ç”¨ç›®çš„ï¼Ÿ è§£å†³é‡å¤ä¾èµ–å’Œå†²çªçš„æ–¹æ³•ï¼š</description>
    </item>
    
    <item>
      <title>Merkle Patricia Tree</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/block-chain/merkle-patricia-treempt/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/block-chain/merkle-patricia-treempt/</guid>
      <description>åŒºå—é“¾ä¸€ä¸ªé‡è¦çš„äº®ç‚¹å°±æ˜¯é˜²ç¯¡æ”¹ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆåšåˆ°é˜²ç¯¡æ”¹çš„å‘¢ï¼Ÿå…¶ä¸­ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹å°±æ˜¯Merkle Patricia Tree(MPT)ï¼Œæœ¬ç¯‡å°±æ¥è§£æä¸‹ä½•ä¸ºMPTã€‚
MPTæ˜¯ä¸€ç§åŠ å¯†è®¤è¯çš„æ•°æ®ç»“æ„ï¼Œå®ƒèåˆäº†Merkleæ ‘å’ŒPatricia Trieæ ‘(åŸºæ•°æ ‘/å‹ç¼©å‰ç¼€æ ‘)ä¸¤ç§æ•°æ®ç±»å‹çš„ä¼˜ç‚¹ã€‚
åˆ™åœ¨ä»‹ç»MPTæ ‘ä¹‹å‰å…ˆä»‹ç»ä¸‹Merkleæ ‘(é»˜å…‹å°”æ ‘)ã€Trieæ ‘(å‰ç¼€æ ‘)å’ŒPatricia Trie(åŸºæ•°æ ‘/å‹ç¼©å‰ç¼€æ ‘)ï¼Œä»‹ç»Trieæ ‘æ˜¯å› ä¸ºPatricia Trieæ˜¯åŸºäºTrieæ ‘è¡åŒ–æ¥çš„ã€‚
Trieæ ‘ Trieæ ‘åˆç§°å‰ç¼€æ ‘æˆ–å­—å…¸æ ‘ï¼Œæ˜¯ä¸€ç§æ£€ç´¢æ ‘ï¼Œä½¿ç”¨ä¸€ä¸ªæœ‰åºçš„æ ‘ç»“æ„å­˜å‚¨ä¸€ä¸ªåŠ¨æ€æ•°æ®é›†æˆ–è€…å…³è”æ•°ç»„ï¼Œå…¶ä¸­çš„é”®é€šå¸¸æ˜¯å­—ç¬¦ä¸²ã€‚ä¸äºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒï¼Œé”®ä¸æ˜¯ç›´æ¥ä¿å­˜åœ¨èŠ‚ç‚¹ä¸­ï¼Œè€Œæ˜¯ç”±èŠ‚ç‚¹åœ¨æ ‘ä¸­çš„ä½ç½®å†³å®šã€‚ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­å­™ç›¸å¯¹äºå½“å‰èŠ‚ç‚¹éƒ½æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œè€Œæ ¹èŠ‚ç‚¹ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰å¯¹åº”çš„å€¼ï¼Œåªæœ‰å¶å­èŠ‚ç‚¹å’Œéƒ¨åˆ†å†…éƒ¨èŠ‚ç‚¹æ‰€å¯¹åº”çš„é”®æ‰æœ‰ç›¸å…³çš„å€¼ã€‚
Trieæ ‘ä¸­ï¼Œkeyæ˜¯ä»æ ‘æ ¹åˆ°å¯¹åº”valueå¾—çœŸå®çš„è·¯å¾„ã€‚å³ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œkeyä¸­çš„æ¯ä¸ªå­—ç¬¦ä¼šæ ‡è¯†èµ°é‚£ä¸ªå­èŠ‚ç‚¹ä»è€Œåˆ°è¾¾ç›¸åº”valueã€‚Valueè¢«å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œæ˜¯æ¯æ¡è·¯å¾„çš„ç»ˆæ­¢ã€‚å‡å¦‚keyæ¥è‡ªä¸€ä¸ªåŒ…å«Nä¸ªå­—ç¬¦çš„å­—æ¯è¡¨ï¼Œé‚£ä¹ˆæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯èƒ½ä¼šæœ‰å¤šè¾¾Nä¸ªå­©å­ï¼Œæ ‘çš„æœ€å¤§æ·±åº¦æ˜¯keyçš„æœ€å¤§é•¿åº¦ã€‚çœ‹ä¸ªä¾‹å­ç”»ä¸ªå›¾å°±äº†ç„¶äº†ã€‚ ä¾‹å­ï¼šå…³é”®å­—é›†åˆ{â€œaâ€, â€œtoâ€, â€œteaâ€, â€œtedâ€, â€œiâ€, â€œinâ€, â€œinnâ€}ï¼Œæ­¤é›†åˆè½¬ä¸ºTrieæ ‘ä¸º
Trieæ ‘
ä¸ç†æƒ³æƒ…å†µä¸‹ï¼Œæ•°æ®é›†ä¸­å­˜åœ¨ä¸€ä¸ªå¾ˆé•¿çš„keyï¼Œè€Œè¿™ä¸ªkeyä¸å…¶å®ƒkeyåˆæ²¡æœ‰å¤ªå¤šçš„å…¬å…±å‰ç¼€ï¼Œè¿™å°±é€ æˆæ•´ä¸ªæ ‘çš„æ·±åº¦ä¼šåŠ å¤§ï¼Œéœ€è¦å­˜å‚¨å¤šä¸ªèŠ‚ç‚¹ï¼Œå­˜å‚¨æ¯”è¾ƒç¨€ç–è€Œä¸”æä¸å¹³è¡¡ã€‚ ä¾‹å­ï¼šå…³é”®å­—é›†åˆ{â€œalgoriâ€, â€œtoâ€, â€œteaâ€, â€œtedâ€, â€œiâ€, â€œinâ€, â€œinnâ€}ï¼Œæ­¤é›†åˆè½¬ä¸ºTrieæ ‘ä¸º
ç¨€ç–Trieæ ‘
Patricia Trieæ ‘ æ—¢ç„¶Trieæ ‘åœ¨æŸäº›æƒ…å†µä¸‹å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ï¼Œé‚£å°±ç»™å‹ç¼©ä¸‹ï¼Œç„¶åå°±å‡ºç°äº†Patricia Trieæ ‘ã€‚
Patricia Trieæ ‘æ˜¯ä¸€ç§ç©ºé—´ä½¿ç”¨ç‡ç»è¿‡ä¼˜åŒ–çš„Trieæ ‘ã€‚ä¸Trieæ ‘ä¸åŒçš„æ˜¯ï¼ŒPatricia Trie é‡Œå¦‚æœå­˜åœ¨ä¸€ä¸ªçˆ¶èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªçˆ¶èŠ‚ç‚¹å°†ä¸å…¶å­èŠ‚ç‚¹åˆå¹¶ã€‚è¿™æ ·å‹ç¼©å­˜å‚¨å¯ä»¥å‡å°‘Trieæ ‘ä¸­ä¸å¿…è¦çš„æ·±åº¦ï¼Œå¤§å¤§åŠ å¿«æœç´¢èŠ‚ç‚¹é€Ÿåº¦ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤º
Patricia Trieæ ‘
Merkleæ ‘ Merkleæ ‘æ˜¯ç”±è®¡ç®—æœºç§‘å­¦å®¶Ralph Merkleåœ¨å¾ˆå¤šå¹´å‰æå‡ºçš„ï¼Œå¹¶ä»¥ä»–æœ¬äººçš„åå­—æ¥å‘½åï¼Œæ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå¯ä»¥æ˜¯äºŒå‰æ ‘ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šå‰æ ‘ã€‚ å®ƒç”±è‹¥å¹²å¶èŠ‚ç‚¹ã€ä¸­é—´èŠ‚ç‚¹å’Œä¸€ä¸ªæ ¹èŠ‚ç‚¹æ„æˆã€‚æœ€ä¸‹é¢çš„å¶èŠ‚ç‚¹åŒ…å«åŸºç¡€æ•°æ®ï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹æ˜¯å®ƒå­èŠ‚ç‚¹çš„æ•£åˆ—ï¼Œæ ¹èŠ‚ç‚¹æ˜¯å®ƒçš„å­èŠ‚ç‚¹çš„æ•£åˆ—ï¼Œä»£è¡¨äº†Merkleæ ‘çš„æ ¹éƒ¨ã€‚
ç”±äºMerkleæ ‘æ˜¯è‡ªåº•å‘ä¸Šæ„å»ºçš„ï¼Œè€Œä¸”é™¤å¶å­ç»“ç‚¹ä¹‹å¤–çš„å…¶å®ƒèŠ‚ç‚¹éƒ½æ˜¯å…¶å­èŠ‚ç‚¹çš„æ•£åˆ—ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹çš„å€¼å‘ç”Ÿå˜åŒ–éƒ½ä¼šä¸€å±‚ä¸€å±‚çš„å‘ä¸Šåæ˜ ï¼Œæœ€ç»ˆåœ¨æ ¹èŠ‚ç‚¹ä¸Šè¡¨ç°å‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦å¯¹æ¯”ä¸¤ä¸ªMerkleæ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰å°±èƒ½å¾—åˆ°ä¸¤ä»½æ•°æ®é›†æ˜¯å¦ä¸€æ ·ï¼Œè€Œä¸”è¿˜å¯ä»¥éªŒè¯Merkleæ ‘çš„æŸä¸ªåˆ†æ”¯ã€‚
æ¯”ç‰¹å¸ä½¿ç”¨Merkleæ ‘å­˜å‚¨ä¸€ä¸ªåŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“ä¿¡æ¯ï¼Œä¸€æ˜¯ä¸ºäº†é˜²ç¯¡æ”¹ï¼Œå› ä¸ºæ•£åˆ—æ˜¯å‘ä¸Šçš„ï¼Œä¼ªé€ ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šå¼•èµ·ä¸Šå±‚èŠ‚ç‚¹çš„æ”¹åŠ¨ï¼Œæœ€ç»ˆå¯¼è‡´æ ¹èŠ‚ç‚¹çš„å˜åŒ–ã€‚äºŒæ˜¯ä¸ºäº†å…è®¸åŒºå—çš„æ•°æ®å¯ä»¥é›¶æ•£çš„ä¼ é€ï¼Œå³èŠ‚ç‚¹å¯ä»¥ä»ä¸€ä¸ªèŠ‚ç‚¹ä¸‹è½½åŒºå—å¤´ï¼Œä»å¦å¤–çš„æºä¸‹è½½ä¸å…¶ç›¸å…³çš„æ ‘çš„å…¶ä»–éƒ¨åˆ†ï¼Œè€Œä¾ç„¶èƒ½å¤Ÿç¡®è®¤æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æ­£ç¡®çš„ã€‚
çœ‹ä¸‹å›¾çš„ä¾‹å­ï¼Œé¦–å…ˆå°†L1-L4å››ä¸ªå•å…ƒæ•°æ®æ•£åˆ—åŒ–ï¼Œç„¶åå°†æ•£åˆ—å€¼å­˜å‚¨è‡³ç›¸åº”çš„å¶å­èŠ‚ç‚¹ã€‚è¿™äº›èŠ‚ç‚¹æ˜¯Hash0-0, Hash0-1, Hash1-0, Hash1-1ï¼Œç„¶åå°†ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹çš„æ•£åˆ—å€¼åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åè®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²çš„æ•£åˆ—ï¼Œå¾—åˆ°çš„å°±æ˜¯è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„æ•£åˆ—å€¼ã€‚
Merkleæ ‘
åœ¨æ¯”ç‰¹å¸ç½‘ç»œä¸­ï¼Œmerkleæ ‘è¢«ç”¨æ¥å½’çº³ä¸€ä¸ªåŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“ï¼ŒåŒæ—¶ç”Ÿæˆæ•´ä¸ªäº¤æ˜“é›†åˆçš„æ•°å­—æŒ‡çº¹ã€‚æ­¤å¤–ï¼Œç”±äºmerkleæ ‘çš„å­˜åœ¨ï¼Œä½¿å¾—åœ¨æ¯”ç‰¹å¸è¿™ç§å…¬é“¾çš„åœºæ™¯ä¸‹ï¼Œæ‰©å±•ä¸€ç§â€œè½»èŠ‚ç‚¹â€å®ç°ç®€å•æ”¯ä»˜éªŒè¯å˜æˆå¯èƒ½ã€‚
çŸ¥é“äº†Merkleæ ‘åœ¨æ¯”ç‰¹å¸ä¸­çš„åº”ç”¨ï¼Œé‚£ä¹ˆä»–æ˜¯æ€ä¹ˆæ„æˆå‘¢ï¼Ÿç°åœ¨å°±ç®€å•çœ‹ä¸‹å…¶æ„æˆã€‚å®ƒç”±ä¸€ç»„å¶èŠ‚ç‚¹ã€ä¸€ç»„ä¸­é—´èŠ‚ç‚¹å’Œä¸€ä¸ªæ ¹èŠ‚ç‚¹æ„æˆã€‚æœ€ä¸‹é¢çš„å¶èŠ‚ç‚¹åŒ…å«åŸºç¡€æ•°æ®ï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹æ˜¯å®ƒçš„å­èŠ‚ç‚¹çš„æ•£åˆ—ï¼Œæ ¹èŠ‚ç‚¹æ˜¯å®ƒçš„å­èŠ‚ç‚¹çš„æ•£åˆ—ï¼Œä»£è¡¨äº†Merkleæ ‘çš„æ ¹éƒ¨ ã€‚
Merkleæ ‘å…·æœ‰ä¸‹åˆ—ç‰¹æ€§:
 æ¯ä¸ªæ•°æ®é›†å¯¹åº”ä¸€ä¸ªå”¯ä¸€åˆæ³•çš„æ ¹æ•£åˆ—å€¼ã€‚ å¾ˆå®¹æ˜“æ›´æ–°ã€æ·»åŠ æˆ–è€…åˆ é™¤æ ‘èŠ‚ç‚¹ï¼Œä»¥åŠç”Ÿæˆæ–°çš„æ ¹æ•£åˆ—å€¼ ã€‚ ä¸æ”¹å˜æ ¹æ•£åˆ—å€¼çš„è¯å°±æ²¡æœ‰åŠæ³•ä¿®æ”¹æ ‘çš„ä»»ä½•éƒ¨åˆ†ï¼Œæ‰€ä»¥å¦‚æœæ ¹æ•£åˆ—å€¼è¢«åŒ…æ‹¬åœ¨ç­¾åçš„æ–‡æ¡£æˆ–æœ‰æ•ˆåŒºå—ä¸­ï¼Œå°±å¯ä»¥ä¿è¯è¿™æ£µæ ‘çš„æ­£ç¡®æ€§ã€‚ ä»»ä½•äººå¯ä»¥åªæä¾›ä¸€ä¸ªåˆ°ç‰¹å®šèŠ‚ç‚¹çš„åˆ†æ”¯ï¼Œå¹¶é€šè¿‡å¯†ç å­¦æ–¹æ³•è¯æ˜æ‹¥æœ‰å¯¹åº”å†…å®¹çš„èŠ‚ç‚¹ç¡®å®åœ¨æ ‘é‡Œ ã€‚  Merkle Patricia Tree å¨å¨äº†é‚£ä¹ˆå¤šï¼Œæœ¬ç¯‡çš„ä¸»è§’ç»ˆäºå‡ºæ¥äº†ã€‚ Merkle Patricia Treeç»“åˆäº†Merkleæ ‘å’ŒPatriciaæ ‘çš„ç‰¹ç‚¹ï¼Œå¹¶é’ˆå¯¹ä»¥å¤ªåŠçš„ä½¿ç”¨åœºæ™¯è¿›è¡Œäº†ä¸€äº›æ”¹è¿›ã€‚
é¦–å…ˆï¼Œä¸ºäº†ä¿è¯æ ‘çš„åŠ å¯†å®‰å…¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹é€šè¿‡å®ƒçš„æ•£åˆ—å€¼è¢«å¼•ç”¨ï¼Œåˆ™æ ¹èŠ‚ç‚¹æ˜¯ä¸€å±‚ä¸€å±‚æ•£åˆ—å‘ä¸Šæ”¶æ•›è€Œå¾—ï¼Œè¢«ç§°ä¸ºæ•´æ£µæ ‘çš„åŠ å¯†ç­¾åï¼Œå¦‚æœä¸€æ£µç»™å®š Trieæ ‘çš„æ ¹æ•£åˆ—å€¼æ˜¯å…¬å¼€çš„ï¼Œé‚£ä¹ˆæ‰€æœ‰äººéƒ½å¯ä»¥æä¾›ä¸€ç§è¯æ˜ï¼Œå³é€šè¿‡æä¾›æ¯æ­¥å‘ä¸Šçš„è·¯å¾„è¯æ˜ç‰¹å®šçš„keyæ˜¯å¦å«æœ‰ç‰¹å®šçš„å€¼ã€‚åœ¨å½“å‰çš„ä»¥å¤ªåŠç‰ˆæœ¬ä¸­ï¼ŒMPTå­˜å‚¨åœ¨LevelDBæ•°æ®åº“ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>MongoDBç»¼è¿°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mongodb/mongodb%E7%BB%BC%E8%BF%B0/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mongodb/mongodb%E7%BB%BC%E8%BF%B0/</guid>
      <description>MongoDBç»¼è¿° å‚è€ƒ é¡¹ç›®å®æˆ˜ MongoDBå¿«é€Ÿå…¥é—¨ï¼ŒæŒæ¡è¿™äº›åˆšåˆšå¥½ï¼ mallæ•´åˆMongodbå®ç°æ–‡æ¡£æ“ä½œ </description>
    </item>
    
    <item>
      <title>MQæ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</guid>
      <description>åªæœ‰RocketMQæ”¯æŒäº‹åŠ¡æ¶ˆæ¯ï¼Œå¦‚æœæˆ‘ä»¬çš„MQä¸æ˜¯RocketMQï¼Œå¯ä»¥é‡‡ç”¨æœ¬åœ°æ¶ˆæ¯+MQè¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå¹¶ä¸”æœ¬åœ°æ¶ˆæ¯è¡¨è¿˜å¯ä»¥åšå‡ºç‹¬ç«‹çš„æœåŠ¡ã€‚
éšç€åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„æµè¡Œä¸æ™®åŠï¼ŒåŸæ¥åœ¨å•ä½“åº”ç”¨ä¸­æ‰§è¡Œçš„å¤šä¸ªé€»è¾‘æ“ä½œï¼Œç°åœ¨è¢«æ‹†åˆ†æˆäº†å¤šä¸ªæœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨ã€‚è™½ç„¶æœåŠ¡åŒ–ä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿå¸¦æ¥äº†æ°´å¹³ä¼¸ç¼©çš„èƒ½åŠ›ï¼Œç„¶è€Œéšä¹‹è€Œæ¥æŒ‘æˆ˜å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå¤šä¸ªæœåŠ¡ä¹‹é—´ä½¿ç”¨è‡ªå·±å•ç‹¬ç»´æŠ¤çš„æ•°æ®åº“ï¼Œå®ƒä»¬å½¼æ­¤ä¹‹é—´ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå‡å¦‚Aæ‰§è¡ŒæˆåŠŸäº†ï¼ŒBæ‰§è¡Œå´å¤±è´¥äº†ï¼Œè€ŒAçš„äº‹åŠ¡æ­¤æ—¶å·²ç»æäº¤ï¼Œæ— æ³•å›æ»šï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šå¯¼è‡´ä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´æ€§çš„é—®é¢˜ï¼›å°½ç®¡å¾ˆæ—©ä¹‹å‰å°±æœ‰åŸºäºä¸¤é˜¶æ®µæäº¤çš„XAåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä½†æ˜¯è¿™ç±»æ–¹æ¡ˆå› ä¸ºéœ€è¦èµ„æºçš„å…¨å±€é”å®šï¼Œå¯¼è‡´æ€§èƒ½æå·®ï¼›å› æ­¤åé¢å°±é€æ¸è¡ç”Ÿå‡ºäº†æ¶ˆæ¯æœ€ç»ˆä¸€è‡´æ€§ã€TCCç­‰æŸ”æ€§äº‹åŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œæœ¬æ–‡ä¸»è¦åˆ†æçš„æ˜¯åŸºäºæ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆã€‚
0\. ç®€å•RPCå¤„ç†å­˜åœ¨çš„ä¸€è‡´æ€§é—®é¢˜ åœ¨æ­£å¼å¼€å§‹è®²è¿°æ­£é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ï¼Œä¸ä¾èµ–ä»»ä½•åˆ†å¸ƒå¼äº‹åŠ¡æ‰‹æ®µï¼Œå•çº¯å°†æœ¬åœ°ä¸šåŠ¡é€»è¾‘å’Œè¿œç¨‹è°ƒç”¨é€»è¾‘æ”¾åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚
æˆ‘ä»¬ä»¥è®¢å•åˆ›å»ºä¸ºä¾‹ï¼Œè®¢å•ç³»ç»Ÿå…ˆåˆ›å»ºè®¢å•(æœ¬åœ°äº‹åŠ¡)ï¼Œç„¶åRPCè°ƒç”¨åº“å­˜æ‰£å‡æœåŠ¡ã€‚
@Transactionnal public void processOrder() { try{ // è®¢å•å¤„ç†(ä¸šåŠ¡æ“ä½œ)  orderService.process(); // åº“å­˜æ‰£å‡ï¼ˆRPCè¿œç¨‹è°ƒç”¨ï¼‰  storageService.deduction(); }catch(Exception e){ äº‹åŠ¡å›æ»š; } } å¦‚æœåº“å­˜æœåŠ¡ç”±äºDBæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå¯¼è‡´å¤„ç†è¶…æ—¶ï¼Œè®¢å•æœåŠ¡åœ¨å‡ºç°è¶…æ—¶å¼‚å¸¸åï¼Œç›´æ¥å›æ»šæœ¬åœ°äº‹åŠ¡ï¼Œä»è€Œå¯¼è‡´è®¢å•æœåŠ¡è¿™è¾¹æ²¡æ•°æ®ï¼Œè€Œåº“å­˜æœåŠ¡é‚£è¾¹æ•°æ®å´å·²ç»å†™å…¥äº†ï¼Œæœ€ç»ˆå¯¼è‡´ä¸¤è¾¹ä¸šåŠ¡æ•°æ®çš„ä¸ä¸€è‡´ã€‚
å³ä½¿ä¸å­˜åœ¨ â€œDBæ•°æ®é‡æ¯”è¾ƒå¤§â€ è¿™ç§ç‰¹æ®Šæƒ…å†µï¼Œä¹Ÿä¸€å®šä¼šå­˜åœ¨å› ä¸ºç½‘ç»œæŠ–åŠ¨ï¼Œè®¢å•æœåŠ¡è°ƒç”¨åº“å­˜æœåŠ¡è¶…æ—¶è€Œæœ¬åœ°å›æ»šï¼Œä½†æ˜¯åº“å­˜æœåŠ¡å®é™…æ“ä½œæˆåŠŸçš„æƒ…å†µã€‚
å…¶æ ¹æœ¬çš„åŸå› å°±åœ¨äºï¼šè¿œç¨‹è°ƒç”¨ï¼Œç»“æœæœ€ç»ˆå¯èƒ½ä¸ºæˆåŠŸã€å¤±è´¥ã€è¶…æ—¶ï¼›è€Œå¯¹äºè¶…æ—¶çš„æƒ…å†µï¼Œå¤„ç†æ–¹æœ€ç»ˆçš„ç»“æœå¯èƒ½æ˜¯æˆåŠŸï¼Œä¹Ÿå¯èƒ½æ˜¯å¤±è´¥ï¼Œè°ƒç”¨æ–¹æ˜¯æ— æ³•çŸ¥æ™“çš„ã€‚
1\. æ™®é€šæ¶ˆæ¯çš„å¤„ç†æµç¨‹  æ¶ˆæ¯ç”Ÿæˆè€…å‘é€æ¶ˆæ¯ MQæ”¶åˆ°æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–ï¼Œåœ¨å­˜å‚¨ä¸­æ–°å¢ä¸€æ¡è®°å½• è¿”å›ACKç»™ç”Ÿäº§è€… MQ push æ¶ˆæ¯ç»™å¯¹åº”çš„æ¶ˆè´¹è€…ï¼Œç„¶åç­‰å¾…æ¶ˆè´¹è€…è¿”å›ACK å¦‚æœæ¶ˆæ¯æ¶ˆè´¹è€…åœ¨æŒ‡å®šæ—¶é—´å†…æˆåŠŸè¿”å›ackï¼Œé‚£ä¹ˆMQè®¤ä¸ºæ¶ˆæ¯æ¶ˆè´¹æˆåŠŸï¼Œåœ¨å­˜å‚¨ä¸­åˆ é™¤æ¶ˆæ¯ï¼Œå³æ‰§è¡Œç¬¬6æ­¥ï¼›å¦‚æœMQåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ACKï¼Œåˆ™è®¤ä¸ºæ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œä¼šå°è¯•é‡æ–°pushæ¶ˆæ¯,é‡å¤æ‰§è¡Œ4ã€5ã€6æ­¥éª¤ MQåˆ é™¤æ¶ˆæ¯  1.2 æ™®é€šæ¶ˆæ¯å¤„ç†å­˜åœ¨çš„ä¸€è‡´æ€§é—®é¢˜ æˆ‘ä»¬è¿˜æ˜¯ä»¥è®¢å•åˆ›å»ºä¸ºä¾‹ï¼Œè®¢å•ç³»ç»Ÿå…ˆåˆ›å»ºè®¢å•(æœ¬åœ°äº‹åŠ¡)ï¼Œå†å‘é€æ¶ˆæ¯ç»™ä¸‹æ¸¸å¤„ç†ï¼›å¦‚æœè®¢å•åˆ›å»ºæˆåŠŸï¼Œç„¶è€Œæ¶ˆæ¯æ²¡æœ‰å‘é€å‡ºå»ï¼Œé‚£ä¹ˆä¸‹æ¸¸æ‰€æœ‰ç³»ç»Ÿéƒ½æ— æ³•æ„ŸçŸ¥åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œä¼šå‡ºç°è„æ•°æ®ï¼›
public void processOrder() { // è®¢å•å¤„ç†(ä¸šåŠ¡æ“ä½œ)  orderService.process(); // å‘é€è®¢å•å¤„ç†æˆåŠŸæ¶ˆæ¯(å‘é€æ¶ˆæ¯)  sendBizMsg (); } å¦‚æœå…ˆå‘é€è®¢å•æ¶ˆæ¯ï¼Œå†åˆ›å»ºè®¢å•ï¼›é‚£ä¹ˆå°±æœ‰å¯èƒ½æ¶ˆæ¯å‘é€æˆåŠŸï¼Œä½†æ˜¯åœ¨è®¢å•åˆ›å»ºçš„æ—¶å€™å´å¤±è´¥äº†ï¼Œæ­¤æ—¶ä¸‹æ¸¸ç³»ç»Ÿå´è®¤ä¸ºè¿™ä¸ªè®¢å•å·²ç»åˆ›å»ºï¼Œä¹Ÿä¼šå‡ºç°è„æ•°æ®ã€‚
public void processOrder() { // å‘é€è®¢å•å¤„ç†æˆåŠŸæ¶ˆæ¯(å‘é€æ¶ˆæ¯)  sendBizMsg (); // è®¢å•å¤„ç†(ä¸šåŠ¡æ“ä½œ)  orderService.</description>
    </item>
    
    <item>
      <title>MQç»¼è¿°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E7%BB%BC%E8%BF%B0/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mq/mq%E7%BB%BC%E8%BF%B0/</guid>
      <description>1. æ¦‚å¿µ  Broker Producer Consumer Topic Queue Message  2. æ¨¡å¼ 2.1. ç‚¹å¯¹ç‚¹ PTP ç‚¹å¯¹ç‚¹: ä½¿ç”¨ Queue ä½œä¸ºé€šä¿¡è½½ä½“
æ¶ˆæ¯ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯å‘é€åˆ° Queue ä¸­ï¼Œç„¶åæ¶ˆæ¯æ¶ˆè´¹è€…ä» Queue ä¸­å–å‡ºå¹¶ä¸”æ¶ˆè´¹æ¶ˆæ¯ã€‚æ¶ˆæ¯è¢«æ¶ˆè´¹ä»¥åï¼ŒQueue ä¸­ä¸å†å­˜å‚¨ï¼Œæ‰€ä»¥æ¶ˆæ¯æ¶ˆè´¹è€…ä¸å¯èƒ½æ¶ˆè´¹åˆ°å·²ç»è¢«æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚Queue æ”¯æŒå­˜åœ¨å¤šä¸ªæ¶ˆè´¹è€…ï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæ¶ˆæ¯è€Œè¨€ï¼Œåªä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹
2.2. å‘å¸ƒ/è®¢é˜… Pub/Sub å‘å¸ƒè®¢é˜…(å¹¿æ’­): ä½¿ç”¨ Topic ä½œä¸ºé€šä¿¡è½½ä½“
æ¶ˆæ¯ç”Ÿäº§è€…(å‘å¸ƒ)å°†æ¶ˆæ¯å‘å¸ƒåˆ° Topic ä¸­ï¼ŒåŒæ—¶æœ‰å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…(è®¢é˜…)æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚å’Œç‚¹å¯¹ç‚¹æ–¹å¼ä¸åŒï¼Œå‘å¸ƒåˆ° Topic çš„æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰è®¢é˜…è€…æ¶ˆè´¹
æ€»ç»“ Queue å®ç°äº†è´Ÿè½½å‡è¡¡ï¼Œå°† Producer ç”Ÿäº§çš„æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”±å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚ä½†ä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¥å—ï¼Œå½“æ²¡æœ‰æ¶ˆè´¹è€…å¯ç”¨æ—¶ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¼šè¢«ä¿å­˜ç›´åˆ°æœ‰ä¸€ä¸ªå¯ç”¨çš„æ¶ˆè´¹è€…
Topic å®ç°äº†å‘å¸ƒå’Œè®¢é˜…ï¼Œå½“ä½ å‘å¸ƒä¸€ä¸ªæ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…è¿™ä¸ª Topic çš„æœåŠ¡éƒ½èƒ½å¾—åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œæ‰€ä»¥ä»1åˆ°Nä¸ªè®¢é˜…è€…éƒ½èƒ½å¾—åˆ°ä¸€ä¸ªæ¶ˆæ¯çš„æ‹·è´
3. åè®® 3.1. AMQPåè®® AMQP å³ Advanced Message Queuing Protocol ï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ï¼Œä¸åŒå¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚å…¼å®¹ JMSã€‚RabbitMQ å°±æ˜¯åŸºäº AMQP åè®®å®ç°çš„ã€‚
ä¼˜ç‚¹ï¼šå¯é ã€é€šç”¨
 JMSï¼ˆJAVA Message Service,java æ¶ˆæ¯æœåŠ¡ï¼‰æ˜¯ java çš„æ¶ˆæ¯æœåŠ¡ï¼ŒJMS çš„å®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥é€šè¿‡ JMS æœåŠ¡è¿›è¡Œå¼‚æ­¥çš„æ¶ˆæ¯ä¼ è¾“ã€‚JMSï¼ˆJAVA Message Serviceï¼ŒJava æ¶ˆæ¯æœåŠ¡ï¼‰API æ˜¯ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡çš„æ ‡å‡†æˆ–è€…è¯´æ˜¯è§„èŒƒï¼Œå…è®¸åº”ç”¨ç¨‹åºç»„ä»¶åŸºäº JavaEE å¹³å°åˆ›å»ºã€å‘é€ã€æ¥æ”¶å’Œè¯»å–æ¶ˆæ¯ã€‚å®ƒä½¿åˆ†å¸ƒå¼é€šä¿¡è€¦åˆåº¦æ›´ä½ï¼Œæ¶ˆæ¯æœåŠ¡æ›´åŠ å¯é ä»¥åŠå¼‚æ­¥æ€§ã€‚</description>
    </item>
    
    <item>
      <title>MySQL Integerç±»å‹ä¸INT(11)</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql-integer%E7%B1%BB%E5%9E%8B%E4%B8%8Eint11/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql-integer%E7%B1%BB%E5%9E%8B%E4%B8%8Eint11/</guid>
      <description>1.ä»‹ç» Integerç±»å‹ï¼Œå³æ•´æ•°ç±»å‹ï¼ŒMySQLæ”¯æŒçš„æ•´æ•°ç±»å‹æœ‰TINYINTã€SMALLINTã€MEDIUMINTã€INTã€BIGINTã€‚
1.1 ç©ºé—´å’ŒèŒƒå›´ æ¯ç§æ•´æ•°ç±»å‹æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å’ŒèŒƒå›´å¦‚ä¸‹ï¼š
   ç±»å‹ å­—èŠ‚ æœ€å°å€¼(æœ‰ç¬¦å·) æœ€å¤§å€¼(æœ‰ç¬¦å·) æœ€å°å€¼(æ— ç¬¦å·) æœ€å¤§å€¼(æ— ç¬¦å·)     TINYINT 1 -128 127 0 255   SMALLINT 2 -32768 32767 0 65535   MEDIUMINT 3 -8388608 8388607 0 16777215   INT 4 -2147483648 2147483647 0 4294967295   BIGINT 8 $-2^{63}$(-9223372036854775808) $2^{63}-1$(9223372036854775807) 0 $2^{64}-1$(18446744073709551615)    2. INT(11) 2.1 æ•°å­—æ˜¯å¦é™åˆ¶é•¿åº¦ï¼Ÿ id INT(11) NOT NULL AUTO_INCREMENT, åœ¨ä¸€äº›å»ºè¡¨è¯­å¥ä¼šå‡ºç°ä¸Šé¢ int(11) çš„ç±»å‹ï¼Œé‚£ä¹ˆå…¶ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</description>
    </item>
    
    <item>
      <title>MySQLå‰ç¼€ç´¢å¼•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95/</guid>
      <description>å‚è€ƒ MySQL å‰ç¼€ç´¢å¼• å‰ç¼€ç´¢å¼•ï¼Œä¸€ç§ä¼˜åŒ–ç´¢å¼•å¤§å°çš„è§£å†³æ–¹æ¡ˆ </description>
    </item>
    
    <item>
      <title>MySQLæ—¥å¿—</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E6%97%A5%E5%BF%97/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E6%97%A5%E5%BF%97/</guid>
      <description>æ—¥å¿—æ˜¯mysqlæ•°æ®åº“çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè®°å½•ç€æ•°æ®åº“è¿è¡ŒæœŸé—´å„ç§çŠ¶æ€ä¿¡æ¯ã€‚mysqlæ—¥å¿—ä¸»è¦åŒ…æ‹¬é”™è¯¯æ—¥å¿—ã€æŸ¥è¯¢æ—¥å¿—ã€æ…¢æŸ¥è¯¢æ—¥å¿—ã€äº‹åŠ¡æ—¥å¿—ã€äºŒè¿›åˆ¶æ—¥å¿—å‡ å¤§ç±»ã€‚ä½œä¸ºå¼€å‘ï¼Œæˆ‘ä»¬é‡ç‚¹éœ€è¦å…³æ³¨çš„æ˜¯äºŒè¿›åˆ¶æ—¥å¿—(binlog)å’Œäº‹åŠ¡æ—¥å¿—(åŒ…æ‹¬redo logå’Œundo log)ï¼Œæœ¬æ–‡æ¥ä¸‹æ¥ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸‰ç§æ—¥å¿—ã€‚å…¶ä»–å‡ ç§æ—¥å¿—è§ ğŸ‘‰ [ç©è½¬MySQLä¹‹å…«]MySQLæ—¥å¿—åˆ†ç±»åŠç®€ä»‹ 1. binlog binlogç”¨äºè®°å½•æ•°æ®åº“æ‰§è¡Œçš„å†™å…¥æ€§æ“ä½œ(ä¸åŒ…æ‹¬æŸ¥è¯¢)ä¿¡æ¯ï¼Œä»¥äºŒè¿›åˆ¶çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸­ã€‚binlogæ˜¯mysqlçš„é€»è¾‘æ—¥å¿—ï¼Œå¹¶ä¸”ç”±Serverå±‚è¿›è¡Œè®°å½•ï¼Œä½¿ç”¨ä»»ä½•å­˜å‚¨å¼•æ“çš„mysqlæ•°æ®åº“éƒ½ä¼šè®°å½•binlogæ—¥å¿—ã€‚
 é€»è¾‘æ—¥å¿—ï¼šå¯ä»¥ç®€å•ç†è§£ä¸ºè®°å½•çš„å°±æ˜¯sqlè¯­å¥ã€‚
  ç‰©ç†æ—¥å¿—ï¼šå› ä¸ºmysqlæ•°æ®æœ€ç»ˆæ˜¯ä¿å­˜åœ¨æ•°æ®é¡µä¸­çš„ï¼Œç‰©ç†æ—¥å¿—è®°å½•çš„å°±æ˜¯æ•°æ®é¡µå˜æ›´ã€‚
 binlogæ˜¯é€šè¿‡è¿½åŠ çš„æ–¹å¼è¿›è¡Œå†™å…¥çš„ï¼Œå¯ä»¥é€šè¿‡max_binlog_sizeå‚æ•°è®¾ç½®æ¯ä¸ªbinlogæ–‡ä»¶çš„å¤§å°ï¼Œå½“æ–‡ä»¶å¤§å°è¾¾åˆ°ç»™å®šå€¼ä¹‹åï¼Œä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶æ¥ä¿å­˜æ—¥å¿—ã€‚
1.1 binlogä½¿ç”¨åœºæ™¯ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œbinlogçš„ä¸»è¦ä½¿ç”¨åœºæ™¯æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ã€‚
 ä¸»ä»å¤åˆ¶ï¼šåœ¨Masterç«¯å¼€å¯binlogï¼Œç„¶åå°†binlogå‘é€åˆ°å„ä¸ªSlaveç«¯ï¼ŒSlaveç«¯é‡æ”¾binlogä»è€Œè¾¾åˆ°ä¸»ä»æ•°æ®ä¸€è‡´ã€‚ æ•°æ®æ¢å¤ï¼šé€šè¿‡ä½¿ç”¨mysqlbinlogå·¥å…·æ¥æ¢å¤æ•°æ®ã€‚  1.2 binlogåˆ·ç›˜æ—¶æœº å¯¹äºInnoDBå­˜å‚¨å¼•æ“è€Œè¨€ï¼Œåªæœ‰åœ¨äº‹åŠ¡æäº¤æ—¶æ‰ä¼šè®°å½•biglogï¼Œæ­¤æ—¶è®°å½•è¿˜åœ¨å†…å­˜ä¸­ï¼Œé‚£ä¹ˆbiglogæ˜¯ä»€ä¹ˆæ—¶å€™åˆ·åˆ°ç£ç›˜ä¸­çš„å‘¢ï¼Ÿmysqlé€šè¿‡sync_binlogå‚æ•°æ§åˆ¶biglogçš„åˆ·ç›˜æ—¶æœºï¼Œå–å€¼èŒƒå›´æ˜¯0-Nï¼š
 0ï¼šä¸å»å¼ºåˆ¶è¦æ±‚ï¼Œç”±ç³»ç»Ÿè‡ªè¡Œåˆ¤æ–­ä½•æ—¶å†™å…¥ç£ç›˜ï¼› 1ï¼šæ¯æ¬¡commitçš„æ—¶å€™éƒ½è¦å°†binlogå†™å…¥ç£ç›˜ï¼› Nï¼šæ¯Nä¸ªäº‹åŠ¡ï¼Œæ‰ä¼šå°†binlogå†™å…¥ç£ç›˜ã€‚  ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œsync_binlogæœ€å®‰å…¨çš„æ˜¯è®¾ç½®æ˜¯1ï¼Œè¿™ä¹Ÿæ˜¯MySQL 5.7.7ä¹‹åç‰ˆæœ¬çš„é»˜è®¤å€¼ã€‚ä½†æ˜¯è®¾ç½®ä¸€ä¸ªå¤§ä¸€äº›çš„å€¼å¯ä»¥æå‡æ•°æ®åº“æ€§èƒ½ï¼Œå› æ­¤å®é™…æƒ…å†µä¸‹ä¹Ÿå¯ä»¥å°†å€¼é€‚å½“è°ƒå¤§ï¼Œç‰ºç‰²ä¸€å®šçš„ä¸€è‡´æ€§æ¥è·å–æ›´å¥½çš„æ€§èƒ½ã€‚
1.3 binlogæ—¥å¿—æ ¼å¼ binlogæ—¥å¿—æœ‰ä¸‰ç§æ ¼å¼ï¼Œåˆ†åˆ«ä¸ºSTATMENTã€ROWå’ŒMIXEDã€‚
 åœ¨ MySQL 5.7.7ä¹‹å‰ï¼Œé»˜è®¤çš„æ ¼å¼æ˜¯STATEMENTï¼ŒMySQL 5.7.7ä¹‹åï¼Œé»˜è®¤å€¼æ˜¯ROWã€‚æ—¥å¿—æ ¼å¼é€šè¿‡binlog-formatæŒ‡å®šã€‚
  STATMENT åŸºäºSQLè¯­å¥çš„å¤åˆ¶(statement-based replication, SBR)ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ä¼šè®°å½•åˆ°binlogä¸­ã€‚ ä¼˜ç‚¹ï¼šä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº†binlogæ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº†IO, ä»è€Œæé«˜äº†æ€§èƒ½ï¼› ç¼ºç‚¹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼Œæ¯”å¦‚æ‰§è¡Œsysdate()ã€slepp()ç­‰ã€‚ ROW åŸºäºè¡Œçš„å¤åˆ¶(row-based replication, RBR)ï¼Œä¸è®°å½•æ¯æ¡sqlè¯­å¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»…éœ€è®°å½•å“ªæ¡æ•°æ®è¢«ä¿®æ”¹äº†ã€‚ ä¼˜ç‚¹ï¼šä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹çš„å­˜å‚¨è¿‡ç¨‹ã€æˆ–functionã€æˆ–triggerçš„è°ƒç”¨å’Œè§¦å‘æ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ï¼› ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯alter tableçš„æ—¶å€™ä¼šè®©æ—¥å¿—æš´æ¶¨ MIXED åŸºäºSTATMENTå’ŒROWä¸¤ç§æ¨¡å¼çš„æ··åˆå¤åˆ¶(mixed-based replication, MBR)ï¼Œä¸€èˆ¬çš„å¤åˆ¶ä½¿ç”¨STATEMENTæ¨¡å¼ä¿å­˜binlogï¼Œå¯¹äºSTATEMENTæ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ROWæ¨¡å¼ä¿å­˜binlog  2. redo log 2.1 ä¸ºä»€ä¹ˆéœ€è¦redo log æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œäº‹åŠ¡çš„å››å¤§ç‰¹æ€§é‡Œé¢æœ‰ä¸€ä¸ªæ˜¯ æŒä¹…æ€§ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯åªè¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“åšçš„ä¿®æ”¹å°±è¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥äº†ï¼Œä¸å¯èƒ½å› ä¸ºä»»ä½•åŸå› å†å›åˆ°åŸæ¥çš„çŠ¶æ€ã€‚é‚£ä¹ˆmysqlæ˜¯å¦‚ä½•ä¿è¯æŒä¹…æ€§çš„å‘¢ï¼Ÿæœ€ç®€å•çš„åšæ³•æ˜¯åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå°†è¯¥äº‹åŠ¡æ¶‰åŠä¿®æ”¹çš„æ•°æ®é¡µå…¨éƒ¨åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯è¿™ä¹ˆåšä¼šæœ‰ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š
 å› ä¸ºInnodbæ˜¯ä»¥é¡µä¸ºå•ä½è¿›è¡Œç£ç›˜äº¤äº’çš„ï¼Œè€Œä¸€ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½åªä¿®æ”¹ä¸€ä¸ªæ•°æ®é¡µé‡Œé¢çš„å‡ ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªæ—¶å€™å°†å®Œæ•´çš„æ•°æ®é¡µåˆ·åˆ°ç£ç›˜çš„è¯ï¼Œå¤ªæµªè´¹èµ„æºäº†ï¼ ä¸€ä¸ªäº‹åŠ¡å¯èƒ½æ¶‰åŠä¿®æ”¹å¤šä¸ªæ•°æ®é¡µï¼Œå¹¶ä¸”è¿™äº›æ•°æ®é¡µåœ¨ç‰©ç†ä¸Šå¹¶ä¸è¿ç»­ï¼Œä½¿ç”¨éšæœºIOå†™å…¥æ€§èƒ½å¤ªå·®ï¼  å› æ­¤mysqlè®¾è®¡äº†redo logï¼Œå…·ä½“æ¥è¯´å°±æ˜¯åªè®°å½•äº‹åŠ¡å¯¹æ•°æ®é¡µåšäº†å“ªäº›ä¿®æ”¹ï¼Œè¿™æ ·å°±èƒ½å®Œç¾åœ°è§£å†³æ€§èƒ½é—®é¢˜äº†(ç›¸å¯¹è€Œè¨€æ–‡ä»¶æ›´å°å¹¶ä¸”æ˜¯é¡ºåºIO)ã€‚MySQLå®æˆ˜45è®² ä¸­å°†redo logæ¯”ä½œä¸´æ—¶è®°è´¦çš„ç²‰æ¿ï¼Œå®é™…æ•°æ®é¡µæ¯”ä½œè´¦æœ¬ã€‚</description>
    </item>
    
    <item>
      <title>MySQLç´¢å¼•çš„å·¥ä½œåŸç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E7%B4%A2%E5%BC%95%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/mysql%E7%B4%A2%E5%BC%95%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</guid>
      <description>ç´¢å¼•æ˜¯ä¸€ç§åŠ å¿«æŸ¥è¯¢çš„æ•°æ®ç»“æ„ï¼Œåœ¨ MySQL ä¸­ï¼Œç´¢å¼•çš„æ•°æ®ç»“æ„é€‰æ‹©çš„æ˜¯ B+Treeï¼Œè‡³äº B+Tree æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ MySQL ä¸ºä»€ä¹ˆé€‰æ‹© B+Tree æ¥ä½œä¸ºç´¢å¼•ï¼Œå¯ä»¥å»æŸ¥çœ‹å…¬ä¼—å·çš„å‰ä¸‰ç¯‡æ–‡ç« ã€‚
  ç´¢å¼•æ•°æ®ç»“æ„ä¹‹ B-Tree ä¸ B+Treeï¼ˆä¸Šç¯‡ï¼‰   ç´¢å¼•æ•°æ®ç»“æ„ä¹‹ B-Tree ä¸ B+Treeï¼ˆä¸‹ç¯‡ï¼‰   MySQL ä¸ºä»€ä¹ˆä¸ç”¨æ•°ç»„ã€å“ˆå¸Œè¡¨ã€äºŒå‰æ ‘ç­‰æ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•å‘¢   ä»Šå¤©ä¸»è¦æ¥èŠèŠ MySQL ä¸­ç´¢å¼•çš„å·¥ä½œåŸç†ï¼Œè¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œåœ¨å·¥ä½œä¸­ç»å¸¸è¢«ä½¿ç”¨åˆ°ï¼Œåœ¨é¢è¯•ä¸­ä¹Ÿå‡ ä¹æ˜¯å¿…é—®çš„ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯é¢è¯•é€ ç«ç®­ï¼Œè¿˜æ˜¯å·¥ä½œæ‹§èºä¸ï¼ŒæŒæ¡ç´¢å¼•çš„å·¥ä½œåŸç†ï¼Œéƒ½æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚
é¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ¬æ–‡çš„æ‰€æœ‰è®¨è®ºå‡æ˜¯åŸºäº InnoDB å­˜å‚¨å¼•æ“ä¸ºå‰æã€‚
ç¤ºä¾‹è¡¨ ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç¤ºä¾‹è¡¨ã€‚å»ºè¡¨è¯­å¥å¦‚ä¸‹
CREATE TABLE user ( `id` BIGINT ( 11 ) NOT NULL AUTO_INCREMENT, `name` VARCHAR ( 64 ) COMMENT &amp;#39;å§“å&amp;#39;, `age` INT ( 4 ) COMMENT &amp;#39;å¹´é¾„&amp;#39;, PRIMARY KEY ( `id` ), INDEX ( NAME ) ) ENGINE = INNODB COMMENT &amp;#39;ç”¨æˆ·è¡¨&amp;#39;; INSERT INTO `user` ( `name`, `age` ) VALUES ( &amp;#39;AA&amp;#39;, 30 ),( &amp;#39;BB&amp;#39;, 33 ),( &amp;#39;CC&amp;#39;, 31 ),( &amp;#39;DD&amp;#39;, 30 ),( &amp;#39;EE&amp;#39;, 29 ) åœ¨ä¸Šé¢çš„ SQL è¯­å¥ä¸­ï¼Œåˆ›å»ºäº†ä¸€å¼  user è¡¨ï¼Œè¡¨ä¸­æœ‰ä¸‰ä¸ªå­—æ®µï¼Œid æ˜¯ä¸»é”®ï¼Œname å’Œ age åˆ†åˆ«è¡¨ç¤ºç”¨æˆ·çš„å§“åå’Œå¹´é¾„ï¼ŒåŒæ—¶è¿˜ä¸ºå­—æ®µ name åˆ›å»ºäº†ä¸€ä¸ªæ™®é€šç´¢å¼•ã€‚ä¸ºäº†æ–¹ä¾¿åé¢æè¿°ï¼Œå› æ­¤è¿˜å‘è¡¨ä¸­æ’å…¥äº† 5 æ¡æ•°æ®ï¼Œç”±äºä¸»é”® id æ˜¯è‡ªå¢çš„ï¼Œæ‰€ä»¥è¿™äº”è¡Œæ•°æ®çš„ id å€¼åˆ†ä¸ºæ˜¯ 1~5ã€‚</description>
    </item>
    
    <item>
      <title>navicatè¿œç¨‹è¿æ¥mysqlï¼Œ2003 can&#39;t connect to mysql server on 10038</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/navicat%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5mysql2003-can_t-connect-to-mysql-serve/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/navicat%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5mysql2003-can_t-connect-to-mysql-serve/</guid>
      <description>navicatè¿œç¨‹è¿æ¥mysqlï¼Œ2003 can&amp;rsquo;t connect to mysql server on 10038
é¦–å…ˆæˆ‘ä»¬é€šè¿‡
â‘ ï¼šnetstat -an|grep 3306
æ¥æŸ¥çœ‹mysqlé»˜è®¤çš„ç«¯å£3306æ˜¯å¦å¼€å¯ï¼Œå…è®¸å“ªä¸ªipä½¿ç”¨ï¼Œå¦‚æœä½ å‘ç°ï¼Œå‰é¢æœ‰127.0.0.1ï¼Œå°±è¯´æ˜ï¼Œ3306ç«¯å£åªèƒ½æœ¬æœºipä½¿ç”¨
æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦
â‘¡ï¼šæ‰“å¼€mysqlé…ç½®æ–‡ä»¶vi /etc/mysql/mysql.conf.d/mysqld.cnf
å°†bind-address = 127.0.0.1æ³¨é”€
â‘¢ï¼šè¿›å…¥mysqlï¼Œå¯¹è¿œç¨‹ç”¨æˆ·è¿›è¡Œæˆæƒï¼Œ
grant all privileges on . to &amp;lsquo;root&amp;rsquo;@&#39;%&#39; identified by &amp;lsquo;xxxxxx&amp;rsquo;;
è¿™é‡Œçš„root æ˜¯ä½ è¿œç¨‹ç™»å½•çš„ç”¨æˆ·ï¼Œxxxxxxæ˜¯ä½ ç™»å½•ä½¿ç”¨çš„å¯†ç ï¼Œç„¶åå¯ä»¥åœ¨mysqlæ•°æ® è¡¨ä¸­æŸ¥çœ‹åˆ°ä½ è¿™ä¸ªç”¨æˆ·å·²ç»è¢«æ·»åŠ åˆ°userè¡¨ä¸­
â‘£ï¼šservice mysql restart</description>
    </item>
    
    <item>
      <title>net::ERR_CONTENT_LENGTH_MISMATCH 200 (OK)</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/net__err_content_length_mismatch-200-ok/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/net__err_content_length_mismatch-200-ok/</guid>
      <description>net::ERR_CONTENT_LENGTH_MISMATCH 200 (OK)
åŠ è½½é™æ€èµ„æºæ—¶æŠ¥é”™ï¼šnet::ERR_CONTENT_LENGTH_MISMATCH 200 (OK)
è§£å†³åŠæ³•ï¼šè°ƒæ•´ç¼“å†²åŒºå¤§å° proxy_buffer_size 64k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k;
server { listen 80; server_name tkaid.com www.tkaid.com; location / { proxy_buffer_size 64k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_pass http://k8s_tkb-web-svc; } } å¦‚æœä»ç„¶æŠ¥è¿™ä¸ªé”™ï¼Œå¯ä»¥å†å°†å€¼è®¾ç½®å¾—å¤§ä¸€ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title>nginx è®¿é—® .phpæ–‡ä»¶å˜æˆä¸‹è½½(chrome) æˆ–è€…ç›´æ¥æ˜¾ç¤ºæºç (edge)</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/nginx-%E8%AE%BF%E9%97%AE-.php%E6%96%87%E4%BB%B6%E5%8F%98%E6%88%90%E4%B8%8B%E8%BD%BDchrome-%E6%88%96%E8%80%85%E7%9B%B4%E6%8E%A5%E6%98%BE%E7%A4%BA%E6%BA%90%E7%A0%81edge/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/nginx-%E8%AE%BF%E9%97%AE-.php%E6%96%87%E4%BB%B6%E5%8F%98%E6%88%90%E4%B8%8B%E8%BD%BDchrome-%E6%88%96%E8%80%85%E7%9B%B4%E6%8E%A5%E6%98%BE%E7%A4%BA%E6%BA%90%E7%A0%81edge/</guid>
      <description>nginx è®¿é—® .phpæ–‡ä»¶å˜æˆä¸‹è½½(chrome) æˆ–è€…ç›´æ¥æ˜¾ç¤ºæºç (edge)
åŸå› ï¼šè¿™æ˜¯å› ä¸ºnginxæ²¡æœ‰è®¾ç½®å¥½ç¢°åˆ°phpæ–‡ä»¶æ—¶ï¼Œè¦ä¼ é€’åˆ°åæ–¹çš„phpè§£é‡Šå™¨ã€‚
éœ€è¦åœ¨nginx.confçš„server{}æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
location ~ [^/]\.php(/|$) { #fastcgi_pass remote_php_ip:9000; fastcgi_pass unix:/dev/shm/php-cgi.sock; fastcgi_index index.php; include fastcgi.conf; } </description>
    </item>
    
    <item>
      <title>nginxåå‘ä»£ç†kibanaæŠ¥ï¼šKibana did not load properly.Check the server output for more information.</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86kibana%E6%8A%A5kibana-did-not-load-properly.chec/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86kibana%E6%8A%A5kibana-did-not-load-properly.chec/</guid>
      <description>nginxåå‘ä»£ç†kibanaæŠ¥ï¼šKibana did not load properly.Check the server output for more information.
å¦‚é¢˜æ‰€è¿°ï¼Œç›´æ¥è®¿é—®5601ç«¯å£ä¸ä¼šæŠ¥é”™ï¼Œä¸€æ—¦ç”¨ngnixåå‘ä»£ç†å°±æŠ¥é”™ã€‚
åŸå› ï¼šåº”è¯¥æ˜¯kibanaçš„å¯åŠ¨ç”¨æˆ·æ²¡æœ‰è®¿é—®nginx/proxy_tempæ–‡ä»¶å¤¹çš„æƒé™ï¼Œå¯¼è‡´éƒ¨åˆ†é™æ€èµ„æºæ— æ³•åŠ è½½ã€‚
 å¥‡æ€ªçš„æ˜¯ï¼š1. æˆ‘çš„proxy_tempæ–‡ä»¶ä¸‹ä¸€ä¸ªæ–‡ä»¶éƒ½æ²¡æœ‰ 2. æˆ‘çš„nginx error.logæ—¥å¿—ä¹Ÿæ²¡æœ‰æŠ¥ç±»ä¼¼Permission deniedçš„é”™è¯¯ã€‚ è¿™é‡Œæš‚ä¸”ä¸ç®¡ã€‚ã€‚ã€‚
 è§£å†³åŠæ³•:
chmod -R 777 proxy_temp https://www.cnblogs.com/operationhome/p/9901580.html </description>
    </item>
    
    <item>
      <title>nginxæˆæƒç™»é™†æŠ¥403é—®é¢˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/nginx%E6%8E%88%E6%9D%83%E7%99%BB%E9%99%86%E6%8A%A5403%E9%97%AE%E9%A2%98/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/nginx%E6%8E%88%E6%9D%83%E7%99%BB%E9%99%86%E6%8A%A5403%E9%97%AE%E9%A2%98/</guid>
      <description>åœ¨ç»™nginxåŠ ä¸Šæˆæƒæ¨¡å—åï¼Œå†è®¿é—®åº”ç”¨æŠ¥403è®¿é—®ç¦æ­¢çš„é”™è¯¯ã€‚
ä¸€å¼€å§‹æ˜¯è¿™æ ·ï¼š
1. ç”Ÿæˆå¯†ç æ–‡ä»¶ printf &amp;#34;yourusername:$(openssl passwd -apr1)&amp;#34; &amp;gt; /etc/nginx/passwords 2. nginxé…ç½® server { # ... auth_basic &amp;#34;Protected&amp;#34;; auth_basic_user_file passwords; # ... } [v_error]auth_basic_user_file åé¢è·Ÿçš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·é…ç½®å¾ˆå®¹æ˜“å¯¼è‡´nginxæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå› æ­¤æ”¹æˆç»å¯¹è·¯å¾„å°±ä¸‡äº‹å¤§å‰äº†ï¼š[/v_error]
server{	listen 443 ssl; server_name netdata.6and.ltd; #listen [::]:81 default_server ipv6only=on; #ssl on; ssl_certificate httpssl/1_netdata.6and.ltd_bundle.crt; ssl_certificate_key httpssl/2_netdata.6and.ltd.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; #index index.html index.htm index.php; #root /home/wwwroot/; #error_page 404 /404.html; #include enable-php.conf; auth_basic &amp;#34;Protected&amp;#34;; auth_basic_user_file /usr/local/nginx/passwords; location / { proxy_pass http://127.</description>
    </item>
    
    <item>
      <title>OAuth2</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/oauth2/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/oauth2/</guid>
      <description>OAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç§»åŠ¨åº”ç”¨è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç§»åŠ¨åº”ç”¨æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼ŒOAuth2.0æ˜¯OAuthåè®®çš„å»¶ç»­ç‰ˆæœ¬ï¼Œä½†ä¸å‘åå…¼å®¹OAuth 1.0å³å®Œå…¨åºŸæ­¢äº†OAuth1.0ã€‚
å®¢æˆ·ç«¯å¿…é¡»å¾—åˆ°ç”¨æˆ·çš„æˆæƒï¼ˆauthorization grantï¼‰ï¼Œæ‰èƒ½è·å¾—ä»¤ç‰Œï¼ˆaccess tokenï¼‰ã€‚OAuth 2.0å®šä¹‰äº†å››ç§æˆæƒæ–¹å¼ã€‚
 æˆæƒç æ¨¡å¼ï¼ˆauthorization codeï¼‰ ç®€åŒ–æ¨¡å¼ï¼ˆimplicitï¼‰ å¯†ç æ¨¡å¼ï¼ˆresource owner password credentialsï¼‰ å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆclient credentialsï¼‰  1. åè¯å®šä¹‰ åœ¨è¯¦ç»†è®²è§£OAuth 2.0ä¹‹å‰ï¼Œéœ€è¦äº†è§£å‡ ä¸ªä¸“ç”¨åè¯ã€‚
ï¼ˆ1ï¼‰ Third-party applicationï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œæœ¬æ–‡ä¸­åˆç§°&amp;quot;å®¢æˆ·ç«¯&amp;quot;ï¼ˆclientï¼‰ï¼Œå³ä¸Šä¸€èŠ‚ä¾‹å­ä¸­çš„&amp;quot;äº‘å†²å°&amp;quot;ã€‚
ï¼ˆ2ï¼‰HTTP serviceï¼šHTTPæœåŠ¡æä¾›å•†ï¼Œæœ¬æ–‡ä¸­ç®€ç§°&amp;quot;æœåŠ¡æä¾›å•†&amp;quot;ï¼Œå³ä¸Šä¸€èŠ‚ä¾‹å­ä¸­çš„Googleã€‚
ï¼ˆ3ï¼‰Resource Ownerï¼šèµ„æºæ‰€æœ‰è€…ï¼Œæœ¬æ–‡ä¸­åˆç§°&amp;quot;ç”¨æˆ·&amp;quot;ï¼ˆuserï¼‰ã€‚
ï¼ˆ4ï¼‰User Agentï¼šç”¨æˆ·ä»£ç†ï¼Œæœ¬æ–‡ä¸­å°±æ˜¯æŒ‡æµè§ˆå™¨ã€‚
ï¼ˆ5ï¼‰Authorization serverï¼šè®¤è¯æœåŠ¡å™¨ï¼Œå³æœåŠ¡æä¾›å•†ä¸“é—¨ç”¨æ¥å¤„ç†è®¤è¯çš„æœåŠ¡å™¨ã€‚
ï¼ˆ6ï¼‰Resource serverï¼šèµ„æºæœåŠ¡å™¨ï¼Œå³æœåŠ¡æä¾›å•†å­˜æ”¾ç”¨æˆ·ç”Ÿæˆçš„èµ„æºçš„æœåŠ¡å™¨ã€‚å®ƒä¸è®¤è¯æœåŠ¡å™¨ï¼Œå¯ä»¥æ˜¯åŒä¸€å°æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒçš„æœåŠ¡å™¨ã€‚
çŸ¥é“äº†ä¸Šé¢è¿™äº›åè¯ï¼Œå°±ä¸éš¾ç†è§£ï¼ŒOAuthçš„ä½œç”¨å°±æ˜¯è®©&amp;quot;å®¢æˆ·ç«¯&amp;quot;å®‰å…¨å¯æ§åœ°è·å–&amp;quot;ç”¨æˆ·&amp;quot;çš„æˆæƒï¼Œä¸&amp;quot;æœåŠ¡å•†æä¾›å•†&amp;quot;è¿›è¡Œäº’åŠ¨ã€‚
2. å››ç§æ¨¡å¼åŒºåˆ« æˆæƒç æ¨¡å¼æ²¡ä»€ä¹ˆå¥½è®²çš„ï¼Œåº”ç”¨æœ€å¹¿æ³›ï¼Œæ˜¯æ ‡å‡†çš„OAuth2æ¨¡å¼ï¼›
ç®€åŒ–æ¨¡å¼é€‚åˆæ²¡æœ‰åç«¯çš„åº”ç”¨ï¼Œä¹Ÿå°±æ— æ³•å®‰å…¨çš„å­˜å‚¨client id å’Œ client secret ä¾‹å¦‚åªæœ‰ä¸€ä¸ªé¡µé¢çš„h5è°ƒæŸ¥é—®å·ç­‰ç­‰ï¼›
å¯†ç æ¨¡å¼æ˜¯ç”¨æˆ·æŠŠè´¦å·å¯†ç ç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œéå¸¸ä¸å®‰å…¨ï¼Œé€‚ç”¨äºé—ç•™é¡¹ç›®å‡çº§ä¸ºoauth2çš„é€‚é…æ–¹æ¡ˆã€å®¢æˆ·ç«¯æ˜¯è‡ªå®¶çš„åº”ç”¨ï¼›
å®¢æˆ·ç«¯æ¨¡å¼ç›´æ¥æ ¹æ®clientçš„idå’Œå¯†é’¥å³å¯è·å–tokenï¼Œæ— éœ€ç”¨æˆ·å‚ä¸ï¼Œé€‚ç”¨äºåç«¯æœåŠ¡è°ƒåç«¯æœåŠ¡ï¼›
å‚è€ƒé“¾æ¥ï¼š ç†è§£OAuth 2.0 oauth2å››ç§æˆæƒæ–¹å¼å°ç»“ [ç®€æ˜“å›¾è§£]ã€ OAuth2.0ã€ ã€è¿›é˜¶ã€ æˆæƒæ¨¡å¼æ€»ç»“ OAuth2.0çš„å››ç§æˆæƒæ¨¡å¼ </description>
    </item>
    
    <item>
      <title>Oauth2çš„æˆæƒç æ¨¡å¼ä¸ºä»€ä¹ˆè¿”å›tokenä¹‹å‰å…ˆè¿”å›codeï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›tokenï¼Ÿ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/oauth2%E7%9A%84%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%94%E5%9B%9Etoken%E4%B9%8B%E5%89%8D%E5%85%88%E8%BF%94%E5%9B%9Ecode%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9Etoken/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/oauth2%E7%9A%84%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%94%E5%9B%9Etoken%E4%B9%8B%E5%89%8D%E5%85%88%E8%BF%94%E5%9B%9Ecode%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9Etoken/</guid>
      <description>æ‰€è°“ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå®è´¨å°±æ˜¯ OAuth æˆæƒã€‚ç”¨æˆ·æƒ³è¦ç™»å½• A ç½‘ç«™ï¼ŒA ç½‘ç«™è®©ç”¨æˆ·æä¾›ç¬¬ä¸‰æ–¹ç½‘ç«™çš„æ•°æ®ï¼Œè¯æ˜è‡ªå·±çš„èº«ä»½ã€‚è·å–ç¬¬ä¸‰æ–¹ç½‘ç«™çš„èº«ä»½æ•°æ®ï¼Œå°±éœ€è¦ OAuth æˆæƒã€‚
ä¸¾ä¾‹æ¥è¯´ï¼ŒA ç½‘ç«™å…è®¸ GitHub ç™»å½•ï¼ŒèƒŒåå°±æ˜¯ä¸‹é¢çš„æµç¨‹ã€‚
  A ç½‘ç«™è®©ç”¨æˆ·è·³è½¬åˆ° GitHubã€‚ GitHub è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç„¶åè¯¢é—®&amp;quot;A ç½‘ç«™è¦æ±‚è·å¾— xx æƒé™ï¼Œä½ æ˜¯å¦åŒæ„ï¼Ÿ&amp;quot; ç”¨æˆ·åŒæ„ï¼ŒGitHub å°±ä¼šé‡å®šå‘å› A ç½‘ç«™ï¼ŒåŒæ—¶å‘å›ä¸€ä¸ªæˆæƒç ã€‚ A ç½‘ç«™ä½¿ç”¨æˆæƒç ï¼Œå‘ GitHub è¯·æ±‚ä»¤ç‰Œã€‚ GitHub è¿”å›ä»¤ç‰Œ. A ç½‘ç«™ä½¿ç”¨ä»¤ç‰Œï¼Œå‘ GitHub è¯·æ±‚ç”¨æˆ·æ•°æ®ã€‚   é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥è¿”å›tokenï¼Ÿè€Œè¦ä¸­é—´ç»è¿‡codeå†å€’è…¾ä¸€éå‘¢ï¼ŸçŸ¥ä¹ä¸Šæœ‰ä½å¤§å“¥å›ç­”å¾—æŒºå¥½ã€‚
é—®é¢˜ï¼š
 ä¸ºä»€ä¹ˆoauth2ä¸­çš„æˆæƒç æ¨¡å¼ åœ¨è·å–tokenä¹‹å‰éè¦å…ˆåˆ°èµ„æºæœåŠ¡å™¨è·å–ä¸€ä¸ªcode ç„¶åæ‰ä½¿ç”¨èµ„æºæœåŠ¡å™¨çš„codeå»èµ„æºæœåŠ¡å™¨å»ç”³è¯·token?
çœ‹äº†å¾ˆå¤šèµ„æ–™è¯´æ˜¯å› ä¸º ç”¨æˆ·åœ¨ç¡®è®¤æˆæƒä¹‹å èµ„æºæœåŠ¡å™¨ä¼šè·³è½¬åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä¸€ä¸ªå›è°ƒurl, å¦‚æœç›´æ¥è¿”å›tokençš„è¯ï¼Œè°éƒ½å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°è¿™ä¸ªtoken é‚£å°±æ²¡æœ‰å®‰å…¨æ€§å¯è¨€äº†
ä½†æ˜¯æˆ‘æœ‰ä¸ªæƒ³æ³•ä¸çŸ¥æ˜¯å¦å¯è¡Œ é‚£å°±æ˜¯ä¸ºä»€ä¹ˆ èµ„æºæœåŠ¡å™¨éè¦è·³è½¬åˆ°ç¬¬ä¸‰æ–¹ç«™ç‚¹ç»™çš„å›è°ƒurlå‘¢ï¼Ÿ æˆ‘çš„urlå¦‚æœæ˜¯ä¸ªæ¥å£ èµ„æºæœåŠ¡å™¨å®Œå…¨å¯ä»¥ä¸é€šè¿‡æµè§ˆå™¨è·³è½¬ è€Œæ˜¯ç›´æ¥å›è°ƒæˆ‘çš„æ¥å£ ç›´æ¥å§tokenç»™æˆ‘çš„æœåŠ¡å™¨ï¼Œ ç„¶åæˆ‘çš„æœåŠ¡å™¨å­˜å‚¨å¥½tokenä¹‹å è‡ªå·±å†³å®šå¦‚ä½•è·³è½¬ä¸å°±è¡Œäº†ï¼Ÿ è¿™æ ·å²‚ä¸æ˜¯æ¯”æˆæƒæ¨¡å¼ç®€å•ä¹Ÿæ¯”éšå¼æ¨¡å¼å®‰å…¨
 å›ç­”ï¼š
 é¦–å…ˆï¼Œä»äº§å“äº¤äº’ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æµè§ˆå™¨è·³è½¬åˆ°â€œè®¤è¯æœåŠ¡å™¨â€ï¼Œè®©ç”¨æˆ·æ˜ç¡®è¡¨æ€åŒä¸åŒæ„â€œç¬¬ä¸‰æ–¹ç«™ç‚¹â€çš„æˆæƒè¯·æ±‚ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæµè§ˆå™¨è®¿é—®çš„åœ°å€å·²ç»åˆ°â€œè®¤è¯æœåŠ¡å™¨â€å»äº†ï¼Œä¸è·³è½¬å›æ¥çš„è¯ï¼Œç½‘é¡µä¸åœ¨â€œç¬¬ä¸‰æ–¹ç«™ç‚¹â€çš„æ§åˆ¶ä¸­ï¼Œæ€ä¹ˆè¿›è¡ŒæˆæƒæˆåŠŸåçš„ä¸‹ä¸€æ­¥äº¤äº’å‘¢ï¼Ÿ
æˆæƒç æ¨¡å¼çš„å®‰å…¨è€ƒé‡ï¼Œæ˜¯åŸºäºäº§å“äº¤äº’èƒ½å®Œæˆçš„å‰æä¸‹ï¼Œè€ƒè™‘å¦‚ä½•ä¸åœ¨æµè§ˆå™¨è¿™ç§æš´éœ² url çš„ç¯å¢ƒé‡Œåšåˆ°å®‰å…¨çš„ã€‚
å¦‚æœä½ æƒ³è¡¨è¾¾çš„æ˜¯â€œè®¤è¯æœåŠ¡å™¨â€è·³è½¬å›æ¥ï¼Œä½†æ˜¯ä¸å¸¦ codeï¼Œè€Œæ˜¯é€šè¿‡ Server å¯¹ Server å°† token ç›´æ¥ç»™â€œç¬¬ä¸‰æ–¹æœåŠ¡å™¨â€ã€‚</description>
    </item>
    
    <item>
      <title>OOMå®æˆ˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/oom%E5%AE%9E%E6%88%98/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/oom%E5%AE%9E%E6%88%98/</guid>
      <description>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­å°†OOMåˆ’åˆ†ä¸º: Javaå †æº¢å‡ºã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡ºã€æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡ºã€æœ¬æœºç›´æ¥å†…å­˜æº¢å‡º
1. Javaå †æº¢å‡º /** * JDK1.6/JDK1.8 * * Javaå †å†…å­˜æº¢å‡ºå¼‚å¸¸æµ‹è¯• * * VM Args: -Xms20m -Xmx20m -XX:+HeapDumpOnOutOfMemoryError * * @author xuzhijun.online * @date 2019å¹´4æœˆ22æ—¥ */ public class HeapOOM { static class OOMObject{ } public static void main(String[] args) { List&amp;lt;OOMObject&amp;gt; list = new ArrayList&amp;lt;OOMObject&amp;gt;(); while(true) { list.add(new OOMObject()); } } } è¿è¡Œç»“æœï¼š
java.lang.OutOfMemoryError: Java heap space Dumping heap to java_pid3404.hprof ... Heap dump file created [22045981 bytes in 0.663 secs] å¤„ç†æ–¹æ³•ï¼š</description>
    </item>
    
    <item>
      <title>openrestyæœ€ä½³å®è·µ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/openresty/openresty%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/openresty/openresty%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</guid>
      <description>æ¨èå…ˆé˜…è¯»ä¸‹é¢æ–‡ç« ï¼Œä»¥å‚¨å¤‡åŸºç¡€çŸ¥è¯†ã€‚
æ–¹å¿—æœ‹openrestyç³»åˆ—ï¼šopenrestyæœ€ä½³æ¡ˆä¾‹æ¡ˆä¾‹-æ±‡æ€» é»‘é©¬ç¨‹åºå‘˜ï¼šjavaè‡ªå­¦è¿›é˜¶é«˜æ€§èƒ½webå¹³å°openrestyç®€ä»‹ </description>
    </item>
    
    <item>
      <title>pbft</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/block-chain/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/pbft/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/block-chain/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95/pbft/</guid>
      <description>1999å¹´Castroå’ŒLiskovåœ¨ã€Šæ“ä½œç³»ç»Ÿè®¾è®¡ä¸å®ç°ã€‹ä¸Šå‘è¡¨è®ºæ–‡Practical Byzantine Fault Tolerance ã€‚ä¹‹åCastroå’ŒLiskovä¿®æ”¹äº†ä¹‹å‰è®ºæ–‡çš„éƒ¨åˆ†ç»†èŠ‚ï¼Œ2001å¹´å°†ä¿®æ”¹åçš„è®ºæ–‡Practical Byzantine Fault Tolerance and Proactive Recovery å‘è¡¨äºã€ŠACM Transactions on Computer Systems (TOCS)ã€‹ã€‚ä¹‹åå‘è¡¨çš„è¿™ç¯‡è®ºæ–‡å¯¹ä¹‹å‰çš„è®ºæ–‡è¿›è¡Œäº†éƒ¨åˆ†ä¼˜åŒ–ï¼Œpre-prepareæ¶ˆæ¯ä¸å†åŒ…å«è¯·æ±‚æ¶ˆæ¯ï¼ˆåªåŒ…å«æ¶ˆæ¯æ‘˜è¦ï¼‰ï¼Œclientä¸åªæŠŠè¯·æ±‚å‘ç»™ä¸»èŠ‚ç‚¹ï¼ˆä¹Ÿå‘ç»™ä»èŠ‚ç‚¹ï¼‰ç­‰ã€‚fabricä¸­çš„pbftå®ç°ä¹Ÿæ˜¯åŸºäº2001å¹´çš„è®ºæ–‡ï¼Œå› æ­¤å»ºè®®å¤§å®¶ç›´æ¥çœ‹2001å¹´å‘è¡¨çš„è®ºæ–‡ã€‚ä½†æ˜¯å› ä¸ºï¼Œç½‘ä¸Šå¯¹1999å¹´çš„è®ºæ–‡è®²è§£æ¯”è¾ƒå¤šï¼Œæœ¬æ–‡ä¹Ÿä»¥1999å¹´çš„è®ºæ–‡å½¢æˆæ€»ç»“ã€‚
0. èƒŒæ™¯ æ‹œå åº­é—®é¢˜ï¼ˆByzantine Problemï¼‰ åˆå«æ‹œå åº­å°†å†›ï¼ˆByzantine Generals Problemï¼‰ é—®é¢˜ï¼Œè®¨è®ºçš„æ˜¯å…è®¸å­˜åœ¨å°‘æ•°èŠ‚ç‚¹ä½œæ¶ï¼ˆæ¶ˆæ¯å¯èƒ½è¢«ä¼ªé€ ï¼‰ åœºæ™¯ä¸‹çš„å¦‚ä½•è¾¾æˆå…±è¯†é—®é¢˜ã€‚æ‹œå åº­å®¹é”™ï¼ˆByzantine Fault Tolerantï¼ŒBFTï¼‰è®¨è®ºçš„æ˜¯å®¹å¿æ‹œå åº­é”™è¯¯çš„å…±è¯†ç®—æ³•ã€‚
 ä¸¤å°†å†›é—®é¢˜  æ‹œå åº­é—®é¢˜ä¹‹å‰ï¼Œå­¦æœ¯ç•Œå°±å·²ç»å­˜åœ¨ä¸¤å°†å†›é—®é¢˜çš„è®¨è®ºï¼ˆã€ŠSome constraints and tradeofis in the design of network communicationsã€‹ ï¼Œ1975å¹´ï¼‰ï¼šä¸¤ä¸ªå°†å†›è¦é€šè¿‡ä¿¡ä½¿æ¥è¾¾æˆè¿›æ”»è¿˜æ˜¯æ’¤é€€çš„çº¦å®šï¼Œä½†ä¿¡ä½¿å¯èƒ½è¿·è·¯æˆ–è¢«æ•Œå†›é˜»æ‹¦ï¼ˆæ¶ˆæ¯ä¸¢å¤±æˆ–ä¼ªé€ ï¼‰ï¼Œå¦‚ä½•è¾¾æˆä¸€è‡´ï¼Ÿæ ¹æ®FLPä¸å¯èƒ½åŸç†ï¼Œè¿™ä¸ªé—®é¢˜æ— é€šç”¨è§£ã€‚
 æ‹œå åº­é—®é¢˜  æ‹œå åº­é—®é¢˜æœ€æ—©ç”± Leslie Lamport ç­‰å­¦è€…äº 1982 å¹´åœ¨è®ºæ–‡ã€ŠThe Byzantine Generals Problemã€‹ä¸­æ­£å¼æå‡ºï¼Œæ˜¯ç”¨æ¥è§£é‡Šå¼‚æ­¥ç³»ç»Ÿä¸­å…±è¯†é—®é¢˜çš„ä¸€ä¸ªè™šæ„æ¨¡å‹ã€‚å®ƒæ˜¯åˆ†å¸ƒå¼é¢†åŸŸä¸­æœ€å¤æ‚ã€æœ€ä¸¥æ ¼çš„å®¹é”™æ¨¡å‹ã€‚åœ¨è¯¥æ¨¡å‹ä¸‹ï¼Œç³»ç»Ÿä¸ä¼šå¯¹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åšä»»ä½•çš„é™åˆ¶ï¼Œå®ƒä»¬å¯ä»¥å‘å…¶ä»–èŠ‚ç‚¹å‘é€éšæœºæ•°æ®ã€é”™è¯¯æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸å“åº”å…¶ä»–èŠ‚ç‚¹çš„è¯·æ±‚ï¼Œè¿™äº›æ— æ³•é¢„æµ‹çš„è¡Œä¸ºä½¿å¾—å®¹é”™è¿™ä¸€é—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚
æ‹œå åº­æ˜¯å¤ä»£ä¸œç½—é©¬å¸å›½çš„é¦–éƒ½ï¼Œç”±äºåœ°åŸŸå®½å¹¿ï¼Œå‡è®¾å…¶å®ˆå«è¾¹å¢ƒçš„å¤šä¸ªå°†å†›ï¼ˆç³»ç»Ÿä¸­çš„å¤šä¸ªèŠ‚ç‚¹ï¼‰ éœ€è¦é€šè¿‡ä¿¡ä½¿æ¥ä¼ é€’æ¶ˆæ¯ï¼Œè¾¾æˆæŸäº›ä¸€è‡´å†³å®šã€‚ä½†ç”±äºå°†å†›ä¸­å¯èƒ½å­˜åœ¨å›å¾’ï¼ˆç³»ç»Ÿä¸­èŠ‚ç‚¹å‡ºé”™ï¼‰ï¼Œè¿™äº›å›å¾’å°†å‘ä¸åŒçš„å°†å†›å‘é€ä¸åŒçš„æ¶ˆæ¯ï¼Œè¯•å›¾å¹²æ‰°å…±è¯†çš„è¾¾æˆã€‚æ‹œå åº­é—®é¢˜å³è®¨è®ºåœ¨æ­¤æƒ…å†µä¸‹ï¼Œå¦‚ä½•è®©å¿ è¯šçš„å°†å†›ä»¬èƒ½è¾¾æˆè¡ŒåŠ¨çš„ä¸€è‡´ã€‚
åœ¨å¤§å¤šæ•°çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‹œå åº­çš„åœºæ™¯å¹¶ä¸å¤šè§ã€‚ç„¶è€Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹å­˜åœ¨æ„ä¹‰ï¼Œä¾‹å¦‚å…è®¸åŒ¿åå‚ä¸çš„ç³»ç»Ÿï¼ˆå¦‚æ¯”ç‰¹å¸ï¼‰ ï¼Œæˆ–æ˜¯å‡ºç°æ¬ºè¯ˆå¯èƒ½é€ æˆå·¨å¤§æŸå¤±çš„æƒ…å†µã€‚
 æ‹œå åº­å®¹é”™ç®—æ³•  æ‹œå åº­å®¹é”™ç®—æ³•ï¼ˆByzantine Fault Tolerantï¼‰æ˜¯é¢å‘æ‹œå åº­é—®é¢˜çš„å®¹é”™ç®—æ³•ï¼Œè§£å†³çš„æ˜¯åœ¨ç½‘ç»œé€šä¿¡å¯é ï¼Œä½†èŠ‚ç‚¹å¯èƒ½æ•…éšœå’Œä½œæ¶æƒ…å†µä¸‹å¦‚ä½•è¾¾æˆå…±è¯†ã€‚
æ‹œå åº­å®¹é”™ç®—æ³•æœ€æ—©çš„è®¨è®ºå¯ä»¥è¿½æº¯åˆ°Leslie Lamportç­‰äºº1982å¹´å‘è¡¨çš„è®ºæ–‡ã€ŠThe Byzantine Generals Problemã€‹ï¼Œä¹‹åå‡ºç°äº†å¤§é‡çš„æ”¹è¿›å·¥ä½œï¼Œä»£è¡¨æ€§æˆæœåŒ…æ‹¬ã€ŠOptimal Asynchronous Byzantine Agreementã€‹ï¼ˆ1992å¹´ï¼‰ã€ã€ŠFully Polynomial Byzantine Agreement for n&amp;gt;3t Processors in t+1 Roundsã€‹ï¼ˆ1998å¹´ï¼‰ç­‰ã€‚é•¿æœŸä»¥æ¥ï¼Œæ‹œå åº­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéƒ½å­˜åœ¨è¿è¡Œè¿‡æ…¢ï¼Œæˆ–å¤æ‚åº¦è¿‡é«˜çš„é—®é¢˜ï¼Œç›´åˆ°â€œå®ç”¨æ‹œå åº­å®¹é”™ç®—æ³•â€ï¼ˆPractical Byzantine Fault Toleranceï¼ŒPBFTï¼‰ç®—æ³•çš„æå‡ºã€‚</description>
    </item>
    
    <item>
      <title>POSTå’ŒGET</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/http/post%E5%92%8Cget/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/http/post%E5%92%8Cget/</guid>
      <description>RFCæ ‡å‡†åŒºåˆ« æ ¹æ®RFCå®šä¹‰çš„httpæ ‡å‡†ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š
 GET ç”¨äºè·å–ä¿¡æ¯ï¼Œæ˜¯æ— å‰¯ä½œç”¨çš„ï¼Œæ˜¯å¹‚ç­‰çš„ï¼Œä¸”å¯ç¼“å­˜ POST ç”¨äºä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œæœ‰å‰¯ä½œç”¨ï¼Œéå¹‚ç­‰ï¼Œä¸å¯ç¼“å­˜  å®é™…åŒºåˆ« GET å’Œ POST æ–¹æ³•æ²¡æœ‰å®è´¨åŒºåˆ«ï¼Œåªæ˜¯æŠ¥æ–‡æ ¼å¼ä¸åŒã€‚
GET å’Œ POST åªæ˜¯ HTTP åè®®ä¸­ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼Œè€Œ HTTP åè®®æ˜¯åŸºäº TCP/IP çš„åº”ç”¨å±‚åè®®ï¼Œæ— è®º GET è¿˜æ˜¯ POSTï¼Œç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªä¼ è¾“å±‚åè®®ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“ä¸Šï¼Œæ²¡æœ‰åŒºåˆ«ã€‚
ä½ å¯ä»¥åœ¨GETè¯·æ±‚çš„bodyé‡Œé¢å‘å‚æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨POSTè¯·æ±‚çš„urlåé¢è·Ÿå‚æ•°ã€‚
ç°å®ä¸­ï¼Œä¹‹æ‰€ä»¥ä¼šæœ‰è¯¸å¦‚ï¼šGETè¯·æ±‚æœ‰é•¿åº¦é™åˆ¶è¿™æ ·çš„å·®å¼‚ï¼Œæ˜¯ä¸æµè§ˆå™¨å’ŒæœåŠ¡ç«¯å®ç°ç»†èŠ‚æœ‰å…³ï¼Œä¸httpåè®®æœ¬èº«æ— å…³ï¼Œä¸æ˜¯httpåè®®è§„å®šçš„è¿™äº›å·®å¼‚ã€‚
å…¶ä»–åŒºåˆ« æœ‰äº›æ–‡ç« ä¸­æåˆ°ï¼Œpost ä¼šå°† header å’Œ body åˆ†å¼€å‘é€ï¼Œå…ˆå‘é€ headerï¼ŒæœåŠ¡ç«¯è¿”å› 100 çŠ¶æ€ç å†å‘é€ bodyã€‚
HTTP åè®®ä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜ POST ä¼šäº§ç”Ÿä¸¤ä¸ª TCP æ•°æ®åŒ…ï¼Œè€Œä¸”å®é™…æµ‹è¯•(Chrome)å‘ç°ï¼Œheader å’Œ body ä¸ä¼šåˆ†å¼€å‘é€ã€‚
æ‰€ä»¥ï¼Œheader å’Œ body åˆ†å¼€å‘é€æ˜¯éƒ¨åˆ†æµè§ˆå™¨æˆ–æ¡†æ¶çš„è¯·æ±‚æ–¹æ³•ï¼Œä¸å±äº post å¿…ç„¶è¡Œä¸ºã€‚</description>
    </item>
    
    <item>
      <title>RedissonåŸç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redisson%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redisson%E5%8E%9F%E7%90%86/</guid>
      <description>ä½¿ç”¨ set key value ex/px ç§’/æ¯«ç§’ xx/nx çš„å‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ï¼Œå­˜åœ¨å¤šä¸ªclientç«¯åŠ é”æˆåŠŸçš„æç«¯æƒ…å†µã€‚Redissonä½¿ç”¨RedLockå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå…¶åŸç†æ˜¯å¤šé”ï¼Œä¾‹å¦‚å¯¹å¤šä¸ªå“¨å…µé›†ç¾¤åŠ ä¸åŒçš„é”ï¼Œåªæœ‰è¶…åŠæ•°ä»¥ä¸Šçš„å“¨å…µé›†ç¾¤åé¦ˆåŠ é”æˆåŠŸæ‰ç®—åŠ é”æˆåŠŸã€‚å¦å¤–ï¼ŒRedissonè¿˜é€šè¿‡WatchDogå®ç°äº†é”ç»­ç§Ÿã€‚è¿˜å®ç°äº†å¾ˆå¤šæœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼ˆRedissonPriorityDequeï¼‰å’Œåˆ†å¸ƒå¼åŒæ­¥å·¥å…·ï¼ˆRedissonCountDownLatch, RedissonSemaphoreï¼‰
å†™åœ¨å‰é¢ åœ¨äº†è§£åˆ†å¸ƒå¼é”å…·ä½“å®ç°æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ€è€ƒä¸€ä¸‹ä½¿ç”¨åˆ†å¸ƒå¼é”å¿…é¡»è¦è€ƒè™‘çš„ä¸€äº›é—®é¢˜ã€‚
 äº’æ–¥æ€§ï¼šåœ¨ä»»æ„æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹æŒæœ‰é”ã€‚ é˜²æ­»é”ï¼šå³ä½¿æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨æŒæœ‰é”çš„æœŸé—´å´©æºƒè€Œæœªèƒ½ä¸»åŠ¨é‡Šæ”¾é”ï¼Œè¦æœ‰å…¶ä»–æ–¹å¼å»é‡Šæ”¾é”ä»è€Œä¿è¯å…¶ä»–è¿›ç¨‹èƒ½è·å–åˆ°é”ã€‚ åŠ é”å’Œè§£é”çš„å¿…é¡»æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ã€‚ é”çš„ç»­æœŸé—®é¢˜ã€‚  å¸¸è§çš„åˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆ  åŸºäº Redis å®ç°åˆ†å¸ƒå¼é” åŸºäº Zookeeper å®ç°åˆ†å¸ƒå¼é”  æœ¬æ–‡é‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯åŸºäº Redis çš„åˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆã€‚
Redis å®ç°åˆ†å¸ƒå¼é”ä¸»è¦æ­¥éª¤  æŒ‡å®šä¸€ä¸ª key ä½œä¸ºé”æ ‡è®°ï¼Œå­˜å…¥ Redis ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ª å”¯ä¸€çš„ç”¨æˆ·æ ‡è¯† ä½œä¸º valueã€‚ å½“ key ä¸å­˜åœ¨æ—¶æ‰èƒ½è®¾ç½®å€¼ï¼Œç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿›ç¨‹è·å¾—é”ï¼Œæ»¡è¶³ äº’æ–¥æ€§ ç‰¹æ€§ã€‚ è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢å› ç³»ç»Ÿå¼‚å¸¸å¯¼è‡´æ²¡èƒ½åˆ é™¤è¿™ä¸ª keyï¼Œæ»¡è¶³ é˜²æ­»é” ç‰¹æ€§ã€‚ å½“å¤„ç†å®Œä¸šåŠ¡ä¹‹åéœ€è¦æ¸…é™¤è¿™ä¸ª key æ¥é‡Šæ”¾é”ï¼Œæ¸…é™¤ key æ—¶éœ€è¦æ ¡éªŒ value å€¼ï¼Œéœ€è¦æ»¡è¶³ åªæœ‰åŠ é”çš„äººæ‰èƒ½é‡Šæ”¾é” ã€‚   ç‰¹åˆ«æ³¨æ„ï¼šä»¥ä¸Šå®ç°æ­¥éª¤è€ƒè™‘åˆ°äº†ä½¿ç”¨åˆ†å¸ƒå¼é”éœ€è¦è€ƒè™‘çš„äº’æ–¥æ€§ã€é˜²æ­»é”ã€åŠ é”å’Œè§£é”å¿…é¡»ä¸ºåŒä¸€ä¸ªè¿›ç¨‹ç­‰é—®é¢˜ï¼Œä½†æ˜¯é”çš„ç»­æœŸæ— æ³•å®ç°ã€‚æ‰€ä»¥ï¼Œåšä¸»é‡‡ç”¨ Redisson å®ç° Redis çš„åˆ†å¸ƒå¼é”ï¼Œå€ŸåŠ© Redisson çš„ WatchDog æœºåˆ¶ èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³é”ç»­æœŸçš„é—®é¢˜ï¼ŒåŒæ · Redisson ä¹Ÿæ˜¯ Redis å®˜æ–¹æ¨èåˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆï¼Œå®ç°èµ·æ¥è¾ƒä¸ºç®€å•ã€‚</description>
    </item>
    
    <item>
      <title>Redisä¸»ä»å¤åˆ¶</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</guid>
      <description>ä¸»ä»å¤åˆ¶è™½ç„¶å®ç°æ•°æ®å†—ä½™ï¼ˆæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ï¼‰ã€æ•…éšœæ¢å¤ï¼ˆæ‰‹åŠ¨åˆ‡æ¢ï¼‰ã€è¯»è´Ÿè½½å‡è¡¡ç­‰é—®é¢˜ã€‚ä½†æ— æ³•è‡ªåŠ¨æ•…éšœè½¬ç§»ã€å†™æ“ä½œæ— æ³•è´Ÿè½½å‡è¡¡ã€å­˜å‚¨èƒ½åŠ›å—åˆ°å•æœºçš„é™åˆ¶ã€‚
1. ä¸»ä»å¤åˆ¶æ¦‚è¿° ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave)ï¼›æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼›ä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹(æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚
ä¸»ä»å¤åˆ¶çš„ä½œç”¨
ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬ï¼š
 æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚ æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼›å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™ã€‚ è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼ˆå³å†™Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯»Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚ é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚  2. å¦‚ä½•ä½¿ç”¨ä¸»ä»å¤åˆ¶ ä¸ºäº†æ›´ç›´è§‚çš„ç†è§£ä¸»ä»å¤åˆ¶ï¼Œåœ¨ä»‹ç»å…¶å†…éƒ¨åŸç†ä¹‹å‰ï¼Œå…ˆè¯´æ˜æˆ‘ä»¬éœ€è¦å¦‚ä½•æ“ä½œæ‰èƒ½å¼€å¯ä¸»ä»å¤åˆ¶ã€‚
2.1 å»ºç«‹å¤åˆ¶ éœ€è¦æ³¨æ„ï¼Œä¸»ä»å¤åˆ¶çš„å¼€å¯ï¼Œå®Œå…¨æ˜¯åœ¨ä»èŠ‚ç‚¹å‘èµ·çš„ï¼›ä¸éœ€è¦æˆ‘ä»¬åœ¨ä¸»èŠ‚ç‚¹åšä»»ä½•äº‹æƒ…ã€‚
ä»èŠ‚ç‚¹å¼€å¯ä¸»ä»å¤åˆ¶ï¼Œæœ‰3ç§æ–¹å¼ï¼š
ï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶
åœ¨ä»æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼šslaveof  
ï¼ˆ2ï¼‰å¯åŠ¨å‘½ä»¤
redis-serverå¯åŠ¨å‘½ä»¤ååŠ å…¥ &amp;ndash;slaveof  
ï¼ˆ3ï¼‰å®¢æˆ·ç«¯å‘½ä»¤
RedisæœåŠ¡å™¨å¯åŠ¨åï¼Œç›´æ¥é€šè¿‡å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ï¼šslaveof  ï¼Œåˆ™è¯¥Rediså®ä¾‹æˆä¸ºä»èŠ‚ç‚¹ã€‚
ä¸Šè¿°3ç§æ–¹å¼æ˜¯ç­‰æ•ˆçš„ï¼Œä¸‹é¢ä»¥å®¢æˆ·ç«¯å‘½ä»¤çš„æ–¹å¼ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å½“æ‰§è¡Œäº†slaveofåï¼ŒRedisä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹çš„å˜åŒ–ã€‚
2.2 å®ä¾‹ å‡†å¤‡å·¥ä½œï¼šå¯åŠ¨ä¸¤ä¸ªèŠ‚ç‚¹ æ–¹ä¾¿èµ·è§ï¼Œå®éªŒæ‰€ä½¿ç”¨çš„ä¸»ä»èŠ‚ç‚¹æ˜¯åœ¨ä¸€å°æœºå™¨ä¸Šçš„ä¸åŒRediså®ä¾‹ï¼Œå…¶ä¸­ä¸»èŠ‚ç‚¹ç›‘å¬6379ç«¯å£ï¼Œä»èŠ‚ç‚¹ç›‘å¬6380ç«¯å£ï¼›ä»èŠ‚ç‚¹ç›‘å¬çš„ç«¯å£å·å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼š
å¯åŠ¨åå¯ä»¥çœ‹åˆ°ï¼š
ä¸¤ä¸ªRedisèŠ‚ç‚¹å¯åŠ¨åï¼ˆåˆ†åˆ«ç§°ä¸º6379èŠ‚ç‚¹å’Œ6380èŠ‚ç‚¹ï¼‰ï¼Œé»˜è®¤éƒ½æ˜¯ä¸»èŠ‚ç‚¹ã€‚
å»ºç«‹å¤åˆ¶ æ­¤æ—¶åœ¨6380èŠ‚ç‚¹æ‰§è¡Œslaveofå‘½ä»¤ï¼Œä½¿ä¹‹å˜ä¸ºä»èŠ‚ç‚¹ï¼š
è§‚å¯Ÿæ•ˆæœ ä¸‹é¢éªŒè¯ä¸€ä¸‹ï¼Œåœ¨ä¸»ä»å¤åˆ¶å»ºç«‹åï¼Œä¸»èŠ‚ç‚¹çš„æ•°æ®ä¼šå¤åˆ¶åˆ°ä»èŠ‚ç‚¹ä¸­ã€‚
ï¼ˆ1ï¼‰é¦–å…ˆåœ¨ä»èŠ‚ç‚¹æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„keyï¼š
ï¼ˆ2ï¼‰ç„¶ååœ¨ä¸»èŠ‚ç‚¹ä¸­å¢åŠ è¿™ä¸ªkeyï¼š
ï¼ˆ3ï¼‰æ­¤æ—¶åœ¨ä»èŠ‚ç‚¹ä¸­å†æ¬¡æŸ¥è¯¢è¿™ä¸ªkeyï¼Œä¼šå‘ç°ä¸»èŠ‚ç‚¹çš„æ“ä½œå·²ç»åŒæ­¥è‡³ä»èŠ‚ç‚¹ï¼š
ï¼ˆ4ï¼‰ç„¶ååœ¨ä¸»èŠ‚ç‚¹åˆ é™¤è¿™ä¸ªkeyï¼š
ï¼ˆ5ï¼‰æ­¤æ—¶åœ¨ä»èŠ‚ç‚¹ä¸­å†æ¬¡æŸ¥è¯¢è¿™ä¸ªkeyï¼Œä¼šå‘ç°ä¸»èŠ‚ç‚¹çš„æ“ä½œå·²ç»åŒæ­¥è‡³ä»èŠ‚ç‚¹ï¼š
2.3 æ–­å¼€å¤åˆ¶ é€šè¿‡slaveof  å‘½ä»¤å»ºç«‹ä¸»ä»å¤åˆ¶å…³ç³»ä»¥åï¼Œå¯ä»¥é€šè¿‡slaveof no oneæ–­å¼€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»èŠ‚ç‚¹æ–­å¼€å¤åˆ¶åï¼Œä¸ä¼šåˆ é™¤å·²æœ‰çš„æ•°æ®ï¼Œåªæ˜¯ä¸å†æ¥å—ä¸»èŠ‚ç‚¹æ–°çš„æ•°æ®å˜åŒ–ã€‚
ä»èŠ‚ç‚¹æ‰§è¡Œslaveof no oneåï¼Œæ‰“å°æ—¥å¿—å¦‚ä¸‹æ‰€ç¤ºï¼›å¯ä»¥çœ‹å‡ºæ–­å¼€å¤åˆ¶åï¼Œä»èŠ‚ç‚¹åˆå˜å›ä¸ºä¸»èŠ‚ç‚¹ã€‚
ä¸»èŠ‚ç‚¹æ‰“å°æ—¥å¿—å¦‚ä¸‹ï¼š
3. ä¸»ä»å¤åˆ¶çš„å®ç°åŸç† ä¸Šé¢ä¸€èŠ‚ä¸­ï¼Œä»‹ç»äº†å¦‚ä½•æ“ä½œå¯ä»¥å»ºç«‹ä¸»ä»å…³ç³»ï¼›æœ¬å°èŠ‚å°†ä»‹ç»ä¸»ä»å¤åˆ¶çš„å®ç°åŸç†ã€‚
ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰ã€æ•°æ®åŒæ­¥é˜¶æ®µã€å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼›ä¸‹é¢åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚
3.1 è¿æ¥å»ºç«‹é˜¶æ®µ è¯¥é˜¶æ®µçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ä¸»ä»èŠ‚ç‚¹ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¸ºæ•°æ®åŒæ­¥åšå¥½å‡†å¤‡ã€‚
æ­¥éª¤1ï¼šä¿å­˜ä¸»èŠ‚ç‚¹ä¿¡æ¯ ä»èŠ‚ç‚¹æœåŠ¡å™¨å†…éƒ¨ç»´æŠ¤äº†ä¸¤ä¸ªå­—æ®µï¼Œå³masterhostå’Œmasterportå­—æ®µï¼Œç”¨äºå­˜å‚¨ä¸»èŠ‚ç‚¹çš„ipå’Œportä¿¡æ¯ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œslaveofæ˜¯å¼‚æ­¥å‘½ä»¤ï¼Œä»èŠ‚ç‚¹å®Œæˆä¸»èŠ‚ç‚¹ipå’Œportçš„ä¿å­˜åï¼Œå‘å‘é€slaveofå‘½ä»¤çš„å®¢æˆ·ç«¯ç›´æ¥è¿”å›OK**ï¼Œå®é™…çš„å¤åˆ¶æ“ä½œåœ¨è¿™ä¹‹åæ‰å¼€å§‹è¿›è¡Œã€‚**</description>
    </item>
    
    <item>
      <title>redisåˆ†å¸ƒå¼é”å’Œzkåˆ†å¸ƒå¼é”çš„å¯¹æ¯”</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8Czk%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%AF%B9%E6%AF%94/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8Czk%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%AF%B9%E6%AF%94/</guid>
      <description> redis åˆ†å¸ƒå¼é”ï¼Œå…¶å®éœ€è¦è‡ªå·±ä¸æ–­å»å°è¯•è·å–é”ï¼Œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚ zk åˆ†å¸ƒå¼é”ï¼Œè·å–ä¸åˆ°é”ï¼Œæ³¨å†Œä¸ªç›‘å¬å™¨å³å¯ï¼Œä¸éœ€è¦ä¸æ–­ä¸»åŠ¨å°è¯•è·å–é”ï¼Œæ€§èƒ½å¼€é”€è¾ƒå°ã€‚  å¦å¤–ä¸€ç‚¹å°±æ˜¯ï¼Œå¦‚æœæ˜¯ Redis è·å–é”çš„é‚£ä¸ªå®¢æˆ·ç«¯ å‡ºç° bug æŒ‚äº†ï¼Œé‚£ä¹ˆåªèƒ½ç­‰å¾…è¶…æ—¶æ—¶é—´ä¹‹åæ‰èƒ½é‡Šæ”¾é”ï¼›è€Œ zk çš„è¯ï¼Œå› ä¸ºåˆ›å»ºçš„æ˜¯ä¸´æ—¶ znodeï¼Œåªè¦å®¢æˆ·ç«¯æŒ‚äº†ï¼Œznode å°±æ²¡äº†ï¼Œæ­¤æ—¶å°±è‡ªåŠ¨é‡Šæ”¾é”ã€‚
Redis åˆ†å¸ƒå¼é”å¤§å®¶æ²¡å‘ç°å¥½éº»çƒ¦å—ï¼Ÿéå†ä¸Šé”ï¼Œè®¡ç®—æ—¶é—´ç­‰ç­‰&amp;hellip;&amp;hellip;zk çš„åˆ†å¸ƒå¼é”è¯­ä¹‰æ¸…æ™°å®ç°ç®€å•ã€‚
æ‰€ä»¥å…ˆä¸åˆ†æå¤ªå¤šçš„ä¸œè¥¿ï¼Œå°±è¯´è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä¸ªäººå®è·µè®¤ä¸º zk çš„åˆ†å¸ƒå¼é”æ¯” Redis çš„åˆ†å¸ƒå¼é”ç‰¢é ã€è€Œä¸”æ¨¡å‹ç®€å•æ˜“ç”¨ã€‚
å‚è€ƒ ä¸€èˆ¬å®ç°åˆ†å¸ƒå¼é”éƒ½æœ‰å“ªäº›æ–¹å¼ï¼Ÿä½¿ç”¨ Redis å¦‚ä½•è®¾è®¡åˆ†å¸ƒå¼é”ï¼Ÿä½¿ç”¨ zk æ¥è®¾è®¡åˆ†å¸ƒå¼é”å¯ä»¥å—ï¼Ÿè¿™ä¸¤ç§åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼å“ªç§æ•ˆç‡æ¯”è¾ƒé«˜ï¼Ÿ </description>
    </item>
    
    <item>
      <title>Redisé…ç½®æŒ‡å—</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/redis%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</guid>
      <description>1. å®‰è£… $ wget http://download.redis.io/releases/redis-5.0.8.tar.gz $ tar xzf redis-5.0.8.tar.gz $ cd redis-5.0.8 $ make 2.é…ç½®  æ³¨é‡Šæ‰bind 127.0.0.1 protected-mode yes requirepass xxxpassword daemonize yes  3. å¯åŠ¨ cd src ./redis-server æˆ–è€…
cd src ./redis-server ../redis.conf 4. åœæ­¢ cd src ./redis-cli auth xxxpassword shutdown exit 5. å¸è½½ find / -name &amp;#34;redis*&amp;#34; | xargs rm -rf 6.è¿œç¨‹è¿æ¥ windowè¿æ¥è¿œç¨‹redis:
redis-cli -h 193.112.37.xxx -p 6379 -a xxxpassword </description>
    </item>
    
    <item>
      <title>Spring Securityç¬¬ä¸€æ¬¡ç™»å½•å¤±è´¥ï¼Œç¬¬äºŒæ¬¡ç™»å½•æˆåŠŸ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/exception/spring-security%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E7%AC%AC%E4%BA%8C%E6%AC%A1%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/exception/spring-security%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E7%AC%AC%E4%BA%8C%E6%AC%A1%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F/</guid>
      <description>å½“æˆ‘ç¬¬ä¸€æ¬¡ç™»å½•æ—¶æˆ‘ä¼šå¾—åˆ°{&amp;quot; timestamp&amp;quot;ï¼š1481719982036ï¼Œ&amp;quot; status&amp;quot;ï¼š999ï¼Œ&amp;quot; error&amp;quot;ï¼š&amp;quot; None&amp;quot;ï¼Œ&amp;quot; message&amp;quot;ï¼š&amp;quot;æ— å¯ç”¨æ¶ˆæ¯&amp;quot;}ï¼Œä½†ç¬¬äºŒæ¬¡è¿˜å¯ä»¥ã€‚
è§£å†³åŠæ³•ï¼šå¡«å†™å¦‚ä¸‹é…ç½®åˆ°application.properties
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration å‚è€ƒé“¾æ¥ï¼šjava:Spring Securityç¬¬ä¸€æ¬¡ç™»å½•å¤±è´¥ï¼Œç¬¬äºŒæ¬¡ç™»å½•æˆåŠŸ </description>
    </item>
    
    <item>
      <title>SpringAOPæ–¹æ³•å†…éƒ¨è°ƒç”¨ä¸ç”Ÿæ•ˆ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springaop%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8%E4%B8%8D%E7%94%9F%E6%95%88/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springaop%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8%E4%B8%8D%E7%94%9F%E6%95%88/</guid>
      <description>å‡è®¾ä¸€ä¸ªæ¥å£é‡Œé¢æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š
package demo.long; public interface CustomerService { public void doSomething1(); public void doSomething2(); } æ¥å£å®ç°ç±»å¦‚ä¸‹ï¼š
package demo.long.impl; import demo.long.CustomerService; public class CustomerServiceImpl implements CustomerService { public void doSomething1() { System.out.println(&amp;#34;CustomerServiceImpl.doSomething1()&amp;#34;); doSomething2(); } public void doSomething2() { System.out.println(&amp;#34;CustomerServiceImpl.doSomething2()&amp;#34;); } } ç°åœ¨æˆ‘éœ€è¦åœ¨CustomerServiceæ¥å£çš„æ¯ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶éƒ½åœ¨æ–¹æ³•å‰æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä¸€ä¸ªæ‹¦æˆªå™¨ï¼š
package demo.long; import org.aspectj.lang.annotation.Aspect; import org.aspectj.lang.annotation.Before; @Aspect public class CustomerServiceInterceptor { @Before(&amp;#34;execution(* demo.long..*.*(..))&amp;#34;) public void doBefore() { System.out.println(&amp;#34;do some important things before...&amp;#34;); } } æŠŠBeanåŠ åˆ°Springé…ç½®ä¸­
&amp;lt;aop:aspectj-autoproxy /&amp;gt; &amp;lt;bean id=&amp;#34;customerService&amp;#34; class=&amp;#34;demo.long.impl.CustomerServiceImpl&amp;#34; /&amp;gt; &amp;lt;bean id=&amp;#34;customerServiceInterceptor&amp;#34; class=&amp;#34;demo.</description>
    </item>
    
    <item>
      <title>SpringBootä½¿ç”¨QQé‚®ç®±å‘é€é‚®ä»¶é…ç½®</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springboot/springboot%E4%BD%BF%E7%94%A8qq%E9%82%AE%E7%AE%B1%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springboot/springboot%E4%BD%BF%E7%94%A8qq%E9%82%AE%E7%AE%B1%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/</guid>
      <description>ä½¿ç”¨SpringBoot Admin é…ç½®QQé‚®ç®±å»å‘é€é‚®ä»¶æ—¶æŠ¥é”™ï¼šcom.sun.mail.smtp.SMTPSenderFailedException: 501 mail from address must be same as authorization userï¼Œæˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š
spring.mail.host: smtp.qq.com spring.mail.username: å‘é€è´¦å· spring.mail.password: qqæˆæƒç  spring.boot.admin.notify.mail.to: æ¥æ”¶è´¦å· åæ¥åœ¨ç½‘ä¸ŠæŸ¥åˆ°æ˜¯å°‘äº†spring.boot.admin.notify.mail.fromçš„é…ç½®ï¼Œè²Œä¼¼åªæœ‰QQé‚®ç®±æ‰éœ€è¦é¢å¤–åŠ ä¸Šè¿™ä¸ªè®¾ç½®ï¼ˆæœ¬äººæ²¡æœ‰æµ‹è¯•è¿‡ç”¨å…¶ä»–é‚®ç®±å‘é€é‚®ä»¶ï¼‰ã€‚æ‰€ä»¥æœ€ç»ˆé…ç½®å¦‚ä¸‹ï¼š
spring.mail.host: smtp.qq.com spring.mail.username: å‘é€è´¦å· spring.mail.password: qqæˆæƒç  spring.boot.admin.notify.mail.to: æ¥æ”¶è´¦å· spring.boot.admin.notify.mail.from: å‘é€è´¦å· å‚è€ƒï¼š Springboot admin å‘é€é‚®ä»¶å¤±è´¥ï¼šcom.sun.mail.smtp.SMTPSenderFailedException: 553 Mail from must equal authorized user </description>
    </item>
    
    <item>
      <title>SpringMVC</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springmvc/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/springmvc/</guid>
      <description>SpringMVCæ‰§è¡Œæµç¨‹  ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServlet DispatcherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingã€‚ å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨æ‰§è¡Œé“¾HandlerExecutionChain(åŒ…æ‹¬å¤„ç†å™¨å¯¹è±¡å’Œå¤„ç†å™¨æ‹¦æˆªå™¨)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚ DispatcherServletæ ¹æ®å¤„ç†å™¨Handlerè·å–å¤„ç†å™¨é€‚é…å™¨HandlerAdapteræ‰§è¡ŒHandlerAdapterå¤„ç†ä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚ï¼šå‚æ•°å°è£…ï¼Œæ•°æ®æ ¼å¼è½¬æ¢ï¼Œæ•°æ®éªŒè¯ç­‰æ“ä½œ æ‰§è¡Œå¤„ç†å™¨Handler(Controllerï¼Œä¹Ÿå«é¡µé¢æ§åˆ¶å™¨)ã€‚ Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndView HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›åˆ°DispatcherServlet DispatcherServletå°†ModelAndViewä¼ ç»™ViewResloverè§†å›¾è§£æå™¨ ViewResloverè§£æåè¿”å›å…·ä½“View DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®modelå¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚ DispatcherServletå“åº”ç”¨æˆ·ã€‚  ç»„ä»¶è¯´æ˜  DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨ã€‚ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äºmvcæ¨¡å¼ä¸­çš„cï¼ŒdispatcherServletæ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒdispatcherServletçš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§,ç³»ç»Ÿæ‰©å±•æ€§æé«˜ã€‚ç”±æ¡†æ¶å®ç° HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ã€‚HandlerMappingè´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„urlæ‰¾åˆ°Handlerå³å¤„ç†å™¨ï¼Œspringmvcæä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œæ ¹æ®ä¸€å®šçš„è§„åˆ™å»æŸ¥æ‰¾,ä¾‹å¦‚ï¼šxmlé…ç½®æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚ç”±æ¡†æ¶å®ç° Handlerï¼šå¤„ç†å™¨ã€‚Handler æ˜¯ç»§DispatcherServletå‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ç”±äºHandleræ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘Handlerã€‚ HandlAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ã€‚é€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚ç”±æ¡†æ¶å®ç°ã€‚ ModelAndViewæ˜¯springmvcçš„å°è£…å¯¹è±¡ï¼Œå°†modelå’Œviewå°è£…åœ¨ä¸€èµ·ã€‚ ViewResolverï¼šè§†å›¾è§£æå™¨ã€‚ViewResolverè´Ÿè´£å°†å¤„ç†ç»“æœç”ŸæˆViewè§†å›¾ï¼ŒViewResolveré¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”ŸæˆViewè§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹Viewè¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚ View: æ˜¯springmvcçš„å°è£…å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæ¥å£, springmvcæ¡†æ¶æä¾›äº†å¾ˆå¤šçš„Viewè§†å›¾ç±»å‹ï¼ŒåŒ…æ‹¬ï¼šjspviewï¼Œpdfview,jstlViewã€freemarkerViewã€pdfViewç­‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚  å‚è€ƒé“¾æ¥ï¼š SpringMVCæ‰§è¡Œæµç¨‹åŠå·¥ä½œåŸç† Spring MVCã€å…¥é—¨ã€‘å°±è¿™ä¸€ç¯‡ï¼ </description>
    </item>
    
    <item>
      <title>Springäº‹åŠ¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/spring%E4%BA%8B%E5%8A%A1/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/spring%E4%BA%8B%E5%8A%A1/</guid>
      <description>Springäº‹åŠ¡å¯ç®€å•çš„ç†è§£ä¸ºç”±PlatformTransactionManager, TransactionDefinition, TransactionStatus æ„æˆ
PlatformTransactionManager å…¶ä¸­ org.springframework.transaction.PlatformTransactionManager æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š
public interface PlatformTransactionManager extends TransactionManager { // Return a currently active transaction or create a new one, according to the specified propagation behaviorï¼ˆæ ¹æ®æŒ‡å®šçš„ä¼ æ’­è¡Œä¸ºï¼Œè¿”å›å½“å‰æ´»åŠ¨çš„äº‹åŠ¡æˆ–åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ã€‚ï¼‰  TransactionStatus getTransaction(TransactionDefinition definition) throws TransactionException; // Commit the given transaction, with regard to its statusï¼ˆä½¿ç”¨äº‹åŠ¡ç›®å‰çš„çŠ¶æ€æäº¤äº‹åŠ¡ï¼‰  Void commit(TransactionStatus status) throws TransactionException; // Perform a rollback of the given transactionï¼ˆå¯¹æ‰§è¡Œçš„äº‹åŠ¡è¿›è¡Œå›æ»šï¼‰  Void rollback(TransactionStatus status) throws TransactionException; } Springå¹¶ä¸ç›´æ¥ç®¡ç†äº‹åŠ¡ï¼Œå®ƒåªæä¾›æ¥å£æŠ½è±¡ï¼Œäº‹åŠ¡ç®¡ç†å™¨çš„å…·ä½“å®ç°ç”±æŒä¹…åŒ–æ¡†æ¶è‡ªå·±å®ç°ï¼Œä¾‹å¦‚ï¼šDataSourceTransactionManager (JDBC / MyBatis),</description>
    </item>
    
    <item>
      <title>Springä¼˜é›…çš„å¼‚å¸¸å¤„ç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/spring%E4%BC%98%E9%9B%85%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/spring%E4%BC%98%E9%9B%85%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</guid>
      <description>SpringBootçš„WEBå¼‚å¸¸æ•è·ï¼Œå¦‚æœæ˜¯WEBé¡¹ç›®çš„è¯ï¼Œå¯ä»¥ç›´æ¥å¤„ç†Controllerä¸­çš„å¼‚å¸¸ã€‚å¦‚æœä¸æ˜¯WEBé¡¹ç›®çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨AspectJæ¥åšåˆ‡é¢ã€‚
1. webé¡¹ç›® package com.test.handler; import lombok.extern.log4j.Log4j2; import org.springframework.ui.Model; import org.springframework.web.bind.annotation.ControllerAdvice; import org.springframework.web.bind.annotation.ExceptionHandler; @ControllerAdvice @Log4j2 public class GlobalExceptionHandler { @ExceptionHandler(value = Exception.class) public String exception(Exception e, Model model){ log.error(&amp;#34;find exception:e={}&amp;#34;,e.getMessage()); model.addAttribute(&amp;#34;mes&amp;#34;,e.getMessage()); return &amp;#34;pages/500&amp;#34;; } } å‚è€ƒé“¾æ¥ï¼š
SpringBootWEBé¡¹ç›®å’ŒéWebé¡¹ç›®çš„å…¨å±€å¼‚å¸¸æ•è· SpringBoot å¤„ç†å¼‚å¸¸çš„å‡ ç§å¸¸è§å§¿åŠ¿ ä½¿ç”¨æšä¸¾ç®€å•å°è£…ä¸€ä¸ªä¼˜é›…çš„ Spring Boot å…¨å±€å¼‚å¸¸å¤„ç†ï¼ 2. éwebé¡¹ç›® package com.test.syncbackend.handler; import lombok.extern.log4j.Log4j2; import org.aspectj.lang.ProceedingJoinPoint; import org.aspectj.lang.annotation.Around; import org.aspectj.lang.annotation.Aspect; import org.aspectj.lang.annotation.Pointcut; import org.springframework.stereotype.Component; @Component @Aspect @Log4j2 public class GlobalExceptionHandler { @Pointcut(&amp;#34;execution(* com.test.syncbackend.scheduleds.*.*(..))&amp;#34;) public void pointCut() { } @Around(&amp;#34;pointCut()&amp;#34;) public Object handlerException(ProceedingJoinPoint proceedingJoinPoint) { try { return proceedingJoinPoint.</description>
    </item>
    
    <item>
      <title>SSL/TLSåè®®</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/ssl-tls%E5%8D%8F%E8%AE%AE/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/ssl-tls%E5%8D%8F%E8%AE%AE/</guid>
      <description>å‚è€ƒé“¾æ¥
http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html </description>
    </item>
    
    <item>
      <title>TCPåè®®</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/tcp%E5%8D%8F%E8%AE%AE/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/tcp%E5%8D%8F%E8%AE%AE/</guid>
      <description>ç®€ä»‹ æ•°æ®åœ¨TCPå±‚ç§°ä¸ºæµï¼ˆStreamï¼‰ï¼Œæ•°æ®åˆ†ç»„ç§°ä¸ºåˆ†æ®µï¼ˆSegmentï¼‰ã€‚ä½œä¸ºæ¯”è¾ƒï¼Œæ•°æ®åœ¨IPå±‚ç§°ä¸ºDatagramï¼Œæ•°æ®åˆ†ç»„ç§°ä¸ºåˆ†ç‰‡ï¼ˆFragmentï¼‰ã€‚ UDP ä¸­åˆ†ç»„ç§°ä¸ºMessageã€‚
TCP æ•°æ®åŒ…çš„å¤§å° ä»¥å¤ªç½‘æ•°æ®åŒ…ï¼ˆpacketï¼‰çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæœ€åˆæ˜¯1518å­—èŠ‚ï¼Œåæ¥å¢åŠ åˆ°1522å­—èŠ‚ã€‚å…¶ä¸­ï¼Œ 1500 å­—èŠ‚æ˜¯è´Ÿè½½ï¼ˆpayloadï¼‰ï¼Œ22å­—èŠ‚æ˜¯å¤´ä¿¡æ¯ï¼ˆheadï¼‰ã€‚ IP æ•°æ®åŒ…åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…çš„è´Ÿè½½é‡Œé¢ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„å¤´ä¿¡æ¯ï¼Œæœ€å°‘éœ€è¦20å­—èŠ‚ï¼Œæ‰€ä»¥ IP æ•°æ®åŒ…çš„è´Ÿè½½æœ€å¤šä¸º1480å­—èŠ‚ã€‚
ï¼ˆå›¾ç‰‡è¯´æ˜ï¼šIP æ•°æ®åŒ…åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œé¢ï¼ŒTCP æ•°æ®åŒ…åœ¨ IP æ•°æ®åŒ…é‡Œé¢ã€‚)
TCP æ•°æ®åŒ…åœ¨ IP æ•°æ®åŒ…çš„è´Ÿè½½é‡Œé¢ã€‚å®ƒçš„å¤´ä¿¡æ¯æœ€å°‘ä¹Ÿéœ€è¦20å­—èŠ‚ï¼Œå› æ­¤ TCP æ•°æ®åŒ…çš„æœ€å¤§è´Ÿè½½æ˜¯ 1480 - 20 = 1460 å­—èŠ‚ã€‚ç”±äº IP å’Œ TCP åè®®å¾€å¾€æœ‰é¢å¤–çš„å¤´ä¿¡æ¯ï¼Œæ‰€ä»¥ TCP è´Ÿè½½å®é™…ä¸º1400å­—èŠ‚å·¦å³ã€‚
å› æ­¤ï¼Œä¸€æ¡1500å­—èŠ‚çš„ä¿¡æ¯éœ€è¦ä¸¤ä¸ª TCP æ•°æ®åŒ…ã€‚HTTP/2 åè®®çš„ä¸€å¤§æ”¹è¿›ï¼Œ å°±æ˜¯å‹ç¼© HTTP åè®®çš„å¤´ä¿¡æ¯ï¼Œä½¿å¾—ä¸€ä¸ª HTTP è¯·æ±‚å¯ä»¥æ”¾åœ¨ä¸€ä¸ª TCP æ•°æ®åŒ…é‡Œé¢ï¼Œè€Œä¸æ˜¯åˆ†æˆå¤šä¸ªï¼Œè¿™æ ·å°±æé«˜äº†é€Ÿåº¦ã€‚
åˆ›å»ºè¿æ¥ TCPç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼ˆæˆ–ç§°ä¸‰è·¯æ¡æ‰‹ï¼Œthree-way handshakeï¼‰è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªè¿æ¥ã€‚åœ¨è¿æ¥åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå‚æ•°è¦è¢«åˆå§‹åŒ–ï¼Œä¾‹å¦‚åºå·è¢«åˆå§‹åŒ–ä»¥ä¿è¯æŒ‰åºä¼ è¾“å’Œè¿æ¥çš„å¼ºå£®æ€§ã€‚ ä¸€å¯¹ç»ˆç«¯åŒæ—¶åˆå§‹åŒ–ä¸€ä¸ªå®ƒä»¬ä¹‹é—´çš„è¿æ¥æ˜¯å¯èƒ½çš„ã€‚ä½†é€šå¸¸æ˜¯ç”±ä¸€ç«¯æ‰“å¼€ä¸€ä¸ªå¥—æ¥å­— ï¼ˆsocket ï¼‰ç„¶åç›‘å¬æ¥è‡ªå¦ä¸€æ–¹çš„è¿æ¥ï¼Œè¿™å°±æ˜¯é€šå¸¸æ‰€æŒ‡çš„è¢«åŠ¨æ‰“å¼€ï¼ˆpassive openï¼‰ã€‚æœåŠ¡å™¨ç«¯è¢«è¢«åŠ¨æ‰“å¼€ä»¥åï¼Œç”¨æˆ·ç«¯å°±èƒ½å¼€å§‹åˆ›å»ºä¸»åŠ¨æ‰“å¼€ï¼ˆactive openï¼‰ã€‚
 å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•°Aã€‚ æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACKçš„ç¡®è®¤ç åº”ä¸ºA+1ï¼ŒSYN/ACKåŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºäº§ç”Ÿçš„åºå·Bã€‚ æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚æ­¤æ—¶åŒ…çš„åºå·è¢«è®¾å®šä¸ºA+1ï¼Œè€ŒACKçš„ç¡®è®¤ç åˆ™ä¸ºB+1ã€‚å½“æœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚  æ³¨æ„ï¼šä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ SYN/ACK æ˜¯ä¸€ä¸ªæ•°æ®åŒ…å‘é€å‡ºå»çš„
æ³¨æ„ï¼šä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ SYN/ACK æ˜¯ä¸€ä¸ªæ•°æ®åŒ…å‘é€å‡ºå»çš„
å¦‚æœæœåŠ¡å™¨ç«¯æ¥åˆ°äº†å®¢æˆ·ç«¯å‘çš„SYNåå›äº†SYN-ACKåå®¢æˆ·ç«¯æ‰çº¿äº†ï¼ŒæœåŠ¡å™¨ç«¯æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯å›æ¥çš„ACKï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªè¿æ¥å¤„äºä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼Œå³æ²¡æˆåŠŸï¼Œä¹Ÿæ²¡å¤±è´¥ã€‚äºæ˜¯ï¼ŒæœåŠ¡å™¨ç«¯å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°çš„TCPä¼šé‡å‘SYN-ACKã€‚åœ¨Linuxä¸‹ï¼Œé»˜è®¤é‡è¯•æ¬¡æ•°ä¸º5æ¬¡ï¼Œé‡è¯•çš„é—´éš”æ—¶é—´ä»1så¼€å§‹æ¯æ¬¡éƒ½ç¿»å€ï¼Œ5æ¬¡çš„é‡è¯•æ—¶é—´é—´éš”ä¸º1s, 2s, 4s, 8s, 16sï¼Œæ€»å…±31sï¼Œç¬¬5æ¬¡å‘å‡ºåè¿˜è¦ç­‰32sæ‰çŸ¥é“ç¬¬5æ¬¡ä¹Ÿè¶…æ—¶äº†ï¼Œæ‰€ä»¥ï¼Œæ€»å…±éœ€è¦ 1s + 2s + 4s+ 8s+ 16s + 32s = 63sï¼ŒTCPæ‰ä¼šæ–­å¼€è¿™ä¸ªè¿æ¥ã€‚ä½¿ç”¨ä¸‰ä¸ªTCPå‚æ•°æ¥è°ƒæ•´è¡Œä¸ºï¼štcp_synack_retries å‡å°‘é‡è¯•æ¬¡æ•°ï¼›tcp_max_syn_backlogï¼Œå¢å¤§SYNè¿æ¥æ•°ï¼›tcp_abort_on_overflowå†³å®šè¶…å‡ºèƒ½åŠ›æ—¶çš„è¡Œä¸ºã€‚</description>
    </item>
    
    <item>
      <title>TCPå¸¸è§çŸ¥è¯†ç‚¹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/tcp%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86%E7%82%B9/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/tcp/tcp%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86%E7%82%B9/</guid>
      <description>1. å‰è¨€ ç½‘ç»œå±‚åªæŠŠåˆ†ç»„å‘é€åˆ°ç›®çš„ä¸»æœºï¼Œä½†æ˜¯çœŸæ­£é€šä¿¡çš„å¹¶ä¸æ˜¯ä¸»æœºè€Œæ˜¯ä¸»æœºä¸­çš„è¿›ç¨‹ã€‚ä¼ è¾“å±‚æä¾›äº†è¿›ç¨‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œä¼ è¾“å±‚å‘é«˜å±‚ç”¨æˆ·å±è”½äº†ä¸‹é¢ç½‘ç»œå±‚çš„æ ¸å¿ƒç»†èŠ‚ï¼Œä½¿åº”ç”¨ç¨‹åºçœ‹èµ·æ¥åƒæ˜¯åœ¨ä¸¤ä¸ªä¼ è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ã€‚
UDP å’Œ TCP çš„ç‰¹ç‚¹ä¸åŒºåˆ« ç”¨æˆ·æ•°æ®æŠ¥åè®® UDPï¼ˆUser Datagram Protocolï¼‰ æ˜¯æ— è¿æ¥çš„ï¼Œå°½æœ€å¤§å¯èƒ½äº¤ä»˜ï¼Œæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œé¢å‘æŠ¥æ–‡ï¼ˆå¯¹äºåº”ç”¨ç¨‹åºä¼ ä¸‹æ¥çš„æŠ¥æ–‡ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œåªæ˜¯æ·»åŠ  UDP é¦–éƒ¨ï¼‰ï¼Œæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚
ä¼ è¾“æ§åˆ¶åè®® TCPï¼ˆTransmission Control Protocolï¼‰ æ˜¯é¢å‘è¿æ¥çš„ï¼Œæä¾›å¯é äº¤ä»˜ï¼Œæœ‰æµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ï¼Œæä¾›å…¨åŒå·¥é€šä¿¡ï¼Œé¢å‘å­—èŠ‚æµï¼ˆæŠŠåº”ç”¨å±‚ä¼ ä¸‹æ¥çš„æŠ¥æ–‡çœ‹æˆå­—èŠ‚æµï¼ŒæŠŠå­—èŠ‚æµç»„ç»‡æˆå¤§å°ä¸ç­‰çš„æ•°æ®å—ï¼‰ï¼Œæ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€‚
2. UDP TCP é¦–éƒ¨æ ¼å¼ UDP é¦–éƒ¨å­—æ®µåªæœ‰ 8 ä¸ªå­—èŠ‚ï¼ŒåŒ…æ‹¬æºç«¯å£ã€ç›®çš„ç«¯å£ã€é•¿åº¦ã€æ£€éªŒå’Œã€‚12 å­—èŠ‚çš„ä¼ªé¦–éƒ¨æ˜¯ä¸ºäº†è®¡ç®—æ£€éªŒå’Œä¸´æ—¶æ·»åŠ çš„ã€‚
TCP é¦–éƒ¨æ ¼å¼æ¯” UDP å¤æ‚ã€‚
åºå·ï¼šç”¨äºå¯¹å­—èŠ‚æµè¿›è¡Œç¼–å·ï¼Œä¾‹å¦‚åºå·ä¸º 301ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ä¸º 301ï¼Œå¦‚æœæºå¸¦çš„æ•°æ®é•¿åº¦ä¸º 100 å­—èŠ‚ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·åº”ä¸º 401ã€‚
ç¡®è®¤å·ï¼šæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ã€‚ä¾‹å¦‚ B æ­£ç¡®æ”¶åˆ° A å‘é€æ¥çš„ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œåºå·ä¸º 501ï¼Œæºå¸¦çš„æ•°æ®é•¿åº¦ä¸º 200 å­—èŠ‚ï¼Œå› æ­¤ B æœŸæœ›ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º 701ï¼ŒB å‘é€ç»™ A çš„ç¡®è®¤æŠ¥æ–‡æ®µä¸­ç¡®è®¤å·å°±ä¸º 701ã€‚
æ•°æ®åç§»ï¼šæŒ‡çš„æ˜¯æ•°æ®éƒ¨åˆ†è·ç¦»æŠ¥æ–‡æ®µèµ·å§‹å¤„çš„åç§»é‡ï¼Œå®é™…ä¸ŠæŒ‡çš„æ˜¯é¦–éƒ¨çš„é•¿åº¦ã€‚
æ§åˆ¶ä½ï¼šå…«ä½ä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ CWRï¼ŒECEï¼ŒURGï¼ŒACKï¼ŒPSHï¼ŒRSTï¼ŒSYNï¼ŒFINã€‚
CWRï¼šCWR æ ‡å¿—ä¸åé¢çš„ ECE æ ‡å¿—éƒ½ç”¨äº IP é¦–éƒ¨çš„ ECN å­—æ®µï¼ŒECE æ ‡å¿—ä¸º 1 æ—¶ï¼Œåˆ™é€šçŸ¥å¯¹æ–¹å·²å°†æ‹¥å¡çª—å£ç¼©å°ï¼›
ECEï¼šè‹¥å…¶å€¼ä¸º 1 åˆ™ä¼šé€šçŸ¥å¯¹æ–¹ï¼Œä»å¯¹æ–¹åˆ°è¿™è¾¹çš„ç½‘ç»œæœ‰é˜»å¡ã€‚åœ¨æ”¶åˆ°æ•°æ®åŒ…çš„ IP é¦–éƒ¨ä¸­ ECN ä¸º 1 æ—¶å°† TCP é¦–éƒ¨ä¸­çš„ ECE è®¾ä¸º 1ï¼›</description>
    </item>
    
    <item>
      <title>ThreadLocal</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadlocal/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadlocal/</guid>
      <description>ThreadLocal æ˜¯ä¸€ä¸ªçº¿ç¨‹çš„æœ¬åœ°å˜é‡ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªå˜é‡æ˜¯çº¿ç¨‹ç‹¬æœ‰çš„ï¼Œæ˜¯ä¸èƒ½ä¸å…¶ä»–çº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…èµ„æºç«äº‰å¸¦æ¥çš„å¤šçº¿ç¨‹çš„é—®é¢˜ï¼Œè¿™ç§è§£å†³å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜å’Œlock(è¿™é‡Œçš„lock æŒ‡é€šè¿‡synchronized æˆ–è€…Lock ç­‰å®ç°çš„é”) æ˜¯æœ‰æœ¬è´¨çš„åŒºåˆ«çš„:
 lock çš„èµ„æºæ˜¯å¤šä¸ªçº¿ç¨‹å…±äº«çš„ï¼Œæ‰€ä»¥è®¿é—®çš„æ—¶å€™éœ€è¦åŠ é”ã€‚ ThreadLocal æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œæ˜¯ä¸éœ€è¦åŠ é”çš„ã€‚ lock æ˜¯é€šè¿‡æ—¶é—´æ¢ç©ºé—´çš„åšæ³•ã€‚ ThreadLocal æ˜¯å…¸å‹çš„é€šè¿‡ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ã€‚  å½“ç„¶ä»–ä»¬çš„ä½¿ç”¨åœºæ™¯ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå…³é”®çœ‹ä½ çš„èµ„æºæ˜¯éœ€è¦å¤šçº¿ç¨‹ä¹‹é—´å…±äº«çš„è¿˜æ˜¯å•çº¿ç¨‹å†…éƒ¨å…±äº«çš„ã€‚
ThreadLocal çš„ä½¿ç”¨æ˜¯éå¸¸ç®€å•çš„ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š
public class Test { public static void main(String[] args) { ThreadLocal&amp;lt;String&amp;gt; local = new ThreadLocal&amp;lt;&amp;gt;(); //è®¾ç½®å€¼  local.set(&amp;#34;hello word&amp;#34;); //è·å–åˆšåˆšè®¾ç½®çš„å€¼  System.out.println(local.get()); } } ThreadLocalçš„æ•°æ®ç»“æ„ ä¸ºä»€ä¹ˆThreadLocalMap é‡‡ç”¨å¼€æ”¾åœ°å€æ³•æ¥è§£å†³å“ˆå¸Œå†²çª? ThreadLocal å¾€å¾€å­˜æ”¾çš„æ•°æ®é‡ä¸ä¼šç‰¹åˆ«å¤§ï¼Œè¿™ä¸ªæ—¶å€™å¼€æ”¾åœ°å€æ³•ç®€å•çš„ç»“æ„ä¼šæ˜¾å¾—æ›´çœç©ºé—´ï¼ˆé“¾åœ°å€æ³•éœ€è¦é¢å¤–çš„æŒ‡é’ˆç©ºé—´ï¼‰
å¸¸ç”¨çš„hashè§£å†³æ–¹æ³•æœ‰ï¼šæ‹‰é“¾æ³•ï¼ˆHashMapï¼ŒæŒ‡é’ˆéœ€è¦å ç”¨ç©ºé—´ï¼‰ã€å¼€å‘åœ°å€ï¼ˆå¦‚æœå‘ç”Ÿå†²çªï¼Œé‚£å°±åŸºäºå†²çªä½ç½®å†æ¬¡æ¢æµ‹å¯»å€ï¼Œç›´è‡³ä¸å†²çªï¼Œé€‚ç”¨äºè®°å½•æ€»æ•°å¯ä»¥é¢„çŸ¥çš„åœºæ™¯ï¼Œå¦‚æœä½æ¡¶ä¸å¤Ÿç”¨å°±å¾—æ‰©å®¹ï¼Œæ‰©å®¹å½±å“æ€§èƒ½ï¼‰ã€å†hashï¼ˆå¦‚æœç¬¬1ä¸ªhashå‡½æ•°å†²çªï¼Œé‚£å°±ä½¿ç”¨ç¬¬2ä¸ªï¼Œå¤šæ¬¡hashæ˜¯æœ‰æ—¶é—´æˆæœ¬çš„ï¼‰
ThreadLocalåº”ç”¨åœºæ™¯ ä¼ é€’å‚æ•° ThreadLocalç”¨äºä¼ é€’å‚æ•°åŠä¼˜åŠ¿ ä¿è¯çº¿ç¨‹å®‰å…¨ SimpleDateFormatæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„å†™æ³•ä¼šæŠ¥é”™ï¼š
æ—¥æœŸè½¬æ¢çš„ä¸€ä¸ªå·¥å…·ç±»
public class DateUtil { private static final SimpleDateFormat sdf = new SimpleDateFormat(&amp;#34;yyyy-MM-dd HH:mm:ss&amp;#34;); public static Date parse(String dateStr) { Date date = null; try { date = sdf.</description>
    </item>
    
    <item>
      <title>ThreadLocalçº¿ç¨‹å•ä¾‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadlocal%E7%BA%BF%E7%A8%8B%E5%8D%95%E4%BE%8B/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadlocal%E7%BA%BF%E7%A8%8B%E5%8D%95%E4%BE%8B/</guid>
      <description>ThreadLocal ä¿è¯çš„æ˜¯å•ä¸ªçº¿ç¨‹å†…éƒ¨è®¿é—®çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œä¸åŒçº¿ç¨‹è®¿é—®çš„ä¸æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚
package test; public class Singleton { private static final ThreadLocal&amp;lt;Singleton&amp;gt; singleton = new ThreadLocal&amp;lt;Singleton&amp;gt;() { @Override protected Singleton initialValue() { return new Singleton(); } }; public static Singleton getInstance() { return singleton.get(); } private Singleton() { } } package test; public class T implements Runnable { @Override public void run() { Singleton instance = Singleton.getInstance(); System.out.println(instance); } } æµ‹è¯•ç±»ï¼š
package test; public class Test { public static void main(String[] args){ System.</description>
    </item>
    
    <item>
      <title>ThreadPoolExecutor</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadpoolexecutor/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/threadpoolexecutor/</guid>
      <description>å¦‚æœé‡‡ç”¨æœ‰ç•ŒBlockingQueueï¼Œé˜Ÿåˆ—æ»¡åå¯ç”¨maximumPoolSizeï¼Œè¾¾åˆ°maximumPoolSizeä¸Šé™åèµ°RejectedExecutionHandlerçš„é€»è¾‘ï¼›å¦‚æœé‡‡ç”¨æ— ç•ŒBlockingQueueï¼ŒmaximumPoolSizeè®¾ç½®æ— æ•ˆã€‚
æ„é€ æ–¹æ³• public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&amp;lt;Runnable&amp;gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) { if (corePoolSize &amp;lt; 0 || maximumPoolSize &amp;lt;= 0 || maximumPoolSize &amp;lt; corePoolSize || keepAliveTime &amp;lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.acc = System.getSecurityManager() == null ? null : AccessController.getContext(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.</description>
    </item>
    
    <item>
      <title>Ubuntuä¿®æ”¹ip</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/ubuntu%E4%BF%AE%E6%94%B9ip/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/ubuntu%E4%BF%AE%E6%94%B9ip/</guid>
      <description>Ubuntuä¿®æ”¹ip
æ–¹å¼ä¸€ è¿™ç§æ–¹å¼å¯ä»¥ä¿®æ”¹ipåœ°å€ï¼Œä¸èƒ½è®¿é—®äº’è”ç½‘ï¼›è™šæ‹Ÿæœº100å¿…é¡»ä»¥è¿™ç§æ–¹å¼é…ç½®ï¼ˆ101ã€102ã€103æ˜¯å¤åˆ¶100è€Œæ¥ï¼‰
1ã€sudo vi /etc/netplan/50-cloud-init.yaml
network: ethernets: enp0s3: addresses: [10.0.2.15/24] dhcp4: true enp0s8: addresses: [192.168.56.100/24] dhcp4: false version: 2 2ã€é‡å¯è™šæ‹Ÿæœº
æ–¹å¼äºŒ è¿™ç§æ–¹å¼å¯ä»¥ä¿®æ”¹ipåœ°å€ï¼Œèƒ½è®¿é—®äº’è”ç½‘ï¼›è™šæ‹Ÿæœº101ã€102ã€103ä»¥è¿™ç§æ–¹å¼é…ç½®
1ã€æ³¨é‡Š50-cloud-init.yamlé‡Œé¢çš„ä¿®æ”¹
2ã€sudo vim /etc/network/interfaces
# This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface(NAT) auto enp0s3 iface enp0s3 inet dhcp # å¢åŠ çš„Host-onlyé™æ€IPè®¾ç½® (enp0s8 æ˜¯æ ¹æ®æ‹“æ‰‘å…³ç³»æ˜ å°„çš„ç½‘å¡åç§°ï¼ˆæ—§è§„åˆ™æ˜¯eth0,eth1ï¼‰) # å¯ä»¥é€šè¿‡ ```ls /sys/class/net```æŸ¥çœ‹ï¼Œæ˜¯å¦ä¸ºenp0s8 auto enp0s8 iface enp0s8 inet static address 192.</description>
    </item>
    
    <item>
      <title>Ubuntuä¿®æ”¹åŸŸåè§£æ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/ubuntu%E4%BF%AE%E6%94%B9%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/ubuntu%E4%BF%AE%E6%94%B9%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/</guid>
      <description>1ã€vim /etc/resolv.conf
nameserver 8.8.8.8 nameserver 114.114.114.114 nameserver 1.2.4.8 2ã€vim /etc/network/interfaces
dns-nameserver 8.8.8.8 dns-nameserver 114.114.114.114 dns-nameserver 1.2.4.8 3ã€/etc/init.d/networking restart</description>
    </item>
    
    <item>
      <title>woocommerce_rest_authentication_error</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/woocommerce_rest_authentication_error/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/woocommerce_rest_authentication_error/</guid>
      <description>woocommerce_rest_authentication_error
nginxé…ç½®é”™è¯¯å¯¼è‡´woocommerce REST APIä¸å¯ç”¨
It was a bad configuration of try_files in nginx:
WRONG
try_files $uri $uri/ /index.php?q=$uri&amp;amp;$args; CORRECT
try_files $uri $uri/ /index.php$is_args$args; After changing that everything works perfectly ^^
å‚è€ƒï¼š woocommerce_rest_authentication_error on localhost </description>
    </item>
    
    <item>
      <title>WordPress å®‰è£…æ’ä»¶ cURL error 77è§£å†³</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-curl-error-77%E8%A7%A3%E5%86%B3/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-curl-error-77%E8%A7%A3%E5%86%B3/</guid>
      <description>WordPress å®‰è£…æ’ä»¶ cURL error 77è§£å†³
ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œå‘½ä»¤
yum install ca-certificates ç¬¬äºŒæ­¥ï¼šé‡å¯php-fpm
/etc/init.d/php-fpm restart </description>
    </item>
    
    <item>
      <title>WordPressæ”¹é€ æˆhttpsçš„æ³¨æ„äº‹é¡¹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%94%B9%E9%80%A0%E6%88%90https%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%94%B9%E9%80%A0%E6%88%90https%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</guid>
      <description>WordPressæ”¹é€ æˆhttpsçš„æ³¨æ„äº‹é¡¹
WordPressåŠ å…¥sslåå¯èƒ½å‡ºç°çš„ç½‘ç«™è®¿é—®ç¼“æ…¢ã€æ ·å¼æ— æ³•è¢«åŠ è½½ï¼Œæ˜¯ç”±äºç«™ç‚¹è™½ç„¶è¢«æ”¹é€ æˆäº†httpsè®¿é—®ï¼Œä½†æ˜¯ WordPress ä»£ç å±‚é¢å¯¹äºä¸€äº›cssã€jsã€å›¾ç‰‡ç­‰é™æ€èµ„æºçš„è®¿é—®è¿˜æ˜¯httpçš„ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚è§£å†³çš„åŠæ³•å¯ä»¥æ”¹é€ ä»£ç ï¼Œä¹Ÿå¯ä»¥å®‰è£…WordPressæ’ä»¶ã€‚ä¸‹é¢ä»‹ç»åè€…çš„æ­¥éª¤ï¼š
1ã€ç”³è¯·è¯ä¹¦ã€ä¸Šä¼ è¯ä¹¦åˆ°æœåŠ¡å™¨ã€é…ç½®æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘æœ‰å…è´¹çš„è¯ä¹¦ï¼Œå¹¶æœ‰è¯¦ç»†çš„æ“ä½œæ­¥éª¤ï¼‰
2ã€å®‰è£… Really Simple SSLæ’ä»¶ï¼Œå®ƒä¼šå°†httpçš„è¯·æ±‚å…¨éƒ½è½¬æˆhttpsï¼ˆæ„Ÿè°¢ä½œè€…å§ï¼‰
3ã€ åå°ä¿®æ”¹wordpressåœ°å€å’Œç«™ç‚¹åœ°å€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
å‚è€ƒé“¾æ¥ï¼šhttps://www.rogoso.info/wordpress-ssl/</description>
    </item>
    
    <item>
      <title>wordpressæ–‡ç« å‘å¸ƒåï¼ŒnginxæŠ¥404è§£å†³æ–¹æ³•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%90%8Enginx%E6%8A%A5404%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%90%8Enginx%E6%8A%A5404%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid>
      <description>wordpressæ–‡ç« å‘å¸ƒåï¼ŒnginxæŠ¥404è§£å†³æ–¹æ³•
ä¿®æ”¹nginx.confæ–‡ä»¶ï¼Œåœ¨location /èŠ‚ç‚¹ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š
location / { try_files $uri $uri/ /index.php?q=$uri&amp;amp;$args; } ç„¶åé‡å¯nginxå³å¯è§£å†³ã€‚</description>
    </item>
    
    <item>
      <title>WordPressæ›´æ¢åŸŸå</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%9B%B4%E6%8D%A2%E5%9F%9F%E5%90%8D/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/wordpress/wordpress%E6%9B%B4%E6%8D%A2%E5%9F%9F%E5%90%8D/</guid>
      <description>WordPressæ›´æ¢åŸŸå
åœ¨æ›´æ¢çš„åŸŸåè¿‡ç¨‹ä¸­é‡åˆ°å¾ˆå¤šå‘ï¼Œä¸»è¦è¿˜æ˜¯æˆ‘çš„æ¶æ„æ¯”è¾ƒç‰¹æ®Šçš„åŸå› ï¼Œå¯¼è‡´è·Ÿä»¥å¾€é…ç½®ä¸å¤ªä¸€æ ·ï¼Œæ¶æ„å¦‚ä¸‹ï¼š
 1. æ— æ³•é€šè¿‡nginxè½¬å‘è¯·æ±‚åˆ°å®¹å™¨ç«¯å£ åŸå› ï¼šnginxé…ç½®ä¸æ­£ç¡®
è§£å†³ï¼šè¡¥å……ç¼ºå¤±çš„å¦‚ä¸‹é…ç½®
add_header X-Frame-Options SAMEORIGIN; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_hide_header X-Frame-Options; æœ€ç»ˆç±»ä¼¼ï¼š
server { listen 443 ssl; listen [::]:443 ssl; include snippets/ssl-params.conf; server_name wptest.your-awesome-domain.com; # domainç•¶ç„¶è¦ç”¨è‡ªå·±çš„ï¼Œsubdomainè«‹éš¨è‡ªå·±å–œå¥½ location / { add_header X-Frame-Options SAMEORIGIN; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_hide_header X-Frame-Options; proxy_pass http://localhost:8000; # æ³¨æ„é€™é‚Šè·Ÿä¸Šé¢docker-composeè¨­å®šçš„portç›¸åŒ } } 2. æç¤ºâ€œé‡å®šå‘æ¬¡æ•°è¿‡å¤šâ€ ä¿®æ”¹wordpressæ ¹ç›®å½•ä¸‹çš„wp-config.phpï¼š
$_SERVER[&amp;#39;HTTPS&amp;#39;] = &amp;#39;on&amp;#39;; define(&amp;#39;FORCE_SSL_LOGIN&amp;#39;, true); define(&amp;#39;FORCE_SSL_ADMIN&amp;#39;, true); å‚è€ƒé“¾æ¥ï¼š https://softman.</description>
    </item>
    
    <item>
      <title>Zookeeperåº”ç”¨åœºæ™¯</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</guid>
      <description>å¤§è‡´æ¥è¯´ï¼Œzookeeper çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼Œæˆ‘å°±ä¸¾å‡ ä¸ªç®€å•çš„ï¼Œå¤§å®¶èƒ½è¯´å‡ ä¸ªå°±å¥½äº†ï¼š
 åˆ†å¸ƒå¼åè°ƒ åˆ†å¸ƒå¼é” å…ƒæ•°æ®/é…ç½®ä¿¡æ¯ç®¡ç† HA é«˜å¯ç”¨æ€§  åˆ†å¸ƒå¼åè°ƒ è¿™ä¸ªå…¶å®æ˜¯ zookeeper å¾ˆç»å…¸çš„ä¸€ä¸ªç”¨æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±å¥½æ¯”ï¼Œä½  A ç³»ç»Ÿå‘é€ä¸ªè¯·æ±‚åˆ° mqï¼Œç„¶å B ç³»ç»Ÿæ¶ˆæ¯æ¶ˆè´¹ä¹‹åå¤„ç†äº†ã€‚é‚£ A ç³»ç»Ÿå¦‚ä½•çŸ¥é“ B ç³»ç»Ÿçš„å¤„ç†ç»“æœï¼Ÿç”¨ zookeeper å°±å¯ä»¥å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„åè°ƒå·¥ä½œã€‚A ç³»ç»Ÿå‘é€è¯·æ±‚ä¹‹åå¯ä»¥åœ¨ zookeeper ä¸Šå¯¹æŸä¸ªèŠ‚ç‚¹çš„å€¼æ³¨å†Œä¸ªç›‘å¬å™¨ï¼Œä¸€æ—¦ B ç³»ç»Ÿå¤„ç†å®Œäº†å°±ä¿®æ”¹ zookeeper é‚£ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ŒA ç³»ç»Ÿç«‹é©¬å°±å¯ä»¥æ”¶åˆ°é€šçŸ¥ï¼Œå®Œç¾è§£å†³ã€‚
åˆ†å¸ƒå¼é” ä¸¾ä¸ªæ —å­ã€‚å¯¹æŸä¸€ä¸ªæ•°æ®è¿ç»­å‘å‡ºä¸¤ä¸ªä¿®æ”¹æ“ä½œï¼Œä¸¤å°æœºå™¨åŒæ—¶æ”¶åˆ°äº†è¯·æ±‚ï¼Œä½†æ˜¯åªèƒ½ä¸€å°æœºå™¨å…ˆæ‰§è¡Œå®Œå¦å¤–ä¸€ä¸ªæœºå™¨å†æ‰§è¡Œã€‚é‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ zookeeper åˆ†å¸ƒå¼é”ï¼Œä¸€ä¸ªæœºå™¨æ¥æ”¶åˆ°äº†è¯·æ±‚ä¹‹åå…ˆè·å– zookeeper ä¸Šçš„ä¸€æŠŠåˆ†å¸ƒå¼é”ï¼Œå°±æ˜¯å¯ä»¥å»åˆ›å»ºä¸€ä¸ª znodeï¼Œæ¥ç€æ‰§è¡Œæ“ä½œï¼›ç„¶åå¦å¤–ä¸€ä¸ªæœºå™¨ä¹Ÿå°è¯•å»åˆ›å»ºé‚£ä¸ª znodeï¼Œç»“æœå‘ç°è‡ªå·±åˆ›å»ºä¸äº†ï¼Œå› ä¸ºè¢«åˆ«äººåˆ›å»ºäº†ï¼Œé‚£åªèƒ½ç­‰ç€ï¼Œç­‰ç¬¬ä¸€ä¸ªæœºå™¨æ‰§è¡Œå®Œäº†è‡ªå·±å†æ‰§è¡Œã€‚
å…ƒæ•°æ®/é…ç½®ä¿¡æ¯ç®¡ç† zookeeper å¯ä»¥ç”¨ä½œå¾ˆå¤šç³»ç»Ÿçš„é…ç½®ä¿¡æ¯çš„ç®¡ç†ï¼Œæ¯”å¦‚ kafkaã€storm ç­‰ç­‰å¾ˆå¤šåˆ†å¸ƒå¼ç³»ç»Ÿéƒ½ä¼šé€‰ç”¨ zookeeper æ¥åšä¸€äº›å…ƒæ•°æ®ã€é…ç½®ä¿¡æ¯çš„ç®¡ç†ï¼ŒåŒ…æ‹¬ dubbo æ³¨å†Œä¸­å¿ƒä¸ä¹Ÿæ”¯æŒ zookeeper ä¹ˆï¼Ÿ
HA é«˜å¯ç”¨æ€§ è¿™ä¸ªåº”è¯¥æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚ hadoopã€hdfsã€yarn ç­‰å¾ˆå¤šå¤§æ•°æ®ç³»ç»Ÿï¼Œéƒ½é€‰æ‹©åŸºäº zookeeper æ¥å¼€å‘ HA é«˜å¯ç”¨æœºåˆ¶ï¼Œå°±æ˜¯ä¸€ä¸ªé‡è¦è¿›ç¨‹ä¸€èˆ¬ä¼šåšä¸»å¤‡ä¸¤ä¸ªï¼Œä¸»è¿›ç¨‹æŒ‚äº†ç«‹é©¬é€šè¿‡ zookeeper æ„ŸçŸ¥åˆ°åˆ‡æ¢åˆ°å¤‡ç”¨è¿›ç¨‹ã€‚
å‚è€ƒ zookeeper éƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ </description>
    </item>
    
    <item>
      <title>ZookeeperæœåŠ¡æ³¨å†Œå‘ç°åŸç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0%E5%8E%9F%E7%90%86/</guid>
      <description>RPCæ¡†æ¶ä¸­æœ‰3ä¸ªé‡è¦çš„è§’è‰²ï¼š
 æ³¨å†Œä¸­å¿ƒ ï¼šä¿å­˜æ‰€æœ‰æœåŠ¡çš„åå­—ï¼ŒæœåŠ¡æä¾›è€…çš„ipåˆ—è¡¨ï¼ŒæœåŠ¡æ¶ˆè´¹è€…çš„IPåˆ—è¡¨ æœåŠ¡æä¾›è€…ï¼š æä¾›è·¨è¿›ç¨‹æœåŠ¡ æœåŠ¡æ¶ˆè´¹è€…ï¼š å¯»æ‰¾åˆ°æŒ‡å®šå‘½åçš„æœåŠ¡å¹¶æ¶ˆè´¹ã€‚  Zookeeperç”¨ä½œæ³¨å†Œä¸­å¿ƒ ç®€å•æ¥è®²ï¼Œzookeeperå¯ä»¥å……å½“ä¸€ä¸ªæœåŠ¡æ³¨å†Œè¡¨ï¼ˆService Registryï¼‰ï¼Œè®©å¤šä¸ªæœåŠ¡æä¾›è€…å½¢æˆä¸€ä¸ªé›†ç¾¤ï¼Œè®©æœåŠ¡æ¶ˆè´¹è€…é€šè¿‡æœåŠ¡æ³¨å†Œè¡¨è·å–å…·ä½“çš„æœåŠ¡è®¿é—®åœ°å€ï¼ˆip+ç«¯å£ï¼‰å»è®¿é—®å…·ä½“çš„æœåŠ¡æä¾›è€…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
å…·ä½“æ¥è¯´ï¼Œzookeeperå°±æ˜¯ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯å½“ä¸€ä¸ªæœåŠ¡æä¾›è€…éƒ¨ç½²åéƒ½è¦å°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ°zookeeperçš„æŸä¸€è·¯å¾„ä¸Š: /{service}/{version}/{ip:port}, æ¯”å¦‚æˆ‘ä»¬çš„HelloWorldServiceéƒ¨ç½²åˆ°ä¸¤å°æœºå™¨ï¼Œé‚£ä¹ˆzookeeperä¸Šå°±ä¼šåˆ›å»ºä¸¤æ¡ç›®å½•ï¼šåˆ†åˆ«ä¸º/HelloWorldService/1.0.0/100.19.20.01:16888 /HelloWorldService/1.0.0/100.19.20.02:16888ã€‚
è¿™ä¹ˆæè¿°æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œä¸‹å›¾æ›´ç›´è§‚ï¼Œ
åœ¨zookeeperä¸­ï¼Œè¿›è¡ŒæœåŠ¡æ³¨å†Œï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨zookeeperä¸­åˆ›å»ºäº†ä¸€ä¸ªznodeèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹å­˜å‚¨äº†è¯¥æœåŠ¡çš„IPã€ç«¯å£ã€è°ƒç”¨æ–¹å¼(åè®®ã€åºåˆ—åŒ–æ–¹å¼)ç­‰ã€‚è¯¥èŠ‚ç‚¹æ‰¿æ‹…ç€æœ€é‡è¦çš„èŒè´£ï¼Œå®ƒç”±æœåŠ¡æä¾›è€…(å‘å¸ƒæœåŠ¡æ—¶)åˆ›å»ºï¼Œä»¥ä¾›æœåŠ¡æ¶ˆè´¹è€…è·å–èŠ‚ç‚¹ä¸­çš„ä¿¡æ¯ï¼Œä»è€Œå®šä½åˆ°æœåŠ¡æä¾›è€…çœŸæ­£ç½‘ç»œæ‹“æ‰‘ä½ç½®ä»¥åŠå¾—çŸ¥å¦‚ä½•è°ƒç”¨ã€‚RPCæœåŠ¡æ³¨å†Œã€å‘ç°è¿‡ç¨‹ç®€è¿°å¦‚ä¸‹ï¼š
 æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶ï¼Œä¼šå°†å…¶æœåŠ¡åç§°ï¼Œipåœ°å€æ³¨å†Œåˆ°é…ç½®ä¸­å¿ƒã€‚ æœåŠ¡æ¶ˆè´¹è€…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æœåŠ¡æ—¶ï¼Œä¼šé€šè¿‡æ³¨å†Œä¸­å¿ƒæ‰¾åˆ°ç›¸åº”çš„æœåŠ¡çš„IPåœ°å€åˆ—è¡¨ï¼Œå¹¶ç¼“å­˜åˆ°æœ¬åœ°ï¼Œä»¥ä¾›åç»­ä½¿ç”¨ã€‚å½“æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æ—¶ï¼Œä¸ä¼šå†å»è¯·æ±‚æ³¨å†Œä¸­å¿ƒï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ä»IPåˆ—è¡¨ä¸­å–ä¸€ä¸ªæœåŠ¡æä¾›è€…çš„æœåŠ¡å™¨è°ƒç”¨æœåŠ¡ã€‚ å½“æœåŠ¡æä¾›è€…çš„æŸå°æœåŠ¡å™¨å®•æœºæˆ–ä¸‹çº¿æ—¶ï¼Œç›¸åº”çš„ipä¼šä»æœåŠ¡æä¾›è€…IPåˆ—è¡¨ä¸­ç§»é™¤ã€‚åŒæ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†æ–°çš„æœåŠ¡IPåœ°å€åˆ—è¡¨å‘é€ç»™æœåŠ¡æ¶ˆè´¹è€…æœºå™¨ï¼Œç¼“å­˜åœ¨æ¶ˆè´¹è€…æœ¬æœºã€‚ å½“æŸä¸ªæœåŠ¡çš„æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¸‹çº¿äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæœåŠ¡ä¹Ÿå°±ä¸‹çº¿äº†ã€‚ åŒæ ·ï¼Œå½“æœåŠ¡æä¾›è€…çš„æŸå°æœåŠ¡å™¨ä¸Šçº¿æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†æ–°çš„æœåŠ¡IPåœ°å€åˆ—è¡¨å‘é€ç»™æœåŠ¡æ¶ˆè´¹è€…æœºå™¨ï¼Œç¼“å­˜åœ¨æ¶ˆè´¹è€…æœ¬æœºã€‚ æœåŠ¡æä¾›æ–¹å¯ä»¥æ ¹æ®æœåŠ¡æ¶ˆè´¹è€…çš„æ•°é‡æ¥ä½œä¸ºæœåŠ¡ä¸‹çº¿çš„ä¾æ®ã€‚  æ„ŸçŸ¥æœåŠ¡çš„ä¸‹çº¿&amp;ä¸Šçº¿ zookeeperæä¾›äº†â€œå¿ƒè·³æ£€æµ‹â€åŠŸèƒ½ï¼Œå®ƒä¼šå®šæ—¶å‘å„ä¸ªæœåŠ¡æä¾›è€…å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ˆå®é™…ä¸Šå»ºç«‹çš„æ˜¯ä¸€ä¸ª socket é•¿è¿æ¥ï¼‰ï¼Œå¦‚æœé•¿æœŸæ²¡æœ‰å“åº”ï¼ŒæœåŠ¡ä¸­å¿ƒå°±è®¤ä¸ºè¯¥æœåŠ¡æä¾›è€…å·²ç»â€œæŒ‚äº†â€ï¼Œå¹¶å°†å…¶å‰”é™¤ï¼Œæ¯”å¦‚100.19.20.02è¿™å°æœºå™¨å¦‚æœå®•æœºäº†ï¼Œé‚£ä¹ˆzookeeperä¸Šçš„è·¯å¾„å°±ä¼šåªå‰©/HelloWorldService/1.0.0/100.19.20.01:16888ã€‚
æœåŠ¡æ¶ˆè´¹è€…ä¼šå»ç›‘å¬ç›¸åº”è·¯å¾„ï¼ˆ/HelloWorldService/1.0.0ï¼‰ï¼Œä¸€æ—¦è·¯å¾„ä¸Šçš„æ•°æ®æœ‰ä»»åŠ¡å˜åŒ–ï¼ˆå¢åŠ æˆ–å‡å°‘ï¼‰ï¼Œzookeeperéƒ½ä¼šé€šçŸ¥æœåŠ¡æ¶ˆè´¹æ–¹æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨å·²ç»å‘ç”Ÿæ”¹å˜ï¼Œä»è€Œè¿›è¡Œæ›´æ–°ã€‚
æ›´ä¸ºé‡è¦çš„æ˜¯zookeeper ä¸ç”Ÿä¿±æ¥çš„å®¹é”™å®¹ç¾èƒ½åŠ›ï¼ˆæ¯”å¦‚leaderé€‰ä¸¾ï¼‰ï¼Œå¯ä»¥ç¡®ä¿æœåŠ¡æ³¨å†Œè¡¨çš„é«˜å¯ç”¨æ€§ã€‚
ä½¿ç”¨ zookeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒæ—¶ï¼Œå®¢æˆ·ç«¯è®¢é˜…æœåŠ¡æ—¶ä¼šå‘ zookeeper æ³¨å†Œè‡ªèº«ï¼›ä¸»è¦æ˜¯æ–¹ä¾¿å¯¹è°ƒç”¨æ–¹è¿›è¡Œç»Ÿè®¡ã€ç®¡ç†ã€‚ä½†è®¢é˜…æ—¶æ˜¯å¦æ³¨å†Œ client ä¸æ˜¯å¿…è¦è¡Œä¸ºï¼Œå’Œä¸åŒçš„æ³¨å†Œä¸­å¿ƒå®ç°æœ‰å…³ï¼Œä¾‹å¦‚ä½¿ç”¨ consul æ—¶ä¾¿æ²¡æœ‰æ³¨å†Œã€‚
å‚è€ƒ Zookeeperç”¨ä½œæ³¨å†Œä¸­å¿ƒçš„åŸç† 8ã€ZookeeperæœåŠ¡æ³¨å†Œä¸å‘ç°åŸç†æµ…æ å¾®æœåŠ¡ä¸­Zookeeperçš„åº”ç”¨åŠåŸç† </description>
    </item>
    
    <item>
      <title>Zookeeperæ ¸å¿ƒè®¾è®¡ç†è§£ä¸å®æˆ˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%90%86%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%90%86%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98/</guid>
      <description>1. Zookeeper æ ¸å¿ƒæ¶æ„è®¾è®¡ 1.1 Zookeeper ç‰¹ç‚¹ ï¼ˆ1ï¼‰Zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œæ˜¯ä¸ºäº†è§£å†³å¤šä¸ªèŠ‚ç‚¹çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå……å½“ä¸­é—´æœºæ„æ¥è°ƒåœã€‚å¦‚æœå‡ºç°äº†ä¸ä¸€è‡´ï¼Œåˆ™æŠŠè¿™ä¸ªä¸ä¸€è‡´çš„æƒ…å†µå†™å…¥åˆ° Zookeeper ä¸­ï¼ŒZookeeper ä¼šè¿”å›å“åº”ï¼Œå“åº”æˆåŠŸï¼Œåˆ™è¡¨ç¤ºå¸®ä½ è¾¾æˆäº†ä¸€è‡´ã€‚
æ¯”å¦‚ï¼ŒAã€Bã€C èŠ‚ç‚¹åœ¨é›†ç¾¤å¯åŠ¨æ—¶ï¼Œéœ€è¦æ¨ä¸¾å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒAã€Bã€C åªè¦åŒæ—¶å¾€ Zookeeper ä¸Šæ³¨å†Œä¸´æ—¶èŠ‚ç‚¹ï¼Œè°å…ˆæ³¨å†ŒæˆåŠŸï¼Œè°å°±æ˜¯ä¸»èŠ‚ç‚¹ã€‚
ï¼ˆ2ï¼‰Zookeeper è™½ç„¶æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œä½†æ˜¯æ•°æ®å¹¶ä¸æ˜¯åˆ†æ•£å­˜å‚¨åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šçš„ï¼Œè€Œæ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜äº†é›†ç¾¤æ‰€æœ‰çš„æ•°æ®ã€‚
å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œæä¾›åˆ†å¸ƒå¼äº‹åŠ¡çš„å†™æœåŠ¡ï¼Œå…¶ä»–èŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹åŒæ­¥æ•°æ®ï¼Œä¿æŒå’Œä¸»èŠ‚ç‚¹çŠ¶æ€ä¸€è‡´ã€‚
ï¼ˆ3ï¼‰Zookeeper æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®çŠ¶æ€é€šè¿‡ Zab åè®®ä¿æŒä¸€è‡´ã€‚å½“é›†ç¾¤ä¸­æ²¡æœ‰ Leader èŠ‚ç‚¹æ—¶ï¼Œå†…éƒ¨ä¼šæ‰§è¡Œé€‰ä¸¾ï¼Œé€‰ä¸¾ç»“æŸï¼ŒFollower å’Œ Leader æ‰§è¡ŒçŠ¶æ€åŒæ­¥ï¼›å½“æœ‰ Leader èŠ‚ç‚¹æ—¶ï¼ŒLeader é€šè¿‡ ZAB åè®®ä¸»å¯¼åˆ†å¸ƒå¼äº‹åŠ¡çš„æ‰§è¡Œï¼Œå¹¶ä¸”æ‰€æœ‰çš„äº‹åŠ¡éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ã€‚
ï¼ˆ4ï¼‰Zookeeper çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯ä¸èƒ½çº¿æ€§æ‰©å±•çš„ï¼ŒèŠ‚ç‚¹è¶Šå¤šï¼ŒåŒæ­¥æ•°æ®çš„å‹åŠ›è¶Šå¤§ï¼Œæ‰§è¡Œåˆ†å¸ƒå¼äº‹åŠ¡æ€§èƒ½è¶Šå·®ã€‚æ¨è3ã€5ã€7 è¿™æ ·çš„æ•°ç›®ã€‚
1.1 Zookeeper è§’è‰²çš„ç†è§£ Zookeeper å¹¶æ²¡æœ‰æ²¿ç”¨ Master/Slave æ¦‚å¿µï¼Œè€Œæ˜¯å¼•å…¥äº† Leaderï¼ŒFollowerï¼ŒObserver ä¸‰ç§è§’è‰²ã€‚
é€šè¿‡ Leader é€‰ä¸¾ç®—æ³•æ¥é€‰å®šä¸€å°æœåŠ¡å™¨å……å½“ Leader èŠ‚ç‚¹ï¼ŒLeader æœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯æä¾›è¯»ã€å†™æœåŠ¡ã€‚
Follower èŠ‚ç‚¹å¯ä»¥å‚åŠ é€‰ä¸¾ï¼Œä¹Ÿå¯ä»¥æ¥å—å®¢æˆ·ç«¯çš„è¯»è¯·æ±‚ï¼Œä½†æ˜¯æ¥å—åˆ°å®¢æˆ·ç«¯çš„å†™è¯·æ±‚æ—¶ï¼Œä¼šè½¬å‘åˆ° Leader æœåŠ¡å™¨å»å¤„ç†ã€‚
Observer è§’è‰²åªèƒ½æä¾›è¯»æœåŠ¡ï¼Œä¸èƒ½é€‰ä¸¾å’Œè¢«é€‰ä¸¾ï¼Œæ‰€ä»¥å®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯åœ¨ä¸å½±å“å†™æ€§èƒ½çš„å‰æä¸‹ï¼Œæå‡é›†ç¾¤çš„è¯»æ€§èƒ½ã€‚
1.3 Zookeeper åŒæ—¶æ»¡è¶³äº† CAP å—ï¼Ÿ ç­”æ¡ˆæ˜¯å¦ï¼ŒCAP åªèƒ½åŒæ—¶æ»¡è¶³å…¶äºŒã€‚
Zookeeper æ˜¯æœ‰å–èˆçš„ï¼Œå®ƒå®ç°äº† A å¯ç”¨æ€§ã€P åˆ†åŒºå®¹é”™æ€§ã€C çš„å†™å…¥ä¸€è‡´æ€§ï¼Œç‰ºç‰²çš„æ˜¯ Cçš„è¯»ä¸€è‡´æ€§ã€‚</description>
    </item>
    
    <item>
      <title>ZooKeeperçš„statç»“æ„</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E7%9A%84stat%E7%BB%93%E6%9E%84/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E7%9A%84stat%E7%BB%93%E6%9E%84/</guid>
      <description>ZooKeeperå‘½åç©ºé—´ä¸­çš„æ¯ä¸ªznodeéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„statç»“æ„ï¼Œç±»ä¼¼äºUnix/Linuxæ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶çš„statç»“æ„ã€‚ znodeçš„statç»“æ„ä¸­çš„å­—æ®µæ˜¾ç¤ºå¦‚ä¸‹ï¼Œå„è‡ªçš„å«ä¹‰å¦‚ä¸‹ï¼š
 cZxidï¼šè¿™æ˜¯å¯¼è‡´åˆ›å»ºznodeæ›´æ”¹çš„äº‹åŠ¡IDã€‚ mZxidï¼šè¿™æ˜¯æœ€åä¿®æ”¹znodeæ›´æ”¹çš„äº‹åŠ¡IDã€‚ pZxidï¼šè¿™æ˜¯ç”¨äºæ·»åŠ æˆ–åˆ é™¤å­èŠ‚ç‚¹çš„znodeæ›´æ”¹çš„äº‹åŠ¡IDã€‚ ctimeï¼šè¡¨ç¤ºä»1970-01-01T00:00:00Zå¼€å§‹ä»¥æ¯«ç§’ä¸ºå•ä½çš„znodeåˆ›å»ºæ—¶é—´ã€‚ mtimeï¼šè¡¨ç¤ºä»1970-01-01T00:00:00Zå¼€å§‹ä»¥æ¯«ç§’ä¸ºå•ä½çš„znodeæœ€è¿‘ä¿®æ”¹æ—¶é—´ã€‚ dataVersionï¼šè¡¨ç¤ºå¯¹è¯¥znodeçš„æ•°æ®æ‰€åšçš„æ›´æ”¹æ¬¡æ•°ã€‚ cversionï¼šè¿™è¡¨ç¤ºå¯¹æ­¤znodeçš„å­èŠ‚ç‚¹è¿›è¡Œçš„æ›´æ”¹æ¬¡æ•°ã€‚ aclVersionï¼šè¡¨ç¤ºå¯¹æ­¤znodeçš„ACLè¿›è¡Œæ›´æ”¹çš„æ¬¡æ•°ã€‚ ephemeralOwnerï¼šå¦‚æœznodeæ˜¯ephemeralç±»å‹èŠ‚ç‚¹ï¼Œåˆ™è¿™æ˜¯znodeæ‰€æœ‰è€…çš„ session IDã€‚ å¦‚æœznodeä¸æ˜¯ephemeralèŠ‚ç‚¹ï¼Œåˆ™è¯¥å­—æ®µè®¾ç½®ä¸ºé›¶ã€‚ dataLengthï¼šè¿™æ˜¯znodeæ•°æ®å­—æ®µçš„é•¿åº¦ã€‚ numChildrenï¼šè¿™è¡¨ç¤ºznodeçš„å­èŠ‚ç‚¹çš„æ•°é‡ã€‚  åœ¨ZooKeeper Java shellä¸­ï¼Œå¯ä»¥ä½¿ç”¨statæˆ–ls2å‘½ä»¤æŸ¥çœ‹znodeçš„statç»“æ„ã€‚ å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š
ä½¿ç”¨statå‘½ä»¤æŸ¥çœ‹znodeçš„statç»“æ„ï¼š
[zk: localhost(CONNECTED) 0] stat /zookeeper cZxid = 0x0 ctime = Thu Jan 01 05:30:00 IST 1970 mZxid = 0x0 mtime = Thu Jan 01 05:30:00 IST 1970 pZxid = 0x0 cversion = -1 dataVersion = 0 aclVersion = 0 ephemeralOwner = 0x0 dataLength = 0 numChildren = 1 ä½¿ç”¨ls2å‘½ä»¤æŸ¥çœ‹znodeçš„statç»“æ„ï¼š</description>
    </item>
    
    <item>
      <title>ZooKeeperèƒ½åšä»€ä¹ˆ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/zookeeper/zookeeper%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88/</guid>
      <description>ä»€ä¹ˆæ˜¯ZooKeeper?å®˜ç½‘ ä»‹ç»åˆ°ï¼šZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. è¿™å¤§æ¦‚æè¿°äº†Zookeeperä¸»è¦å¯ä»¥å¹²å“ªäº›äº‹æƒ…ï¼šé…ç½®ç®¡ç†ï¼Œåå­—æœåŠ¡ï¼Œæä¾›åˆ†å¸ƒå¼åŒæ­¥ä»¥åŠé›†ç¾¤ç®¡ç†ã€‚
1. é…ç½®ç®¡ç† é…ç½®ç®¡ç†åˆè¢«ç§°ä¸ºå‘å¸ƒ-è®¢é˜…ã€‚
åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­é™¤äº†ä»£ç å¤–ï¼Œè¿˜æœ‰ä¸€äº›å°±æ˜¯å„ç§é…ç½®ã€‚æ¯”å¦‚æ•°æ®åº“è¿æ¥ç­‰ã€‚ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œåœ¨ä»£ç ä¸­å¼•å…¥è¿™äº›é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åªæœ‰ä¸€ç§é…ç½®ï¼Œåªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸ç»å¸¸ä¿®æ”¹çš„æ—¶å€™ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬é…ç½®éå¸¸å¤šï¼Œæœ‰å¾ˆå¤šæœåŠ¡å™¨éƒ½éœ€è¦è¿™ä¸ªé…ç½®ï¼Œè€Œä¸”è¿˜å¯èƒ½æ˜¯åŠ¨æ€çš„è¯ä½¿ç”¨é…ç½®æ–‡ä»¶å°±ä¸æ˜¯ä¸ªå¥½ä¸»æ„äº†ã€‚è¿™ä¸ªæ—¶å€™å¾€å¾€éœ€è¦å¯»æ‰¾ä¸€ç§é›†ä¸­ç®¡ç†é…ç½®çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé›†ä¸­çš„åœ°æ–¹ä¿®æ”¹äº†é…ç½®ï¼Œæ‰€æœ‰å¯¹è¿™ä¸ªé…ç½®æ„Ÿå…´è¶£çš„éƒ½å¯ä»¥è·å¾—å˜æ›´ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠé…ç½®æ”¾åœ¨æ•°æ®åº“é‡Œï¼Œç„¶åæ‰€æœ‰éœ€è¦é…ç½®çš„æœåŠ¡éƒ½å»è¿™ä¸ªæ•°æ®åº“è¯»å–é…ç½®ã€‚ä½†æ˜¯ï¼Œå› ä¸ºå¾ˆå¤šæœåŠ¡çš„æ­£å¸¸è¿è¡Œéƒ½éå¸¸ä¾èµ–è¿™ä¸ªé…ç½®ï¼Œæ‰€ä»¥éœ€è¦è¿™ä¸ªé›†ä¸­æä¾›é…ç½®æœåŠ¡çš„æœåŠ¡å…·å¤‡å¾ˆé«˜çš„å¯é æ€§ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªé›†ç¾¤æ¥æä¾›è¿™ä¸ªé…ç½®æœåŠ¡ï¼Œä½†æ˜¯ç”¨é›†ç¾¤æå‡å¯é æ€§ï¼Œé‚£å¦‚ä½•ä¿è¯é…ç½®åœ¨é›†ç¾¤ä¸­çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨ä¸€ç§å®ç°äº†ä¸€è‡´æ€§åè®®çš„æœåŠ¡äº†ã€‚Zookeeperå°±æ˜¯è¿™ç§æœåŠ¡ï¼Œå®ƒä½¿ç”¨Zabè¿™ç§ä¸€è‡´æ€§åè®®æ¥æä¾›ä¸€è‡´æ€§ã€‚ç°åœ¨æœ‰å¾ˆå¤šå¼€æºé¡¹ç›®ä½¿ç”¨Zookeeperæ¥ç»´æŠ¤é…ç½®ï¼Œæ¯”å¦‚åœ¨HBaseä¸­ï¼Œå®¢æˆ·ç«¯å°±æ˜¯è¿æ¥ä¸€ä¸ªZookeeperï¼Œè·å¾—å¿…è¦çš„HBaseé›†ç¾¤çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åæ‰å¯ä»¥è¿›ä¸€æ­¥æ“ä½œã€‚è¿˜æœ‰åœ¨å¼€æºçš„æ¶ˆæ¯é˜Ÿåˆ—Kafkaä¸­ï¼Œä¹Ÿä½¿ç”¨Zookeeperæ¥ç»´æŠ¤brokerçš„ä¿¡æ¯ã€‚
åº”ç”¨ä¸­ç”¨åˆ°çš„ä¸€äº›é…ç½®ä¿¡æ¯æ”¾åˆ°ZKä¸Šè¿›è¡Œé›†ä¸­ç®¡ç†ã€‚è¿™ç±»åœºæ™¯é€šå¸¸æ˜¯è¿™æ ·ï¼šåº”ç”¨åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šä¸»åŠ¨æ¥è·å–ä¸€æ¬¡é…ç½®ï¼ŒåŒæ—¶ï¼Œåœ¨èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ªWatcherï¼Œè¿™æ ·ä¸€æ¥ï¼Œä»¥åæ¯æ¬¡é…ç½®æœ‰æ›´æ–°çš„æ—¶å€™ï¼Œéƒ½ä¼šå®æ—¶é€šçŸ¥åˆ°è®¢é˜…çš„å®¢æˆ·ç«¯ï¼Œä»æ¥è¾¾åˆ°è·å–æœ€æ–°é…ç½®ä¿¡æ¯çš„ç›®çš„ã€‚
2. å‘½åæœåŠ¡ å‘½åæœåŠ¡ä¹Ÿæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ç±»åœºæ™¯ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å‘½åæœåŠ¡ï¼Œå®¢æˆ·ç«¯åº”ç”¨èƒ½å¤Ÿæ ¹æ®æŒ‡å®šåå­—æ¥è·å–èµ„æºæˆ–æœåŠ¡çš„åœ°å€ï¼Œæä¾›è€…ç­‰ä¿¡æ¯ã€‚è¢«å‘½åçš„å®ä½“é€šå¸¸å¯ä»¥æ˜¯é›†ç¾¤ä¸­çš„æœºå™¨ï¼Œæä¾›çš„æœåŠ¡åœ°å€ï¼Œè¿œç¨‹å¯¹è±¡ç­‰ç­‰â€”â€”è¿™äº›æˆ‘ä»¬éƒ½å¯ä»¥ç»Ÿç§°ä»–ä»¬ä¸ºåå­—ï¼ˆNameï¼‰ã€‚å…¶ä¸­è¾ƒä¸ºå¸¸è§çš„å°±æ˜¯ä¸€äº›åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ä¸­çš„æœåŠ¡åœ°å€åˆ—è¡¨ã€‚é€šè¿‡è°ƒç”¨ZKæä¾›çš„åˆ›å»ºèŠ‚ç‚¹çš„APIï¼Œèƒ½å¤Ÿå¾ˆå®¹æ˜“åˆ›å»ºä¸€ä¸ªå…¨å±€å”¯ä¸€çš„pathï¼Œè¿™ä¸ªpathå°±å¯ä»¥ä½œä¸ºä¸€ä¸ªåç§°ã€‚
é˜¿é‡Œå·´å·´é›†å›¢å¼€æºçš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶Dubboä¸­ä½¿ç”¨ZooKeeperæ¥ä½œä¸ºå…¶å‘½åæœåŠ¡ï¼Œç»´æŠ¤å…¨å±€çš„æœåŠ¡åœ°å€åˆ—è¡¨ï¼Œç‚¹å‡»è¿™é‡Œ æŸ¥çœ‹Dubboå¼€æºé¡¹ç›®ã€‚åœ¨Dubboå®ç°ä¸­ï¼š æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå‘ZKä¸Šçš„æŒ‡å®šèŠ‚ç‚¹/dubbo/${serviceName}/providersç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„URLåœ°å€ï¼Œè¿™ä¸ªæ“ä½œå°±å®Œæˆäº†æœåŠ¡çš„å‘å¸ƒã€‚ æœåŠ¡æ¶ˆè´¹è€…å¯åŠ¨çš„æ—¶å€™ï¼Œè®¢é˜…/dubbo/${serviceName}/providersç›®å½•ä¸‹çš„æä¾›è€…URLåœ°å€ï¼Œ å¹¶å‘/dubbo/${serviceName} /consumersç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„URLåœ°å€ã€‚ æ³¨æ„ï¼Œæ‰€æœ‰å‘ZKä¸Šæ³¨å†Œçš„åœ°å€éƒ½æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¿™æ ·å°±èƒ½å¤Ÿä¿è¯æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…èƒ½å¤Ÿè‡ªåŠ¨æ„Ÿåº”èµ„æºçš„å˜åŒ–ã€‚ å¦å¤–ï¼ŒDubboè¿˜æœ‰é’ˆå¯¹æœåŠ¡ç²’åº¦çš„ç›‘æ§ï¼Œæ–¹æ³•æ˜¯è®¢é˜…/dubbo/${serviceName}ç›®å½•ä¸‹æ‰€æœ‰æä¾›è€…å’Œæ¶ˆè´¹è€…çš„ä¿¡æ¯ã€‚
3. åˆ†å¸ƒå¼é” åˆ†å¸ƒå¼é”ï¼Œè¿™ä¸ªä¸»è¦å¾—ç›ŠäºZooKeeperä¸ºæˆ‘ä»¬ä¿è¯äº†æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚é”æœåŠ¡å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯ä¿æŒç‹¬å ï¼ˆæ’ä»–é”ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯æ§åˆ¶æ—¶åºï¼ˆå…±äº«é”/è¯»é”ï¼‰ã€‚
æ‰€è°“ä¿æŒç‹¬å ï¼ˆæ’ä»–é”ï¼‰ï¼Œå°±æ˜¯æ‰€æœ‰è¯•å›¾æ¥è·å–è¿™ä¸ªé”çš„å®¢æˆ·ç«¯ï¼Œæœ€ç»ˆåªæœ‰ä¸€ä¸ªå¯ä»¥æˆåŠŸè·å¾—è¿™æŠŠé”ã€‚é€šå¸¸çš„åšæ³•æ˜¯æŠŠzkä¸Šçš„ä¸€ä¸ªznodeçœ‹ä½œæ˜¯ä¸€æŠŠé”ï¼Œé€šè¿‡create znodeçš„æ–¹å¼æ¥å®ç°ã€‚æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å»åˆ›å»º /distribute_lockèŠ‚ç‚¹ï¼Œæœ€ç»ˆæˆåŠŸåˆ›å»ºçš„é‚£ä¸ªå®¢æˆ·ç«¯ä¹Ÿå³æ‹¥æœ‰äº†è¿™æŠŠé”ã€‚
æ§åˆ¶æ—¶åºï¼ˆå…±äº«é”/è¯»é”ï¼‰æ˜¯æŒ‡æ‰€æœ‰è¯•å›¾æ¥è·å–è¿™ä¸ªé”çš„å®¢æˆ·ç«¯ï¼Œæœ€ç»ˆéƒ½æ˜¯ä¼šè¢«å®‰æ’æ‰§è¡Œï¼Œåªæ˜¯æœ‰ä¸ªå…¨å±€æ—¶åºäº†ã€‚åšæ³•å’Œä¸Šé¢åŸºæœ¬ç±»ä¼¼ï¼Œåªæ˜¯è¿™é‡Œ/distribute_lockå·²ç»é¢„å…ˆå­˜åœ¨ï¼Œå®¢æˆ·ç«¯åœ¨å®ƒä¸‹é¢åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹ï¼ˆè¿™ä¸ªå¯ä»¥é€šè¿‡èŠ‚ç‚¹çš„å±æ€§æ§åˆ¶ï¼šCreateMode.EPHEMERAL_SEQUENTIALæ¥æŒ‡å®šï¼‰ã€‚Zkçš„çˆ¶èŠ‚ç‚¹ï¼ˆ/distribute_lockï¼‰ç»´æŒä¸€ä»½sequence,ä¿è¯å­èŠ‚ç‚¹åˆ›å»ºçš„æ—¶åºæ€§ï¼Œä»è€Œä¹Ÿå½¢æˆäº†æ¯ä¸ªå®¢æˆ·ç«¯çš„å…¨å±€æ—¶åºã€‚
4. é›†ç¾¤ç®¡ç† åœ¨åˆ†å¸ƒå¼çš„é›†ç¾¤ä¸­ï¼Œç»å¸¸ä¼šç”±äºå„ç§åŸå› ï¼Œæ¯”å¦‚ç¡¬ä»¶æ•…éšœï¼Œè½¯ä»¶æ•…éšœï¼Œç½‘ç»œé—®é¢˜ï¼Œæœ‰äº›èŠ‚ç‚¹ä¼šè¿›è¿›å‡ºå‡ºã€‚æœ‰æ–°çš„èŠ‚ç‚¹åŠ å…¥è¿›æ¥ï¼Œä¹Ÿæœ‰è€çš„èŠ‚ç‚¹é€€å‡ºé›†ç¾¤ã€‚è¿™ä¸ªæ—¶å€™ï¼Œé›†ç¾¤ä¸­å…¶ä»–æœºå™¨éœ€è¦æ„ŸçŸ¥åˆ°è¿™ç§å˜åŒ–ï¼Œç„¶åæ ¹æ®è¿™ç§å˜åŒ–åšå‡ºå¯¹åº”çš„å†³ç­–ã€‚
4.1 Masteré€‰ä¸¾ Masteré€‰ä¸¾åˆ™æ˜¯ZooKeeperä¸­æœ€ä¸ºç»å…¸çš„åº”ç”¨åœºæ™¯äº†ã€‚æ¯”å¦‚ HDFS ä¸­ Active NameNode çš„é€‰ä¸¾ã€‚åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç›¸åŒçš„ä¸šåŠ¡åº”ç”¨åˆ†å¸ƒåœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œæœ‰äº›ä¸šåŠ¡é€»è¾‘ï¼ˆä¾‹å¦‚ä¸€äº›è€—æ—¶çš„è®¡ç®—ï¼Œç½‘ç»œI/Oå¤„ç†ï¼‰ï¼Œå¾€å¾€åªéœ€è¦è®©æ•´ä¸ªé›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä½™æœºå™¨å¯ä»¥å…±äº«è¿™ä¸ªç»“æœï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œæé«˜æ€§èƒ½ï¼Œäºæ˜¯è¿™ä¸ªmasteré€‰ä¸¾ä¾¿æ˜¯è¿™ç§åœºæ™¯ä¸‹çš„ç¢°åˆ°çš„ä¸»è¦é—®é¢˜ã€‚
åˆ©ç”¨ZooKeeperçš„å¼ºä¸€è‡´æ€§ï¼Œèƒ½å¤Ÿä¿è¯åœ¨åˆ†å¸ƒå¼é«˜å¹¶å‘æƒ…å†µä¸‹èŠ‚ç‚¹åˆ›å»ºçš„å…¨å±€å”¯ä¸€æ€§ï¼Œå³ï¼šåŒæ—¶æœ‰å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚åˆ›å»º /currentMasterèŠ‚ç‚¹ï¼Œæœ€ç»ˆä¸€å®šåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚èƒ½å¤Ÿåˆ›å»ºæˆåŠŸã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå°±èƒ½å¾ˆè½»æ˜“çš„åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è¿›è¡Œé›†ç¾¤Masteré€‰ä¸¾äº†ã€‚æˆåŠŸåˆ›å»ºè¯¥èŠ‚ç‚¹çš„å®¢æˆ·ç«¯æ‰€åœ¨çš„æœºå™¨å°±æˆä¸ºäº†Masterã€‚åŒæ—¶ï¼Œå…¶ä»–æ²¡æœ‰æˆåŠŸåˆ›å»ºè¯¥èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ï¼Œéƒ½ä¼šåœ¨è¯¥èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ªå­èŠ‚ç‚¹å˜æ›´çš„ Watcherï¼Œç”¨äºç›‘æ§å½“å‰ Master æœºå™¨æ˜¯å¦å­˜æ´»ï¼Œä¸€æ—¦å‘ç°å½“å‰çš„MasteræŒ‚äº†ï¼Œé‚£ä¹ˆå…¶ä»–å®¢æˆ·ç«¯å°†ä¼šé‡æ–°è¿›è¡Œ Master é€‰ä¸¾ã€‚è¿™æ ·å°±å®ç°äº† Master çš„åŠ¨æ€é€‰ä¸¾ã€‚
4.2 é›†ç¾¤æœºå™¨ç›‘æ§ è¿™é€šå¸¸ç”¨äºé‚£ç§å¯¹é›†ç¾¤ä¸­æœºå™¨çŠ¶æ€ï¼Œæœºå™¨åœ¨çº¿ç‡æœ‰è¾ƒé«˜è¦æ±‚çš„åœºæ™¯ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¯¹é›†ç¾¤ä¸­æœºå™¨å˜åŒ–ä½œå‡ºå“åº”ã€‚è¿™æ ·çš„åœºæ™¯ä¸­ï¼Œå¾€å¾€æœ‰ä¸€ä¸ªç›‘æ§ç³»ç»Ÿï¼Œå®æ—¶æ£€æµ‹é›†ç¾¤æœºå™¨æ˜¯å¦å­˜æ´»ã€‚è¿‡å»çš„åšæ³•é€šå¸¸æ˜¯ï¼šç›‘æ§ç³»ç»Ÿé€šè¿‡æŸç§æ‰‹æ®µï¼ˆæ¯”å¦‚pingï¼‰å®šæ—¶æ£€æµ‹æ¯ä¸ªæœºå™¨ï¼Œæˆ–è€…æ¯ä¸ªæœºå™¨è‡ªå·±å®šæ—¶å‘ç›‘æ§ç³»ç»Ÿæ±‡æŠ¥â€œæˆ‘è¿˜æ´»ç€â€ã€‚è¿™ç§åšæ³•å¯è¡Œï¼Œä½†æ˜¯å­˜åœ¨ä¸¤ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„é—®é¢˜ï¼š
 å°†ä¼šäº§ç”Ÿä¸€å®šçš„æ—¶å»¶ï¼ˆå—å¿ƒè·³é•¿çŸ­é™åˆ¶ï¼‰; å½“é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å‘ç”Ÿå˜æ›´æ—¶ï¼Œå…¶ä½™çš„èŠ‚ç‚¹éƒ½éœ€è¦å¯¹ç»´æŠ¤çš„é›†ç¾¤æ–‡ä»¶ï¼ˆçŠ¶æ€è¡¨ï¼‰è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å†…å®¹å¤šã€‚  åˆ©ç”¨ZooKeeperæœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œå°±å¯ä»¥å®æ—¶å¦ä¸€ç§é›†ç¾¤æœºå™¨å­˜æ´»æ€§ç›‘æ§ç³»ç»Ÿï¼š</description>
    </item>
    
    <item>
      <title>ä¸€ä¸ªSQLæ‰§è¡Œçš„å¾ˆæ…¢</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E4%B8%80%E4%B8%AAsql%E6%89%A7%E8%A1%8C%E7%9A%84%E5%BE%88%E6%85%A2/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E4%B8%80%E4%B8%AAsql%E6%89%A7%E8%A1%8C%E7%9A%84%E5%BE%88%E6%85%A2/</guid>
      <description>ä¸€ä¸ªSQLæ‰§è¡Œçš„å¾ˆæ…¢ï¼Œæˆ‘ä»¬è¦åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š
å¤§å¤šæ•°æƒ…å†µä¸‹å¾ˆæ­£å¸¸ï¼Œå¶å°”å¾ˆæ…¢  æ•°æ®åº“åœ¨åˆ·æ–°è„é¡µï¼Œä¾‹å¦‚ redo log å†™æ»¡äº†éœ€è¦åŒæ­¥åˆ°ç£ç›˜ã€‚  å½“æˆ‘ä»¬è¦å¾€æ•°æ®åº“æ’å…¥ä¸€æ¡æ•°æ®ã€æˆ–è€…è¦æ›´æ–°ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“æ•°æ®åº“ä¼šåœ¨å†…å­˜ä¸­æŠŠå¯¹åº”å­—æ®µçš„æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯æ›´æ–°ä¹‹åï¼Œè¿™äº›æ›´æ–°çš„å­—æ®µå¹¶ä¸ä¼šé©¬ä¸ŠåŒæ­¥æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­å»ï¼Œè€Œæ˜¯æŠŠè¿™äº›æ›´æ–°çš„è®°å½•å†™å…¥åˆ° redo log æ—¥è®°ä¸­å»ï¼Œç­‰åˆ°ç©ºé—²çš„æ—¶å€™ï¼Œåœ¨é€šè¿‡ redo log é‡Œçš„æ—¥è®°æŠŠæœ€æ–°çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­å»ã€‚å†™redo logæ˜¯é¡ºåºio
 æ‰§è¡Œçš„æ—¶å€™ï¼Œé‡åˆ°é”ï¼Œå¦‚è¡¨é”ã€è¡Œé”ã€‚  è¿™æ¡ SQL è¯­å¥ä¸€ç›´æ‰§è¡Œçš„å¾ˆæ…¢  æ²¡æœ‰ç”¨ä¸Šç´¢å¼•ï¼šä¾‹å¦‚è¯¥å­—æ®µæ²¡æœ‰ç´¢å¼•ï¼›ç”±äºå¯¹å­—æ®µè¿›è¡Œè¿ç®—ã€å‡½æ•°æ“ä½œå¯¼è‡´æ— æ³•ç”¨ç´¢å¼•ã€‚ æ•°æ®åº“é€‰é”™äº†ç´¢å¼•ã€‚  å‚è€ƒ è…¾è®¯é¢è¯•ï¼šä¸€æ¡SQLè¯­å¥æ‰§è¡Œå¾—å¾ˆæ…¢çš„åŸå› æœ‰å“ªäº›ï¼Ÿ&amp;mdash;ä¸çœ‹åæ‚”ç³»åˆ— </description>
    </item>
    
    <item>
      <title>ä¸ºä»€ä¹ˆéœ€è¦protobuf</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81protobuf/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81protobuf/</guid>
      <description>ä¸ºä»€ä¹ˆéœ€è¦protobuf  protobufé‡‡ç”¨å­—èŠ‚ç¼–ç ï¼Œè€Œjson, xmléƒ½æ˜¯å­—ç¬¦ç¼–ç ï¼Œå­—èŠ‚ç¼–ç æ›´åŠ èŠ‚çœç©ºé—´ é‡‡ç”¨äº†varintç¼–ç ï¼Œè¿›ä¸€æ­¥é™ä½äº†ç¼–ç åçš„ç©ºé—´å¤§å°  Varintå°±æ˜¯ä¸€ç§å¯¹æ•°å­—è¿›è¡Œç¼–ç çš„æ–¹æ³•ï¼Œç¼–ç åäºŒè¿›åˆ¶æ•°æ®æ˜¯ä¸å®šé•¿çš„ï¼Œæ•°å€¼è¶Šå°çš„æ•°å­—ä½¿ç”¨çš„å­—èŠ‚æ•°è¶Šå°‘ã€‚ä¾‹å¦‚å¯¹äºint32_tï¼Œé‡‡ç”¨Varintç¼–ç åéœ€è¦1~5ä¸ªbytesï¼Œå°çš„æ•°å­—ä½¿ç”¨1ä¸ªbyteï¼Œå¤§çš„æ•°å­—ä½¿ç”¨5ä¸ªbytesã€‚åŸºäºå®é™…åœºæ™¯ä¸­å°æ•°å­—çš„ä½¿ç”¨è¿œè¿œå¤šäºå¤§æ•°å­—ï¼Œå› æ­¤é€šè¿‡Varintç¼–ç å¯¹äºå¤§éƒ¨åˆ†åœºæ™¯éƒ½å¯ä»¥èµ·åˆ°ä¸€ä¸ªå‹ç¼©çš„æ•ˆæœã€‚</description>
    </item>
    
    <item>
      <title>äº‹åŠ¡ä¼ æ’­å®æˆ˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E5%AE%9E%E6%88%98/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E5%AE%9E%E6%88%98/</guid>
      <description>å‚è€ƒé“¾æ¥ï¼š æ‰‹æŠŠæ‰‹å¸¦ä½ å®æˆ˜ä¸‹Springçš„ä¸ƒç§äº‹åŠ¡ä¼ æ’­è¡Œä¸º Springçš„PROPAGATION_NESTEDå’ŒPROPAGATION_REQUIRES_NEWçš„åŒºåˆ«ï¼Ÿ </description>
    </item>
    
    <item>
      <title>äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œå®ç°åŸç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</guid>
      <description>äº‹åŠ¡å…·æœ‰åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰å››ä¸ªç‰¹æ€§ï¼Œç®€ç§° ACIDï¼Œç¼ºä¸€ä¸å¯ã€‚åŸå­æ€§ç”±undo logä¿è¯ï¼ŒæŒä¹…æ€§ç”±redo logä¿è¯ï¼Œä»Šå¤©è¦è¯´çš„å°±æ˜¯éš”ç¦»æ€§ã€‚
æ ‡å‡†SQLé€šè¿‡è¡Œå…±äº«é”ã€è¡Œæ’ä»–é”ã€è¡¨å…±äº«é”ã€è¡¨æ’ä»–é”å®ç°å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒInnoDBäº‹åŠ¡åœ¨RU, S ä¸¤ç§éš”ç¦»çº§åˆ«å®ç°åŸç†å’Œæ ‡å‡†SQLå·®ä¸å¤šï¼Œåœ¨RCçº§åˆ«å®ƒé€šè¿‡MVCCæå‰æ ‡å‡†SQLä¸€ä¸ªçº§åˆ«è§£å†³äº†ä¸å¯é‡å¤è¯»ï¼Œåœ¨RRçº§åˆ«é€šè¿‡é—´éš™é”æå‰æ ‡å‡†SQLä¸€ä¸ªéš”ç¦»çº§åˆ«è§£å†³äº†å¹»è¯»ã€‚ï¼ˆMVCC: ä¸ºäº†ä¸åŠ é”è§£å†³è¯»å†™å†²çªçš„é—®é¢˜ï¼‰
1. æ¦‚å¿µè¯´æ˜ ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µæ˜¯äº‹åŠ¡éš”ç¦»çº§åˆ«è¦å®é™…è§£å†³çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ææ¸…æ¥šéƒ½æ˜¯ä»€ä¹ˆæ„æ€ã€‚
è„è¯» è„è¯»æŒ‡çš„æ˜¯è¯»åˆ°äº†å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œæœªæäº¤æ„å‘³ç€è¿™äº›æ•°æ®å¯èƒ½ä¼šå›æ»šï¼Œä¹Ÿå°±æ˜¯å¯èƒ½æœ€ç»ˆä¸ä¼šå­˜åˆ°æ•°æ®åº“ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨çš„æ•°æ®ã€‚è¯»åˆ°äº†å¹¶ä¸€å®šæœ€ç»ˆå­˜åœ¨çš„æ•°æ®ï¼Œè¿™å°±æ˜¯è„è¯»ã€‚
å¯é‡å¤è¯» å¯é‡å¤è¯»æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ï¼Œæœ€å¼€å§‹è¯»åˆ°çš„æ•°æ®å’Œäº‹åŠ¡ç»“æŸå‰çš„ä»»æ„æ—¶åˆ»è¯»åˆ°çš„åŒä¸€æ‰¹æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ã€‚é€šå¸¸é’ˆå¯¹æ•°æ®**æ›´æ–°ï¼ˆUPDATEï¼‰**æ“ä½œã€‚
ä¸å¯é‡å¤è¯» å¯¹æ¯”å¯é‡å¤è¯»ï¼Œä¸å¯é‡å¤è¯»æŒ‡çš„æ˜¯åœ¨åŒä¸€äº‹åŠ¡å†…ï¼Œä¸åŒçš„æ—¶åˆ»è¯»åˆ°çš„åŒä¸€æ‰¹æ•°æ®å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯èƒ½ä¼šå—åˆ°å…¶ä»–äº‹åŠ¡çš„å½±å“ï¼Œæ¯”å¦‚å…¶ä»–äº‹åŠ¡æ”¹äº†è¿™æ‰¹æ•°æ®å¹¶æäº¤äº†ã€‚é€šå¸¸é’ˆå¯¹æ•°æ®**æ›´æ–°ï¼ˆUPDATEï¼‰**æ“ä½œã€‚
å¹»è¯» å¹»è¯»æ˜¯é’ˆå¯¹æ•°æ®**æ’å…¥ï¼ˆINSERTï¼‰**æ“ä½œæ¥è¯´çš„ã€‚å‡è®¾äº‹åŠ¡Aå¯¹æŸäº›è¡Œçš„å†…å®¹ä½œäº†æ›´æ”¹ï¼Œä½†æ˜¯è¿˜æœªæäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡Bæ’å…¥äº†ä¸äº‹åŠ¡Aæ›´æ”¹å‰çš„è®°å½•ç›¸åŒçš„è®°å½•è¡Œï¼Œå¹¶ä¸”åœ¨äº‹åŠ¡Aæäº¤ä¹‹å‰å…ˆæäº¤äº†ï¼Œè€Œè¿™æ—¶ï¼Œåœ¨äº‹åŠ¡Aä¸­æŸ¥è¯¢ï¼Œä¼šå‘ç°å¥½åƒåˆšåˆšçš„æ›´æ”¹å¯¹äºæŸäº›æ•°æ®æœªèµ·ä½œç”¨ï¼Œä½†å…¶å®æ˜¯äº‹åŠ¡Båˆšæ’å…¥è¿›æ¥çš„ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰å¾ˆé­”å¹»ï¼Œæ„Ÿè§‰å‡ºç°äº†å¹»è§‰ï¼Œè¿™å°±å«å¹»è¯»ã€‚
2. äº‹åŠ¡éš”ç¦»çº§åˆ« SQL æ ‡å‡†å®šä¹‰äº†å››ç§éš”ç¦»çº§åˆ«ï¼ŒMySQL å…¨éƒ½æ”¯æŒã€‚è¿™å››ç§éš”ç¦»çº§åˆ«åˆ†åˆ«æ˜¯ï¼š
 è¯»æœªæäº¤ï¼ˆREAD UNCOMMITTEDï¼‰ è¯»æäº¤ ï¼ˆREAD COMMITTEDï¼‰ å¯é‡å¤è¯» ï¼ˆREPEATABLE READï¼‰ ä¸²è¡ŒåŒ– ï¼ˆSERIALIZABLEï¼‰  ä»ä¸Šå¾€ä¸‹ï¼Œéš”ç¦»å¼ºåº¦é€æ¸å¢å¼ºï¼Œæ€§èƒ½é€æ¸å˜å·®ã€‚é‡‡ç”¨å“ªç§éš”ç¦»çº§åˆ«è¦æ ¹æ®ç³»ç»Ÿéœ€æ±‚æƒè¡¡å†³å®šï¼Œå…¶ä¸­ï¼Œå¯é‡å¤è¯»æ˜¯ MySQL çš„é»˜è®¤çº§åˆ«ã€‚
äº‹åŠ¡éš”ç¦»å…¶å®å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»è¿™å‡ ä¸ªé—®é¢˜ï¼Œä¸‹é¢å±•ç¤ºäº† 4 ç§éš”ç¦»çº§åˆ«å¯¹è¿™ä¸‰ä¸ªé—®é¢˜çš„è§£å†³ç¨‹åº¦ã€‚
åªæœ‰ä¸²è¡ŒåŒ–çš„éš”ç¦»çº§åˆ«è§£å†³äº†å…¨éƒ¨è¿™ 3 ä¸ªé—®é¢˜ï¼Œå…¶ä»–çš„ 3 ä¸ªéš”ç¦»çº§åˆ«éƒ½æœ‰ç¼ºé™·ã€‚
3. æ ‡å‡†SQLäº‹åŠ¡éš”ç¦»çº§åˆ«å®ç°åŸç† æˆ‘ä»¬ä¸Šé¢é‡åˆ°çš„é—®é¢˜å…¶å®å°±æ˜¯å¹¶å‘äº‹åŠ¡ä¸‹çš„æ§åˆ¶é—®é¢˜ï¼Œè§£å†³å¹¶å‘äº‹åŠ¡çš„æœ€å¸¸è§æ–¹å¼å°±æ˜¯æ‚²è§‚å¹¶å‘æ§åˆ¶äº†ï¼ˆä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„é”ï¼‰ã€‚æ ‡å‡†SQLäº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°æ˜¯ä¾èµ–é”çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼š
   äº‹åŠ¡éš”ç¦»çº§åˆ« å®ç°æ–¹å¼     æœªæäº¤è¯»ï¼ˆRUï¼‰ äº‹åŠ¡å¯¹å½“å‰è¢«è¯»å–çš„æ•°æ®ä¸åŠ é”ï¼›äº‹åŠ¡åœ¨æ›´æ–°æŸæ•°æ®çš„ç¬é—´ï¼ˆå°±æ˜¯å‘ç”Ÿæ›´æ–°çš„ç¬é—´ï¼‰ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡Œçº§å…±äº«é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚   æäº¤è¯»ï¼ˆRCï¼‰ äº‹åŠ¡å¯¹å½“å‰è¢«è¯»å–çš„æ•°æ®åŠ è¡Œçº§å…±äº«é”ï¼ˆå½“è¯»åˆ°æ—¶æ‰åŠ é”ï¼‰ï¼Œä¸€æ—¦è¯»å®Œè¯¥è¡Œï¼Œç«‹å³é‡Šæ”¾è¯¥è¡Œçº§å…±äº«é”ï¼›äº‹åŠ¡åœ¨æ›´æ–°æŸæ•°æ®çš„ç¬é—´ï¼ˆå°±æ˜¯å‘ç”Ÿæ›´æ–°çš„ç¬é—´ï¼‰ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡Œçº§æ’ä»–é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚   å¯é‡å¤è¯»ï¼ˆRRï¼‰ äº‹åŠ¡åœ¨è¯»å–æŸæ•°æ®çš„ç¬é—´ï¼ˆå°±æ˜¯å¼€å§‹è¯»å–çš„ç¬é—´ï¼‰ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡Œçº§å…±äº«é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ï¼›äº‹åŠ¡åœ¨æ›´æ–°æŸæ•°æ®çš„ç¬é—´ï¼ˆå°±æ˜¯å‘ç”Ÿæ›´æ–°çš„ç¬é—´ï¼‰ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡Œçº§æ’ä»–é”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚   åºåˆ—åŒ–è¯»ï¼ˆSï¼‰ äº‹åŠ¡åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡¨çº§å…±äº«é” ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ï¼›äº‹åŠ¡åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œå¿…é¡»å…ˆå¯¹å…¶åŠ è¡¨çº§æ’ä»–é” ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚    å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åªä½¿ç”¨é”æ¥å®ç°éš”ç¦»çº§åˆ«çš„æ§åˆ¶çš„æ—¶å€™ï¼Œéœ€è¦é¢‘ç¹çš„åŠ é”è§£é”ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‘ç”Ÿè¯»å†™çš„å†²çªï¼ˆä¾‹å¦‚åœ¨RCçº§åˆ«ä¸‹ï¼Œäº‹åŠ¡Aæ›´æ–°äº†æ•°æ®è¡Œ1ï¼Œäº‹åŠ¡Båˆ™åœ¨äº‹åŠ¡Aæäº¤å‰è¯»å–æ•°æ®è¡Œ1éƒ½è¦ç­‰å¾…äº‹åŠ¡Aæäº¤å¹¶é‡Šæ”¾é”ï¼‰ã€‚</description>
    </item>
    
    <item>
      <title>ä½ äº†è§£çš„å¯è§æ€§å¯èƒ½æ˜¯é”™çš„</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E4%BD%A0%E4%BA%86%E8%A7%A3%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E5%8F%AF%E8%83%BD%E6%98%AF%E9%94%99%E7%9A%84/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E4%BD%A0%E4%BA%86%E8%A7%A3%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E5%8F%AF%E8%83%BD%E6%98%AF%E9%94%99%E7%9A%84/</guid>
      <description>èƒŒæ™¯ è¿™ç¯‡æ–‡ç« æœ€å¼€å§‹å†æˆ‘çš„ç¾¤é‡Œé¢æœ‰è®¨è®ºè¿‡ï¼Œå½“æ—¶æƒ³å†™çš„è¿™ç¯‡æ–‡ç« çš„ï¼Œä½†æ˜¯å› ä¸ºä¸€äº›æ—¶é—´çš„å…³ç³»æ‰€ä»¥ä¾¿æ²¡æœ‰å†™ã€‚æœ€è¿‘é˜…è¯»å¾®ä¿¡æ–‡ç« çš„æ—¶å€™å‘ç°äº†ä¸€ç¯‡é›¶åº¦å†™çš„ä¸€ç¯‡æ–‡ç« ã€Šåˆ†äº«ä¸€é“é˜¿é‡ŒJavaå¹¶å‘é¢è¯•é¢˜ã€‹ï¼Œå¯¹äºæœ‰å…³Javaå¹¶å‘æ€§æŠ€æœ¯çš„æ–‡ç« æˆ‘ä¸€èˆ¬è¿˜æ˜¯æŒºæ„Ÿå…´è¶£çš„ï¼Œäºæ˜¯é˜…è¯»äº†ä¸€ä¸‹ï¼Œæ•´ä½“æ¥è¯´è¿˜æ˜¯æŒºä¸é”™çš„ï¼Œä½†æ˜¯å…¶ä¸­çŠ¯äº†ä¸€ä¸ªéªŒè¯å¯è§æ€§çš„é—®é¢˜ã€‚ç”±äºå¾®ä¿¡æ–‡ç« å›å¤ä¸æ–¹ä¾¿è®¨è®ºï¼Œäºæ˜¯æˆ‘ä¾¿æŠŠä¹‹å‰ä¸€äº›å’Œç¾¤å‹çš„è®¨è®ºåœ¨è¿™é‡Œå†™å‡ºæ¥ã€‚
å¦‚ä½•æµ‹è¯•å¯è§æ€§é—®é¢˜ å› ä¸ºåœ¨ç¾¤é‡Œé¢æˆ‘ä»¬ä¹ æƒ¯çš„æœ‰æ¯å‘¨ä¸€é—®ï¼Œä¹Ÿå°±ç”±æˆ‘æˆ–è€…ç¾¤å‹å‘ç°ä¸€äº›ç”±æ„æ€çš„é—®é¢˜ç„¶åæé—®ç»™å¤§å®¶ï¼Œè®©å¤§å®¶å‚ä¸è®¨è®ºï¼Œå½“æ—¶æˆ‘æå‡ºäº†ä¸€ä¸ªå¦‚ä½•æµ‹è¯•vlolatileå¯è§æ€§çš„é—®é¢˜ï¼Œé¦–å…ˆåœ¨Effective Javaç»™å‡ºäº†ä¸€ä¸ªæµ‹è¯•volatileå¯è§æ€§çš„ä¾‹å­:
import java.util.concurrent.*; public class Test { private static /*volatile*/ boolean stop = false; public static void main(String[] args) throws Exception { Thread t = new Thread(new Runnable() { public void run() { int i = 0; while (!stop) { i++; // System.out.println(&amp;#34;hello&amp;#34;);  } } }); t.start(); Thread.sleep(1000); TimeUnit.SECONDS.sleep(1); System.out.println(&amp;#34;Stop Thread&amp;#34;); stop = true; } } è¿™é‡Œå¤§å®¶å¯ä»¥å¤åˆ¶ä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå‘ç°è¿™é‡Œç¨‹åºæ°¸è¿œä¸ä¼šç»“æŸï¼Œåœ¨é›¶åº¦çš„é‚£ç¯‡æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†ä¸€ä¸ªæµ‹è¯•å¯è§æ€§çš„ä¾‹å­:
public class ThreadSafeCache { int result; public int getResult() { return result; } public synchronized void setResult(int result) { this.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Xshellç™»å½•AWSçš„EC2äº‘æœåŠ¡å™¨å’Œå¼€å¯EC2ä¸Šå…è®¸root&#43;å¯†ç æ–¹å¼ç™»å½•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/%E4%BD%BF%E7%94%A8xshell%E7%99%BB%E5%BD%95aws%E7%9A%84ec2%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%BC%80%E5%90%AFec2%E4%B8%8A%E5%85%81%E8%AE%B8root&#43;%E5%AF%86%E7%A0%81%E6%96%B9%E5%BC%8F%E7%99%BB%E5%BD%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/%E4%BD%BF%E7%94%A8xshell%E7%99%BB%E5%BD%95aws%E7%9A%84ec2%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%BC%80%E5%90%AFec2%E4%B8%8A%E5%85%81%E8%AE%B8root&#43;%E5%AF%86%E7%A0%81%E6%96%B9%E5%BC%8F%E7%99%BB%E5%BD%95/</guid>
      <description>ä½¿ç”¨Xshellç™»å½•AWSçš„EC2äº‘æœåŠ¡å™¨å’Œå¼€å¯EC2ä¸Šå…è®¸root+å¯†ç æ–¹å¼ç™»å½• https://www.dwhd.org/20150525_182436.html </description>
    </item>
    
    <item>
      <title>å…¨æ–‡ç´¢å¼•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95/</guid>
      <description>å…¨æ–‡ç´¢å¼• å‚è€ƒ ä»€ä¹ˆæ˜¯å…¨æ–‡ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…¨æ–‡ç´¢å¼• MySQL ä¹‹å…¨æ–‡ç´¢å¼• æµ…è°ˆmysql fulltextå…¨æ–‡ç´¢å¼•ä¼˜ç¼ºç‚¹ </description>
    </item>
    
    <item>
      <title>å‡ ç§æ³¨å†Œä¸­å¿ƒå¯¹æ¯”</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E5%87%A0%E7%A7%8D%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AF%B9%E6%AF%94/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E5%87%A0%E7%A7%8D%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AF%B9%E6%AF%94/</guid>
      <description>å‰è¨€ æœåŠ¡æ³¨å†Œä¸­å¿ƒæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£è€¦æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ã€‚å¯¹äºä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡ï¼ŒåŸåˆ™ä¸Šéƒ½åº”å­˜åœ¨æˆ–è€…æ”¯æŒå¤šä¸ªæä¾›è€…ï¼Œè¿™æ˜¯ç”±å¾®æœåŠ¡çš„åˆ†å¸ƒå¼å±æ€§å†³å®šçš„ã€‚æ›´è¿›ä¸€æ­¥ï¼Œä¸ºäº†æ”¯æŒå¼¹æ€§æ‰©ç¼©å®¹ç‰¹æ€§ï¼Œä¸€ä¸ªå¾®æœåŠ¡çš„æä¾›è€…çš„æ•°é‡å’Œåˆ†å¸ƒå¾€å¾€æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œä¹Ÿæ˜¯æ— æ³•é¢„å…ˆç¡®å®šçš„ã€‚å› æ­¤ï¼ŒåŸæœ¬åœ¨å•ä½“åº”ç”¨é˜¶æ®µå¸¸ç”¨çš„é™æ€LBæœºåˆ¶å°±ä¸å†é€‚ç”¨äº†ï¼Œéœ€è¦å¼•å…¥é¢å¤–çš„ç»„ä»¶æ¥ç®¡ç†å¾®æœåŠ¡æä¾›è€…çš„æ³¨å†Œä¸å‘ç°ï¼Œè€Œè¿™ä¸ªç»„ä»¶å°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚
CAPç†è®º CAPç†è®ºæ˜¯åˆ†å¸ƒå¼æ¶æ„ä¸­é‡è¦ç†è®º
 ä¸€è‡´æ€§(Consistency) (æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´å…·æœ‰ç›¸åŒçš„æ•°æ®) å¯ç”¨æ€§(Availability) (ä¿è¯æ¯ä¸ªè¯·æ±‚ä¸ç®¡æˆåŠŸæˆ–è€…å¤±è´¥éƒ½æœ‰å“åº”) åˆ†éš”å®¹å¿(Partition tolerance) (ç³»ç»Ÿä¸­ä»»æ„ä¿¡æ¯çš„ä¸¢å¤±æˆ–å¤±è´¥ä¸ä¼šå½±å“ç³»ç»Ÿçš„ç»§ç»­è¿ä½œ)  å…³äº
Pçš„ç†è§£ï¼Œæˆ‘è§‰å¾—æ˜¯åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æŸä¸ªéƒ¨åˆ†ï¼ŒæŒ‚æ‰äº†ï¼Œæˆ–è€…å®•æœºäº†ï¼Œå¹¶ä¸å½±å“æ•´ä¸ªç³»ç»Ÿçš„è¿ä½œæˆ–è€…è¯´ä½¿ç”¨ï¼Œè€Œå¯ç”¨æ€§æ˜¯ï¼ŒæŸä¸ªç³»ç»Ÿçš„æŸä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œä½†æ˜¯å¹¶ä¸å½±å“ç³»ç»Ÿçš„æ¥å—æˆ–è€…å‘å‡ºè¯·æ±‚ï¼ŒCAP ä¸å¯èƒ½éƒ½å–ï¼Œåªèƒ½å–å…¶ä¸­2ä¸ª
åŸå› æ˜¯
å¦‚æœCæ˜¯ç¬¬ä¸€éœ€æ±‚çš„è¯ï¼Œé‚£ä¹ˆä¼šå½±å“Açš„æ€§èƒ½ï¼Œå› ä¸ºè¦æ•°æ®åŒæ­¥ï¼Œä¸ç„¶è¯·æ±‚ç»“æœä¼šæœ‰å·®å¼‚ï¼Œä½†æ˜¯æ•°æ®åŒæ­¥ä¼šæ¶ˆè€—æ—¶é—´ï¼ŒæœŸé—´å¯ç”¨æ€§å°±ä¼šé™ä½ã€‚
å¦‚æœAæ˜¯ç¬¬ä¸€éœ€æ±‚ï¼Œé‚£ä¹ˆåªè¦æœ‰ä¸€ä¸ªæœåŠ¡åœ¨ï¼Œå°±èƒ½æ­£å¸¸æ¥å—è¯·æ±‚ï¼Œä½†æ˜¯å¯¹ä¸è¿”å›ç»“æœå˜ä¸èƒ½ä¿è¯ï¼ŒåŸå› æ˜¯ï¼Œåœ¨åˆ†å¸ƒå¼éƒ¨ç½²çš„æ—¶å€™ï¼Œæ•°æ®ä¸€è‡´çš„è¿‡ç¨‹ä¸å¯èƒ½æƒ³åˆ‡çº¿è·¯é‚£ä¹ˆå¿«ã€‚
å†å¦‚æœï¼ŒåŒäº‹æ»¡è¶³ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ï¼Œé‚£ä¹ˆåˆ†åŒºå®¹é”™å°±å¾ˆéš¾ä¿è¯äº†ï¼Œä¹Ÿå°±æ˜¯å•ç‚¹ï¼Œä¹Ÿæ˜¯åˆ†å¸ƒå¼çš„åŸºæœ¬æ ¸å¿ƒï¼Œå¥½äº†ï¼Œæ˜ç™½è¿™äº›ç†è®ºï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„åœºæ™¯é€‰å–æœåŠ¡æ³¨å†Œä¸å‘ç°äº†
æœåŠ¡æ³¨å†Œä¸­å¿ƒè§£å†³æ–¹æ¡ˆ è®¾è®¡æˆ–è€…é€‰å‹ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œé¦–å…ˆè¦è€ƒè™‘çš„å°±æ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ã€‚çºµè§‚å½“ä¸‹å„ç§ä¸»æµçš„æœåŠ¡æ³¨å†Œä¸­å¿ƒè§£å†³æ–¹æ¡ˆï¼Œå¤§è‡´å¯å½’ä¸ºä¸‰ç±»ï¼š
  åº”ç”¨å†…ï¼šç›´æ¥é›†æˆåˆ°åº”ç”¨ä¸­ï¼Œä¾èµ–äºåº”ç”¨è‡ªèº«å®ŒæˆæœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼Œæœ€å…¸å‹çš„æ˜¯Netflixæä¾›çš„Eureka
  åº”ç”¨å¤–ï¼šæŠŠåº”ç”¨å½“æˆé»‘ç›’ï¼Œé€šè¿‡åº”ç”¨å¤–çš„æŸç§æœºåˆ¶å°†æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæœ€å°åŒ–å¯¹åº”ç”¨çš„ä¾µå…¥æ€§ï¼Œæ¯”å¦‚Airbnbçš„SmartStackï¼ŒHashiCorpçš„Consul
  DNSï¼šå°†æœåŠ¡æ³¨å†Œä¸ºDNSçš„SRVè®°å½•ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„åº”ç”¨å¤–æ³¨å†Œæ–¹å¼ï¼ŒSkyDNSæ˜¯å…¶ä¸­çš„ä»£è¡¨
   æ³¨1ï¼šå¯¹äºç¬¬ä¸€ç±»æ³¨å†Œæ–¹å¼ï¼Œé™¤äº†Eurekaè¿™ç§ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œè¿˜å¯ä»¥åŸºäºZooKeeperæˆ–è€…Etcdè‡ªè¡Œå®ç°ä¸€å¥—æœåŠ¡æ³¨å†Œæœºåˆ¶ï¼Œè¿™åœ¨å¤§å…¬å¸æ¯”è¾ƒå¸¸è§ï¼Œä½†å¯¹äºå°å…¬å¸è€Œè¨€æ˜¾ç„¶æ€§ä»·æ¯”å¤ªä½ã€‚
æ³¨2ï¼šç”±äºDNSå›ºæœ‰çš„ç¼“å­˜ç¼ºé™·ï¼Œæœ¬æ–‡ä¸å¯¹ç¬¬ä¸‰ç±»æ³¨å†Œæ–¹å¼ä½œæ·±å…¥æ¢è®¨ã€‚
 é™¤äº†åŸºæœ¬çš„æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶ï¼Œä»å¼€å‘å’Œè¿ç»´è§’åº¦ï¼Œè‡³å°‘è¿˜è¦è€ƒè™‘å¦‚ä¸‹äº”ä¸ªæ–¹é¢ï¼š
  æµ‹æ´»ï¼šæœåŠ¡æ³¨å†Œä¹‹åï¼Œå¦‚ä½•å¯¹æœåŠ¡è¿›è¡Œæµ‹æ´»ä»¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Ÿ
  è´Ÿè½½å‡è¡¡ï¼šå½“å­˜åœ¨å¤šä¸ªæœåŠ¡æä¾›è€…æ—¶ï¼Œå¦‚ä½•å‡è¡¡å„ä¸ªæä¾›è€…çš„è´Ÿè½½ï¼Ÿ
  é›†æˆï¼šåœ¨æœåŠ¡æä¾›ç«¯æˆ–è€…è°ƒç”¨ç«¯ï¼Œå¦‚ä½•é›†æˆæ³¨å†Œä¸­å¿ƒï¼Ÿ
  è¿è¡Œæ—¶ä¾èµ–ï¼šå¼•å…¥æ³¨å†Œä¸­å¿ƒä¹‹åï¼Œå¯¹åº”ç”¨çš„è¿è¡Œæ—¶ç¯å¢ƒæœ‰ä½•å½±å“ï¼Ÿ
  å¯ç”¨æ€§ï¼šå¦‚ä½•ä¿è¯æ³¨å†Œä¸­å¿ƒæœ¬èº«çš„å¯ç”¨æ€§ï¼Œç‰¹åˆ«æ˜¯æ¶ˆé™¤å•ç‚¹æ•…éšœï¼Ÿ
  ä¸»æµæ³¨å†Œä¸­å¿ƒäº§å“  è½¯ä»¶äº§å“ç‰¹æ€§å¹¶éä¸€æˆä¸å˜ï¼Œå¦‚æœå‘ç°åŠŸèƒ½ç‰¹æ€§æœ‰å˜æ›´ï¼Œæ¬¢è¿è¯„è®ºæŒ‡æ­£
     Nacos Eureka Consul CoreDNS Zookeeper     ä¸€è‡´æ€§åè®® CP+AP AP CP â€” CP   å¥åº·æ£€æŸ¥ TCP/HTTP/MYSQL/Client Beat Client Beat TCP/HTTP/gRPC/Cmd â€” Keep Alive   è´Ÿè½½å‡è¡¡ç­–ç•¥ æƒé‡/ metadata/Selector Ribbon Fabio RoundRobin â€”   é›ªå´©ä¿æŠ¤ æœ‰ æœ‰ æ—  æ—  æ—    è‡ªåŠ¨æ³¨é”€å®ä¾‹ æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ   è®¿é—®åè®® HTTP/DNS HTTP HTTP/DNS DNS TCP   ç›‘å¬æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ   å¤šæ•°æ®ä¸­å¿ƒ æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ ä¸æ”¯æŒ   è·¨æ³¨å†Œä¸­å¿ƒåŒæ­¥ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ ä¸æ”¯æŒ   SpringCloudé›†æˆ æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ   Dubboé›†æˆ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ   K8Sé›†æˆ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ      Consulæ˜¯æ”¯æŒè‡ªåŠ¨æ³¨é”€æœåŠ¡å®ä¾‹ï¼Œ è¯·è§æ–‡æ¡£ï¼š https://www.</description>
    </item>
    
    <item>
      <title>åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹å¼</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E6%96%B9%E5%BC%8F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E6%96%B9%E5%BC%8F/</guid>
      <description>ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ†å¸ƒå¼IDï¼Ÿ åœ¨è¯´åˆ†å¸ƒå¼IDçš„å…·ä½“å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥ç®€å•åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆç”¨åˆ†å¸ƒå¼IDï¼Ÿåˆ†å¸ƒå¼IDåº”è¯¥æ»¡è¶³å“ªäº›ç‰¹å¾ï¼Ÿ
1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼IDï¼Ÿ æ‹¿MySQLæ•°æ®åº“ä¸¾ä¸ªæ —å­ï¼š
åœ¨æˆ‘ä»¬ä¸šåŠ¡æ•°æ®é‡ä¸å¤§çš„æ—¶å€™ï¼Œå•åº“å•è¡¨å®Œå…¨å¯ä»¥æ”¯æ’‘ç°æœ‰ä¸šåŠ¡ï¼Œæ•°æ®å†å¤§ä¸€ç‚¹æä¸ªMySQLä¸»ä»åŒæ­¥è¯»å†™åˆ†ç¦»ä¹Ÿèƒ½å¯¹ä»˜ã€‚
ä½†éšç€æ•°æ®æ—¥æ¸å¢é•¿ï¼Œä¸»ä»åŒæ­¥ä¹Ÿæ‰›ä¸ä½äº†ï¼Œå°±éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Œä½†åˆ†åº“åˆ†è¡¨åéœ€è¦æœ‰ä¸€ä¸ªå”¯ä¸€IDæ¥æ ‡è¯†ä¸€æ¡æ•°æ®ï¼Œæ•°æ®åº“çš„è‡ªå¢IDæ˜¾ç„¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼›ç‰¹åˆ«ä¸€ç‚¹çš„å¦‚è®¢å•ã€ä¼˜æƒ åˆ¸ä¹Ÿéƒ½éœ€è¦æœ‰å”¯ä¸€IDåšæ ‡è¯†ã€‚æ­¤æ—¶ä¸€ä¸ªèƒ½å¤Ÿç”Ÿæˆå…¨å±€å”¯ä¸€IDçš„ç³»ç»Ÿæ˜¯éå¸¸å¿…è¦çš„ã€‚é‚£ä¹ˆè¿™ä¸ªå…¨å±€å”¯ä¸€IDå°±å«åˆ†å¸ƒå¼IDã€‚
2ã€é‚£ä¹ˆåˆ†å¸ƒå¼IDéœ€è¦æ»¡è¶³é‚£äº›æ¡ä»¶ï¼Ÿ  å…¨å±€å”¯ä¸€ï¼šå¿…é¡»ä¿è¯IDæ˜¯å…¨å±€æ€§å”¯ä¸€çš„ï¼ŒåŸºæœ¬è¦æ±‚ é«˜æ€§èƒ½ï¼šé«˜å¯ç”¨ä½å»¶æ—¶ï¼ŒIDç”Ÿæˆå“åº”è¦å—ï¼Œå¦åˆ™åå€’ä¼šæˆä¸ºä¸šåŠ¡ç“¶é¢ˆ é«˜å¯ç”¨ï¼š100%çš„å¯ç”¨æ€§æ˜¯éª—äººçš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ— é™æ¥è¿‘äº100%çš„å¯ç”¨æ€§ å¥½æ¥å…¥ï¼šè¦ç§‰ç€æ‹¿æ¥å³ç”¨çš„è®¾è®¡åŸåˆ™ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡å’Œå®ç°ä¸Šè¦å°½å¯èƒ½çš„ç®€å• è¶‹åŠ¿é€’å¢ï¼šæœ€å¥½è¶‹åŠ¿é€’å¢ï¼Œè¿™ä¸ªè¦æ±‚å°±å¾—çœ‹å…·ä½“ä¸šåŠ¡åœºæ™¯äº†ï¼Œä¸€èˆ¬ä¸ä¸¥æ ¼è¦æ±‚  äºŒã€ åˆ†å¸ƒå¼IDéƒ½æœ‰å“ªäº›ç”Ÿæˆæ–¹å¼ï¼Ÿ ä»Šå¤©ä¸»è¦åˆ†æä¸€ä¸‹ä»¥ä¸‹9ç§ï¼Œåˆ†å¸ƒå¼IDç”Ÿæˆå™¨æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹ï¼š
 UUID æ•°æ®åº“è‡ªå¢ID æ•°æ®åº“å¤šä¸»æ¨¡å¼ å·æ®µæ¨¡å¼ Redis é›ªèŠ±ç®—æ³•ï¼ˆSnowFlakeï¼‰ æ»´æ»´å‡ºå“ï¼ˆTinyIDï¼‰ ç™¾åº¦ ï¼ˆUidgeneratorï¼‰ ç¾å›¢ï¼ˆLeafï¼‰  é‚£ä¹ˆå®ƒä»¬éƒ½æ˜¯å¦‚ä½•å®ç°ï¼Ÿä»¥åŠå„è‡ªæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿæˆ‘ä»¬å¾€ä¸‹çœ‹
 ä»¥ä¸Šå›¾ç‰‡æºè‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè”ç³»åˆ é™¤
 1ã€åŸºäºUUID åœ¨Javaçš„ä¸–ç•Œé‡Œï¼Œæƒ³è¦å¾—åˆ°ä¸€ä¸ªå…·æœ‰å”¯ä¸€æ€§çš„IDï¼Œé¦–å…ˆè¢«æƒ³åˆ°å¯èƒ½å°±æ˜¯UUIDï¼Œæ¯•ç«Ÿå®ƒæœ‰ç€å…¨çƒå”¯ä¸€çš„ç‰¹æ€§ã€‚é‚£ä¹ˆUUIDå¯ä»¥åšåˆ†å¸ƒå¼IDå—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¹¶ä¸æ¨èï¼
public static void main(String[] args) { String uuid = UUID.randomUUID().toString().replaceAll(&amp;#34;-&amp;#34;,&amp;#34;&amp;#34;); System.out.println(uuid); } UUIDçš„ç”Ÿæˆç®€å•åˆ°åªæœ‰ä¸€è¡Œä»£ç ï¼Œè¾“å‡ºç»“æœ c2b8c2b9e46c47e3b30dca3b0d447718ï¼Œä½†UUIDå´å¹¶ä¸é€‚ç”¨äºå®é™…çš„ä¸šåŠ¡éœ€æ±‚ã€‚åƒç”¨ä½œè®¢å•å·UUIDè¿™æ ·çš„å­—ç¬¦ä¸²æ²¡æœ‰ä¸æ¯«çš„æ„ä¹‰ï¼Œçœ‹ä¸å‡ºå’Œè®¢å•ç›¸å…³çš„æœ‰ç”¨ä¿¡æ¯ï¼›è€Œå¯¹äºæ•°æ®åº“æ¥è¯´ç”¨ä½œä¸šåŠ¡ä¸»é”®IDï¼Œå®ƒä¸ä»…æ˜¯å¤ªé•¿è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œå­˜å‚¨æ€§èƒ½å·®æŸ¥è¯¢ä¹Ÿå¾ˆè€—æ—¶ï¼Œæ‰€ä»¥ä¸æ¨èç”¨ä½œåˆ†å¸ƒå¼IDã€‚
ä¼˜ç‚¹ï¼š
 ç”Ÿæˆè¶³å¤Ÿç®€å•ï¼Œæœ¬åœ°ç”Ÿæˆæ— ç½‘ç»œæ¶ˆè€—ï¼Œå…·æœ‰å”¯ä¸€æ€§  ç¼ºç‚¹ï¼š
 æ— åºçš„å­—ç¬¦ä¸²ï¼Œä¸å…·å¤‡è¶‹åŠ¿è‡ªå¢ç‰¹æ€§ æ²¡æœ‰å…·ä½“çš„ä¸šåŠ¡å«ä¹‰ é•¿åº¦è¿‡é•¿16 å­—èŠ‚128ä½ï¼Œ36ä½é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå­˜å‚¨ä»¥åŠæŸ¥è¯¢å¯¹MySQLçš„æ€§èƒ½æ¶ˆè€—è¾ƒå¤§ï¼ŒMySQLå®˜æ–¹æ˜ç¡®å»ºè®®ä¸»é”®è¦å°½é‡è¶ŠçŸ­è¶Šå¥½ï¼Œä½œä¸ºæ•°æ®åº“ä¸»é”® UUID çš„æ— åºæ€§ä¼šå¯¼è‡´æ•°æ®ä½ç½®é¢‘ç¹å˜åŠ¨ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚  2ã€åŸºäºæ•°æ®åº“è‡ªå¢ID åŸºäºæ•°æ®åº“çš„auto_incrementè‡ªå¢IDå®Œå…¨å¯ä»¥å……å½“åˆ†å¸ƒå¼IDï¼Œå…·ä½“å®ç°ï¼šéœ€è¦ä¸€ä¸ªå•ç‹¬çš„MySQLå®ä¾‹ç”¨æ¥ç”ŸæˆIDï¼Œå»ºè¡¨ç»“æ„å¦‚ä¸‹ï¼š
CREATE DATABASE `SEQ_ID`; CREATE TABLE SEQID.SEQUENCE_ID ( id bigint(20) unsigned NOT NULL auto_increment, value char(10) NOT NULL default &amp;#39;&amp;#39;, PRIMARY KEY (id), ) ENGINE=MyISAM; insert into SEQUENCE_ID(value) VALUES (&amp;#39;values&amp;#39;); å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªIDçš„æ—¶å€™ï¼Œå‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•è¿”å›ä¸»é”®IDï¼Œä½†è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªæ¯”è¾ƒè‡´å‘½çš„ç¼ºç‚¹ï¼Œè®¿é—®é‡æ¿€å¢æ—¶MySQLæœ¬èº«å°±æ˜¯ç³»ç»Ÿçš„ç“¶é¢ˆï¼Œç”¨å®ƒæ¥å®ç°åˆ†å¸ƒå¼æœåŠ¡é£é™©æ¯”è¾ƒå¤§ï¼Œä¸æ¨èï¼</description>
    </item>
    
    <item>
      <title>åˆ†å¸ƒå¼äº‹åŠ¡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</guid>
      <description>2PCå¯¹å¤šæ–¹èµ„æºè¿›è¡Œå…¨å±€é”å®šï¼Œéå¸¸å½±å“æ€§èƒ½ï¼Œä¾‹å¦‚Spring JTAï¼›3PCå°è¯•è§£å†³2PCçš„é—®é¢˜ï¼Œå¼•å…¥èµ„æºå‚ä¸è€…è¶…æ—¶æœºåˆ¶ï¼Œä¸€æ–¹èµ„æºå‚ä¸è€…ä¸å¯ç”¨ä¸è‡³äºå¯¼è‡´å…¨å±€èµ„æºé”å®šç­‰æªæ–½ï¼Œä½†æ˜¯æ”¶æ•ˆç”šå¾®ï¼Œä¸”ä½¿å¾—äº¤äº’æµç¨‹å˜é•¿å˜å¤æ‚ï¼›TCCéœ€è¦ä¸šåŠ¡ç³»ç»Ÿè‡ªå·±é’ˆå¯¹æ¯ä¸€ä¸ªæ“ä½œå®ç°Try - Confirm - Cancel æ–¹æ³•ï¼Œå¥½å¤„æ˜¯å¯ä»¥è·¨æ•°æ®åº“ã€è·¨ä¸åŒçš„ä¸šåŠ¡ç³»ç»Ÿå®ç°äº‹åŠ¡ï¼Œåå¤„æ˜¯ä¸ä¸šåŠ¡ä»£ç è€¦åˆï¼ˆå‚è€ƒSeataçš„TCCæ¨¡å¼ï¼‰ï¼›Sagaå‚ä¸è€…æäº¤è‡ªå·±çš„æœ¬åœ°äº‹åŠ¡ï¼Œä½†æ˜¯æ¯ä¸ªæ­£å‘äº‹åŠ¡æ“ä½œï¼Œå°±è¦å¯¹åº”ä¸€ä¸ªé€†å‘çš„è¡¥å¿äº‹åŠ¡æ“ä½œï¼ˆå‚è€ƒSeataçš„Sagaæ¨¡å¼ï¼‰;æ€§ä»·æ¯”æœ€é«˜çš„åˆ†å¸ƒå¼äº‹åŠ¡åº”è¯¥è¦æ•°æœ¬åœ°æ¶ˆæ¯è¡¨ï¼›è¿˜å¯ä»¥ä½¿ç”¨RocketMQæ¶ˆæ¯äº‹åŠ¡ï¼Œå¦‚æœMQä¸æ”¯æŒæ¶ˆæ¯äº‹åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨MQ+æœ¬åœ°æ¶ˆæ¯è¡¨è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœã€‚
åˆ†å¸ƒå¼äº‹åŠ¡é¡¾åæ€ä¹‰å°±æ˜¯è¦åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°äº‹åŠ¡ï¼Œå®ƒå…¶å®æ˜¯ç”±å¤šä¸ªæœ¬åœ°äº‹åŠ¡ç»„åˆè€Œæˆã€‚å¯¹äºåˆ†å¸ƒå¼äº‹åŠ¡è€Œè¨€å‡ ä¹æ»¡è¶³ä¸äº† ACIDï¼Œå…¶å®å¯¹äºå•æœºäº‹åŠ¡è€Œè¨€å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿæ²¡æœ‰æ»¡è¶³ ACIDï¼Œä¸ç„¶æ€ä¹ˆä¼šæœ‰å››ç§éš”ç¦»çº§åˆ«å‘¢ï¼Ÿæ‰€ä»¥æ›´åˆ«è¯´åˆ†å¸ƒåœ¨ä¸åŒæ•°æ®åº“æˆ–è€…ä¸åŒåº”ç”¨ä¸Šçš„åˆ†å¸ƒå¼äº‹åŠ¡äº†ã€‚
2PC 2PCï¼ˆTwo-phase commit protocolï¼‰ï¼Œä¸­æ–‡å«äºŒé˜¶æ®µæäº¤ã€‚ äºŒé˜¶æ®µæäº¤æ˜¯ä¸€ç§å¼ºä¸€è‡´æ€§è®¾è®¡ï¼Œ2PC å¼•å…¥ä¸€ä¸ªäº‹åŠ¡åè°ƒè€…çš„è§’è‰²æ¥åè°ƒç®¡ç†å„å‚ä¸è€…ï¼ˆä¹Ÿå¯ç§°ä¹‹ä¸ºå„æœ¬åœ°èµ„æºï¼‰çš„æäº¤å’Œå›æ»šï¼ŒäºŒé˜¶æ®µåˆ†åˆ«æŒ‡çš„æ˜¯å‡†å¤‡ï¼ˆæŠ•ç¥¨ï¼‰å’Œæäº¤ä¸¤ä¸ªé˜¶æ®µã€‚
**å‡†å¤‡é˜¶æ®µ**åè°ƒè€…ä¼šç»™å„å‚ä¸è€…å‘é€å‡†å¤‡å‘½ä»¤ï¼Œä½ å¯ä»¥æŠŠå‡†å¤‡å‘½ä»¤ç†è§£æˆé™¤äº†æäº¤äº‹åŠ¡ä¹‹å¤–å•¥äº‹éƒ½åšå®Œäº†ã€‚
åŒæ­¥ç­‰å¾…æ‰€æœ‰èµ„æºçš„å“åº”ä¹‹åå°±è¿›å…¥ç¬¬äºŒé˜¶æ®µå³**æäº¤é˜¶æ®µ**ï¼ˆæ³¨æ„æäº¤é˜¶æ®µä¸ä¸€å®šæ˜¯æäº¤äº‹åŠ¡ï¼Œä¹Ÿå¯èƒ½æ˜¯å›æ»šäº‹åŠ¡ï¼‰ã€‚
å‡å¦‚åœ¨ç¬¬ä¸€é˜¶æ®µæ‰€æœ‰å‚ä¸è€…éƒ½è¿”å›å‡†å¤‡æˆåŠŸï¼Œé‚£ä¹ˆåè°ƒè€…åˆ™å‘æ‰€æœ‰å‚ä¸è€…å‘é€æäº¤äº‹åŠ¡å‘½ä»¤ï¼Œç„¶åç­‰å¾…æ‰€æœ‰äº‹åŠ¡éƒ½æäº¤æˆåŠŸä¹‹åï¼Œè¿”å›äº‹åŠ¡æ‰§è¡ŒæˆåŠŸã€‚
å‡å¦‚åœ¨ç¬¬ä¸€é˜¶æ®µæœ‰ä¸€ä¸ªå‚ä¸è€…è¿”å›å¤±è´¥ï¼Œé‚£ä¹ˆåè°ƒè€…å°±ä¼šå‘æ‰€æœ‰å‚ä¸è€…å‘é€å›æ»šäº‹åŠ¡çš„è¯·æ±‚ï¼Œå³åˆ†å¸ƒå¼äº‹åŠ¡æ‰§è¡Œå¤±è´¥ã€‚
é¦–å…ˆ 2PC æ˜¯ä¸€ä¸ªåŒæ­¥é˜»å¡åè®®ï¼Œåƒç¬¬ä¸€é˜¶æ®µåè°ƒè€…ä¼šç­‰å¾…æ‰€æœ‰å‚ä¸è€…å“åº”æ‰ä¼šè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œå½“ç„¶ç¬¬ä¸€é˜¶æ®µçš„åè°ƒè€…æœ‰è¶…æ—¶æœºåˆ¶ï¼Œå‡è®¾å› ä¸ºç½‘ç»œåŸå› æ²¡æœ‰æ”¶åˆ°æŸå‚ä¸è€…çš„å“åº”æˆ–æŸå‚ä¸è€…æŒ‚äº†ï¼Œé‚£ä¹ˆè¶…æ—¶åå°±ä¼šåˆ¤æ–­äº‹åŠ¡å¤±è´¥ï¼Œå‘æ‰€æœ‰å‚ä¸è€…å‘é€å›æ»šå‘½ä»¤ã€‚
åœ¨ç¬¬äºŒé˜¶æ®µåè°ƒè€…çš„æ²¡æ³•è¶…æ—¶ï¼Œåªèƒ½ä¸æ–­é‡è¯•ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š
ç¬¬ä¸€ç§æ˜¯ç¬¬äºŒé˜¶æ®µæ‰§è¡Œçš„æ˜¯å›æ»šäº‹åŠ¡æ“ä½œï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¯ä¸æ–­é‡è¯•ï¼Œç›´åˆ°æ‰€æœ‰å‚ä¸è€…éƒ½å›æ»šäº†ï¼Œä¸ç„¶é‚£äº›åœ¨ç¬¬ä¸€é˜¶æ®µå‡†å¤‡æˆåŠŸçš„å‚ä¸è€…ä¼šä¸€ç›´é˜»å¡ç€ã€‚
ç¬¬äºŒç§æ˜¯ç¬¬äºŒé˜¶æ®µæ‰§è¡Œçš„æ˜¯æäº¤äº‹åŠ¡æ“ä½œï¼Œé‚£ä¹ˆç­”æ¡ˆä¹Ÿæ˜¯ä¸æ–­é‡è¯•ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸€äº›å‚ä¸è€…çš„äº‹åŠ¡å·²ç»æäº¤æˆåŠŸäº†ï¼Œè¿™ä¸ªæ—¶å€™åªæœ‰ä¸€æ¡è·¯ï¼Œå°±æ˜¯å¤´é“å¾€å‰å†²ï¼Œä¸æ–­çš„é‡è¯•ï¼Œç›´åˆ°æäº¤æˆåŠŸï¼Œåˆ°æœ€åçœŸçš„ä¸è¡Œåªèƒ½äººå·¥ä»‹å…¥å¤„ç†ã€‚
è‡³æ­¤æˆ‘ä»¬å·²ç»è¯¦ç»†çš„åˆ†æçš„ 2PC çš„å„ç§ç»†èŠ‚ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼š
 2PC æ˜¯ä¸€ç§å°½é‡ä¿è¯å¼ºä¸€è‡´æ€§çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå› æ­¤å®ƒæ˜¯åŒæ­¥é˜»å¡çš„ï¼Œè€ŒåŒæ­¥é˜»å¡å°±å¯¼è‡´é•¿ä¹…çš„èµ„æºé”å®šé—®é¢˜ï¼Œæ€»ä½“è€Œè¨€æ•ˆç‡ä½ï¼Œå¹¶ä¸”å­˜åœ¨å•ç‚¹æ•…éšœé—®é¢˜ï¼Œåœ¨æç«¯æ¡ä»¶ä¸‹å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚
å½“ç„¶å…·ä½“çš„å®ç°å¯ä»¥å˜å½¢ï¼Œè€Œä¸” 2PC ä¹Ÿæœ‰å˜ç§ï¼Œä¾‹å¦‚ Tree 2PCã€Dynamic 2PCã€‚
è¿˜æœ‰ä¸€ç‚¹ä¸çŸ¥é“ä½ ä»¬çœ‹å‡ºæ¥æ²¡ï¼Œ2PC é€‚ç”¨äºæ•°æ®åº“å±‚é¢çš„åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ï¼Œè€Œæˆ‘ä»¬ä¸šåŠ¡éœ€æ±‚æœ‰æ—¶å€™ä¸ä»…ä»…å…³ä¹æ•°æ®åº“ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸Šä¼ ä¸€å¼ å›¾ç‰‡æˆ–è€…å‘é€ä¸€æ¡çŸ­ä¿¡ã€‚
è€Œä¸”åƒ Java ä¸­çš„ JTA åªèƒ½è§£å†³ä¸€ä¸ªåº”ç”¨ä¸‹å¤šæ•°æ®åº“çš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œè·¨æœåŠ¡äº†å°±ä¸èƒ½ç”¨äº†ã€‚
ç®€å•è¯´ä¸‹ Java ä¸­ JTAï¼Œå®ƒæ˜¯åŸºäºXAè§„èŒƒå®ç°çš„äº‹åŠ¡æ¥å£ï¼Œè¿™é‡Œçš„ XA ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºåŸºäºæ•°æ®åº“çš„ XA è§„èŒƒæ¥å®ç°çš„ 2PCã€‚
 3PC 3PC çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ 2PC çš„ä¸€äº›é—®é¢˜ï¼Œç›¸æ¯”äº 2PC å®ƒåœ¨å‚ä¸è€…ä¸­ä¹Ÿå¼•å…¥äº†è¶…æ—¶æœºåˆ¶ï¼Œå¹¶ä¸”æ–°å¢äº†ä¸€ä¸ªé˜¶æ®µä½¿å¾—å‚ä¸è€…å¯ä»¥åˆ©ç”¨è¿™ä¸€ä¸ªé˜¶æ®µç»Ÿä¸€å„è‡ªçš„çŠ¶æ€ã€‚
è®©æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸€ä¸‹ã€‚
3PC åŒ…å«äº†ä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯**å‡†å¤‡é˜¶æ®µã€é¢„æäº¤é˜¶æ®µã€æäº¤é˜¶æ®µ**ï¼Œå¯¹åº”çš„è‹±æ–‡å°±æ˜¯ï¼šCanCommitã€PreCommit ã€ DoCommitã€‚
çœ‹èµ·æ¥æ˜¯æŠŠ 2PC çš„æäº¤é˜¶æ®µå˜æˆäº†é¢„æäº¤é˜¶æ®µå’Œæäº¤é˜¶æ®µï¼Œä½†æ˜¯ 3PC çš„å‡†å¤‡é˜¶æ®µåè°ƒè€…åªæ˜¯è¯¢é—®å‚ä¸è€…çš„è‡ªèº«çŠ¶å†µï¼Œæ¯”å¦‚ä½ ç°åœ¨è¿˜å¥½å—ï¼Ÿè´Ÿè½½é‡ä¸é‡ï¼Ÿè¿™ç±»çš„ã€‚</description>
    </item>
    
    <item>
      <title>å·ç§¯ç¥ç»ç½‘ç»œ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9Ccnn/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9Ccnn/</guid>
      <description>åœ¨ CNN å‡ºç°ä¹‹å‰ï¼Œå›¾åƒå¯¹äºäººå·¥æ™ºèƒ½æ¥è¯´æ˜¯ä¸€ä¸ªéš¾é¢˜ï¼Œæœ‰2ä¸ªåŸå› ï¼š
 å›¾åƒéœ€è¦å¤„ç†çš„æ•°æ®é‡å¤ªå¤§ï¼Œå¯¼è‡´æˆæœ¬å¾ˆé«˜ï¼Œæ•ˆç‡å¾ˆä½ å›¾åƒåœ¨æ•°å­—åŒ–çš„è¿‡ç¨‹ä¸­å¾ˆéš¾ä¿ç•™åŸæœ‰çš„ç‰¹å¾ï¼Œå¯¼è‡´å›¾åƒå¤„ç†çš„å‡†ç¡®ç‡ä¸é«˜  ä¸‹é¢å°±è¯¦ç»†è¯´æ˜ä¸€ä¸‹è¿™2ä¸ªé—®é¢˜ï¼š
éœ€è¦å¤„ç†çš„æ•°æ®é‡å¤ªå¤§ å›¾åƒæ˜¯ç”±åƒç´ æ„æˆçš„ï¼Œæ¯ä¸ªåƒç´ åˆæ˜¯ç”±é¢œè‰²æ„æˆçš„ã€‚
ç°åœ¨éšéšä¾¿ä¾¿ä¸€å¼ å›¾ç‰‡éƒ½æ˜¯ 1000Ã—1000 åƒç´ ä»¥ä¸Šçš„ï¼Œ æ¯ä¸ªåƒç´ éƒ½æœ‰RGB 3ä¸ªå‚æ•°æ¥è¡¨ç¤ºé¢œè‰²ä¿¡æ¯ã€‚
å‡å¦‚æˆ‘ä»¬å¤„ç†ä¸€å¼  1000Ã—1000 åƒç´ çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†3ç™¾ä¸‡ä¸ªå‚æ•°ï¼
1000Ã—1000Ã—3=3,000,000
è¿™ä¹ˆå¤§é‡çš„æ•°æ®å¤„ç†èµ·æ¥æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ï¼Œè€Œä¸”è¿™åªæ˜¯ä¸€å¼ ä¸ç®—å¤ªå¤§çš„å›¾ç‰‡ï¼
å·ç§¯ç¥ç»ç½‘ç»œ â€“ CNN è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯ã€Œå°†å¤æ‚é—®é¢˜ç®€åŒ–ã€ï¼ŒæŠŠå¤§é‡å‚æ•°é™ç»´æˆå°‘é‡å‚æ•°ï¼Œå†åšå¤„ç†ã€‚
æ›´é‡è¦çš„æ˜¯ï¼šæˆ‘ä»¬åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œé™ç»´å¹¶ä¸ä¼šå½±å“ç»“æœã€‚æ¯”å¦‚1000åƒç´ çš„å›¾ç‰‡ç¼©å°æˆ200åƒç´ ï¼Œå¹¶ä¸å½±å“è‚‰çœ¼è®¤å‡ºæ¥å›¾ç‰‡ä¸­æ˜¯ä¸€åªçŒ«è¿˜æ˜¯ä¸€åªç‹—ï¼Œæœºå™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
ä¿ç•™å›¾åƒç‰¹å¾ å›¾ç‰‡æ•°å­—åŒ–çš„ä¼ ç»Ÿæ–¹å¼æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ï¼Œå°±ç±»ä¼¼ä¸‹å›¾çš„è¿‡ç¨‹ï¼š
å‡å¦‚æœ‰åœ†å½¢æ˜¯1ï¼Œæ²¡æœ‰åœ†å½¢æ˜¯0ï¼Œé‚£ä¹ˆåœ†å½¢çš„ä½ç½®ä¸åŒå°±ä¼šäº§ç”Ÿå®Œå…¨ä¸åŒçš„æ•°æ®è¡¨è¾¾ã€‚ä½†æ˜¯ä»è§†è§‰çš„è§’åº¦æ¥çœ‹ï¼Œå›¾åƒçš„å†…å®¹ï¼ˆæœ¬è´¨ï¼‰å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯ä½ç½®å‘ç”Ÿäº†å˜åŒ–ã€‚
æ‰€ä»¥å½“æˆ‘ä»¬ç§»åŠ¨å›¾åƒä¸­çš„ç‰©ä½“ï¼Œç”¨ä¼ ç»Ÿçš„æ–¹å¼çš„å¾—å‡ºæ¥çš„å‚æ•°ä¼šå·®å¼‚å¾ˆå¤§ï¼è¿™æ˜¯ä¸ç¬¦åˆå›¾åƒå¤„ç†çš„è¦æ±‚çš„ã€‚
è€Œ CNN è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä»–ç”¨ç±»ä¼¼è§†è§‰çš„æ–¹å¼ä¿ç•™äº†å›¾åƒçš„ç‰¹å¾ï¼Œå½“å›¾åƒåšç¿»è½¬ï¼Œæ—‹è½¬æˆ–è€…å˜æ¢ä½ç½®æ—¶ï¼Œå®ƒä¹Ÿèƒ½æœ‰æ•ˆçš„è¯†åˆ«å‡ºæ¥æ˜¯ç±»ä¼¼çš„å›¾åƒã€‚
é‚£ä¹ˆå·ç§¯ç¥ç»ç½‘ç»œæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿåœ¨æˆ‘ä»¬äº†è§£ CNN åŸç†ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹äººç±»çš„è§†è§‰åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
1. äººç±»çš„è§†è§‰åŸç† æ·±åº¦å­¦ä¹ çš„è®¸å¤šç ”ç©¶æˆæœï¼Œç¦»ä¸å¼€å¯¹å¤§è„‘è®¤çŸ¥åŸç†çš„ç ”ç©¶ï¼Œå°¤å…¶æ˜¯è§†è§‰åŸç†çš„ç ”ç©¶ã€‚
1981 å¹´çš„è¯ºè´å°”åŒ»å­¦å¥–ï¼Œé¢å‘ç»™äº† David Hubelï¼ˆå‡ºç”ŸäºåŠ æ‹¿å¤§çš„ç¾å›½ç¥ç»ç”Ÿç‰©å­¦å®¶ï¼‰ å’ŒTorstenWieselï¼Œä»¥åŠ Roger Sperryã€‚å‰ä¸¤ä½çš„ä¸»è¦è´¡çŒ®ï¼Œæ˜¯â€œå‘ç°äº†è§†è§‰ç³»ç»Ÿçš„ä¿¡æ¯å¤„ç†â€ï¼Œå¯è§†çš®å±‚æ˜¯åˆ†çº§çš„ã€‚
äººç±»çš„è§†è§‰åŸç†å¦‚ä¸‹ï¼šä»åŸå§‹ä¿¡å·æ‘„å…¥å¼€å§‹ï¼ˆç³å­”æ‘„å…¥åƒç´  Pixelsï¼‰ï¼Œæ¥ç€åšåˆæ­¥å¤„ç†ï¼ˆå¤§è„‘çš®å±‚æŸäº›ç»†èƒå‘ç°è¾¹ç¼˜å’Œæ–¹å‘ï¼‰ï¼Œç„¶åæŠ½è±¡ï¼ˆå¤§è„‘åˆ¤å®šï¼Œçœ¼å‰çš„ç‰©ä½“çš„å½¢çŠ¶ï¼Œæ˜¯åœ†å½¢çš„ï¼‰ï¼Œç„¶åè¿›ä¸€æ­¥æŠ½è±¡ï¼ˆå¤§è„‘è¿›ä¸€æ­¥åˆ¤å®šè¯¥ç‰©ä½“æ˜¯åªæ°”çƒï¼‰ã€‚ä¸‹é¢æ˜¯äººè„‘è¿›è¡Œäººè„¸è¯†åˆ«çš„ä¸€ä¸ªç¤ºä¾‹ï¼š
å¯¹äºä¸åŒçš„ç‰©ä½“ï¼Œäººç±»è§†è§‰ä¹Ÿæ˜¯é€šè¿‡è¿™æ ·é€å±‚åˆ†çº§ï¼Œæ¥è¿›è¡Œè®¤çŸ¥çš„ï¼š
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æœ€åº•å±‚ç‰¹å¾åŸºæœ¬ä¸Šæ˜¯ç±»ä¼¼çš„ï¼Œå°±æ˜¯å„ç§è¾¹ç¼˜ï¼Œè¶Šå¾€ä¸Šï¼Œè¶Šèƒ½æå–å‡ºæ­¤ç±»ç‰©ä½“çš„ä¸€äº›ç‰¹å¾ï¼ˆè½®å­ã€çœ¼ç›ã€èº¯å¹²ç­‰ï¼‰ï¼Œåˆ°æœ€ä¸Šå±‚ï¼Œä¸åŒçš„é«˜çº§ç‰¹å¾æœ€ç»ˆç»„åˆæˆç›¸åº”çš„å›¾åƒï¼Œä»è€Œèƒ½å¤Ÿè®©äººç±»å‡†ç¡®çš„åŒºåˆ†ä¸åŒçš„ç‰©ä½“ã€‚
é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾ˆè‡ªç„¶çš„æƒ³åˆ°ï¼šå¯ä»¥ä¸å¯ä»¥æ¨¡ä»¿äººç±»å¤§è„‘çš„è¿™ä¸ªç‰¹ç‚¹ï¼Œæ„é€ å¤šå±‚çš„ç¥ç»ç½‘ç»œï¼Œè¾ƒä½å±‚çš„è¯†åˆ«åˆçº§çš„å›¾åƒç‰¹å¾ï¼Œè‹¥å¹²åº•å±‚ç‰¹å¾ç»„æˆæ›´ä¸Šä¸€å±‚ç‰¹å¾ï¼Œæœ€ç»ˆé€šè¿‡å¤šä¸ªå±‚çº§çš„ç»„åˆï¼Œæœ€ç»ˆåœ¨é¡¶å±‚åšå‡ºåˆ†ç±»å‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™ä¹Ÿæ˜¯è®¸å¤šæ·±åº¦å­¦ä¹ ç®—æ³•ï¼ˆåŒ…æ‹¬CNNï¼‰çš„çµæ„Ÿæ¥æºã€‚
2. å·ç§¯ç¥ç»ç½‘ç»œ-CNN çš„åŸºæœ¬åŸç† å…¸å‹çš„ CNN ç”±3ä¸ªéƒ¨åˆ†æ„æˆï¼š
 å·ç§¯å±‚ æ± åŒ–å±‚ å…¨è¿æ¥å±‚  å¦‚æœç®€å•æ¥æè¿°çš„è¯ï¼šå·ç§¯å±‚è´Ÿè´£æå–å›¾åƒä¸­çš„å±€éƒ¨ç‰¹å¾ï¼›æ± åŒ–å±‚ç”¨æ¥å¤§å¹…é™ä½å‚æ•°é‡çº§(é™ç»´)ï¼›å…¨è¿æ¥å±‚ç±»ä¼¼ä¼ ç»Ÿç¥ç»ç½‘ç»œçš„éƒ¨åˆ†ï¼Œç”¨æ¥è¾“å‡ºæƒ³è¦çš„ç»“æœã€‚
ä¸‹é¢çš„åŸç†è§£é‡Šä¸ºäº†é€šä¿—æ˜“æ‡‚ï¼Œå¿½ç•¥äº†å¾ˆå¤šæŠ€æœ¯ç»†èŠ‚ï¼Œå¦‚æœå¤§å®¶å¯¹è¯¦ç»†çš„åŸç†æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹è¿™ä¸ªè§†é¢‘ã€Šå·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€ ã€‹ã€‚
2.1 å·ç§¯â€”â€”æå–ç‰¹å¾ å·ç§¯å±‚çš„è¿ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼Œç”¨ä¸€ä¸ªå·ç§¯æ ¸æ‰«å®Œæ•´å¼ å›¾ç‰‡ï¼š
è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆå·ç§¯æ ¸ï¼‰æ¥è¿‡æ»¤å›¾åƒçš„å„ä¸ªå°åŒºåŸŸï¼Œä»è€Œå¾—åˆ°è¿™äº›å°åŒºåŸŸçš„ç‰¹å¾å€¼ã€‚
åœ¨å…·ä½“åº”ç”¨ä¸­ï¼Œå¾€å¾€æœ‰å¤šä¸ªå·ç§¯æ ¸ï¼Œå¯ä»¥è®¤ä¸ºï¼Œæ¯ä¸ªå·ç§¯æ ¸ä»£è¡¨äº†ä¸€ç§å›¾åƒæ¨¡å¼ï¼Œå¦‚æœæŸä¸ªå›¾åƒå—ä¸æ­¤å·ç§¯æ ¸å·ç§¯å‡ºçš„å€¼å¤§ï¼Œåˆ™è®¤ä¸ºæ­¤å›¾åƒå—ååˆ†æ¥è¿‘äºæ­¤å·ç§¯æ ¸ã€‚å¦‚æœæˆ‘ä»¬è®¾è®¡äº†6ä¸ªå·ç§¯æ ¸ï¼Œå¯ä»¥ç†è§£ï¼šæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªå›¾åƒä¸Šæœ‰6ç§åº•å±‚çº¹ç†æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨6ä¸­åŸºç¡€æ¨¡å¼å°±èƒ½æç»˜å‡ºä¸€å‰¯å›¾åƒã€‚ä»¥ä¸‹å°±æ˜¯25ç§ä¸åŒçš„å·ç§¯æ ¸çš„ç¤ºä¾‹ï¼š</description>
    </item>
    
    <item>
      <title>å»é™¤è¯·æ±‚pathå‰ç¼€</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E5%8E%BB%E9%99%A4%E8%AF%B7%E6%B1%82path%E5%89%8D%E7%BC%80/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E5%8E%BB%E9%99%A4%E8%AF%B7%E6%B1%82path%E5%89%8D%E7%BC%80/</guid>
      <description>1. proxy_passåé¢åŠ æ ¹è·¯å¾„/ location ^~/user/ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-NginX-Proxy true; proxy_pass http://user/; } ^~/user/è¡¨ç¤ºåŒ¹é…å‰ç¼€æ˜¯userçš„è¯·æ±‚ï¼Œproxy_passçš„ç»“å°¾æœ‰/ï¼Œ åˆ™ä¼šæŠŠ/user/*åé¢çš„è·¯å¾„ç›´æ¥æ‹¼æ¥åˆ°åé¢ï¼Œå³ç§»é™¤userã€‚
2. ä½¿ç”¨rewrite location ^~/user/ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-NginX-Proxy true; rewrite ^/user/(.*)$ /$1 break; proxy_pass http://user; } æ³¨æ„åˆ°proxy_passç»“å°¾æ²¡æœ‰/ï¼Œ rewriteé‡å†™äº†urlã€‚
å‚è€ƒé“¾æ¥ï¼š Nginxä»£ç†proxy passé…ç½®å»é™¤å‰ç¼€ Nginx è½¬å‘åŸŸååœ°å€æŠ¥ 400 Bad Request </description>
    </item>
    
    <item>
      <title>åå‘ä¼ æ’­</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%ADbp/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%ADbp/</guid>
      <description>è¯´åˆ°ç¥ç»ç½‘ç»œï¼Œå¤§å®¶çœ‹åˆ°è¿™ä¸ªå›¾åº”è¯¥ä¸é™Œç”Ÿï¼š
è¿™æ˜¯å…¸å‹çš„ä¸‰å±‚ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ„æˆï¼ŒLayer L1æ˜¯è¾“å…¥å±‚ï¼ŒLayer L2æ˜¯éšå«å±‚ï¼ŒLayer L3æ˜¯éšå«å±‚ï¼Œæˆ‘ä»¬ç°åœ¨æ‰‹é‡Œæœ‰ä¸€å †æ•°æ®{x1,x2,x3,&amp;hellip;,xn},è¾“å‡ºä¹Ÿæ˜¯ä¸€å †æ•°æ®{y1,y2,y3,&amp;hellip;,yn},ç°åœ¨è¦ä»–ä»¬åœ¨éšå«å±‚åšæŸç§å˜æ¢ï¼Œè®©ä½ æŠŠæ•°æ®çŒè¿›å»åå¾—åˆ°ä½ æœŸæœ›çš„è¾“å‡ºã€‚å¦‚æœä½ å¸Œæœ›ä½ çš„è¾“å‡ºå’ŒåŸå§‹è¾“å…¥ä¸€æ ·ï¼Œé‚£ä¹ˆå°±æ˜¯æœ€å¸¸è§çš„è‡ªç¼–ç æ¨¡å‹ï¼ˆAuto-Encoderï¼‰ã€‚å¯èƒ½æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¦è¾“å…¥è¾“å‡ºéƒ½ä¸€æ ·å‘¢ï¼Ÿæœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿå…¶å®åº”ç”¨æŒºå¹¿çš„ï¼Œåœ¨å›¾åƒè¯†åˆ«ï¼Œæ–‡æœ¬åˆ†ç±»ç­‰ç­‰éƒ½ä¼šç”¨åˆ°ï¼Œæˆ‘ä¼šä¸“é—¨å†å†™ä¸€ç¯‡Auto-Encoderçš„æ–‡ç« æ¥è¯´æ˜ï¼ŒåŒ…æ‹¬ä¸€äº›å˜ç§ä¹‹ç±»çš„ã€‚å¦‚æœä½ çš„è¾“å‡ºå’ŒåŸå§‹è¾“å…¥ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±æ˜¯å¾ˆå¸¸è§çš„äººå·¥ç¥ç»ç½‘ç»œäº†ï¼Œç›¸å½“äºè®©åŸå§‹æ•°æ®é€šè¿‡ä¸€ä¸ªæ˜ å°„æ¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„è¾“å‡ºæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®²çš„è¯é¢˜ã€‚
æœ¬æ–‡ç›´æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¸¦å…¥æ•°å€¼æ¼”ç¤ºåå‘ä¼ æ’­æ³•çš„è¿‡ç¨‹ï¼Œå…¬å¼çš„æ¨å¯¼ç­‰åˆ°ä¸‹æ¬¡å†™Auto-Encoderçš„æ—¶å€™å†å†™ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æ¨å¯¼ä¸‹è¯•è¯•ï¼šï¼‰ï¼ˆæ³¨ï¼šæœ¬æ–‡å‡è®¾ä½ å·²ç»æ‡‚å¾—åŸºæœ¬çš„ç¥ç»ç½‘ç»œæ„æˆï¼Œå¦‚æœå®Œå…¨ä¸æ‡‚ï¼Œå¯ä»¥å‚è€ƒPollå†™çš„ç¬”è®°ï¼š[Mechine Learning &amp;amp; Algorithm] ç¥ç»ç½‘ç»œåŸºç¡€ ï¼‰
å‡è®¾ï¼Œä½ æœ‰è¿™æ ·ä¸€ä¸ªç½‘ç»œå±‚ï¼š
ç¬¬ä¸€å±‚æ˜¯è¾“å…¥å±‚ï¼ŒåŒ…å«ä¸¤ä¸ªç¥ç»å…ƒi1ï¼Œi2ï¼Œå’Œæˆªè·é¡¹b1ï¼›ç¬¬äºŒå±‚æ˜¯éšå«å±‚ï¼ŒåŒ…å«ä¸¤ä¸ªç¥ç»å…ƒh1,h2å’Œæˆªè·é¡¹b2ï¼Œç¬¬ä¸‰å±‚æ˜¯è¾“å‡ºo1,o2ï¼Œæ¯æ¡çº¿ä¸Šæ ‡çš„wiæ˜¯å±‚ä¸å±‚ä¹‹é—´è¿æ¥çš„æƒé‡ï¼Œæ¿€æ´»å‡½æ•°æˆ‘ä»¬é»˜è®¤ä¸ºsigmoidå‡½æ•°ã€‚
ç°åœ¨å¯¹ä»–ä»¬èµ‹ä¸Šåˆå€¼ï¼Œå¦‚ä¸‹å›¾ï¼š
å…¶ä¸­ï¼Œè¾“å…¥æ•°æ® i1=0.05ï¼Œi2=0.10;
ã€€è¾“å‡ºæ•°æ® o1=0.01,o2=0.99;
ã€€åˆå§‹æƒé‡ w1=0.15,w2=0.20,w3=0.25,w4=0.30;
ã€€w5=0.40,w6=0.45,w7=0.50,w8=0.55
ç›®æ ‡ï¼šç»™å‡ºè¾“å…¥æ•°æ®i1,i2(0.05å’Œ0.10)ï¼Œä½¿è¾“å‡ºå°½å¯èƒ½ä¸åŸå§‹è¾“å‡ºo1,o2(0.01å’Œ0.99)æ¥è¿‘ã€‚
Step 1 å‰å‘ä¼ æ’­
1.è¾“å…¥å±‚&amp;mdash;-&amp;gt;éšå«å±‚ï¼š
è®¡ç®—ç¥ç»å…ƒh1çš„è¾“å…¥åŠ æƒå’Œï¼š $$ \begin{array}{l} n e t_{h 1}=w_{1} * i_{1}+w_{2} * i_{2}+b_{1} * 1 \
{ net }_{h 1}=0.15 * 0.05+0.2 * 0.1+0.35 * 1=0.3775 \end{array} $$ ç¥ç»å…ƒh1çš„è¾“å‡ºo1:(æ­¤å¤„ç”¨åˆ°æ¿€æ´»å‡½æ•°ä¸ºsigmoidå‡½æ•°)ï¼š $$ { out }_{h 1}=\frac{1}{1+e^{-n e t_{h 1}}}=\frac{1}{1+e^{-0.3775}}=0.593269992 $$ åŒç†ï¼Œå¯è®¡ç®—å‡ºç¥ç»å…ƒh2çš„è¾“å‡ºo2ï¼š $$ { out }_{h 2}=0.</description>
    </item>
    
    <item>
      <title>åŸºäºaspectå®ç°æ³¨è§£</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E5%9F%BA%E4%BA%8Easpect%E5%AE%9E%E7%8E%B0%E6%B3%A8%E8%A7%A3/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E5%9F%BA%E4%BA%8Easpect%E5%AE%9E%E7%8E%B0%E6%B3%A8%E8%A7%A3/</guid>
      <description>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å°†ä¸€äº›å…¬å…±çš„åŠŸèƒ½å°è£…ï¼Œæ¯”å¦‚æ“ä½œæ—¥å¿—çš„å­˜å‚¨ï¼Œé˜²é‡å¤æäº¤ç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½æœ‰äº›æ¥å£ä¼šç”¨åˆ°ï¼Œä¸ºäº†ä¾¿äºå…¶ä»–æ¥å£å’Œæ–¹æ³•çš„ä½¿ç”¨ï¼Œåšæˆè‡ªå®šä¹‰æ³¨è§£ï¼Œä¾µå…¥æ€§æ›´ä½ä¸€ç‚¹ã€‚åˆ«äººç”¨çš„è¯ç›´æ¥æ³¨è§£å°±å¥½ã€‚ä¸‹é¢å°±æ¥è®²è®²è‡ªå®šä¹‰æ³¨è§£è¿™äº›äº‹æƒ…ã€‚
1. @Targetã€@Retentionã€@Documentedç®€ä»‹ javaè‡ªå®šä¹‰æ³¨è§£çš„æ³¨è§£ä½äºåŒ…ï¼šjava.lang.annotationä¸‹ã€‚åŒ…å«ä¸‰ä¸ªå…ƒæ³¨è§£@Targetã€@Retentionã€@Documentedï¼Œå³æ³¨è§£çš„æ³¨è§£ã€‚
@Target @Target:æ³¨è§£çš„ä½œç”¨ç›®æ ‡ã€‚å’Œæšä¸¾ElementTypeå…±åŒèµ·ä½œç”¨
æ ¹æ®æºç çŸ¥é“ï¼Œå¯ä»¥é…ç½®å¤šä¸ªä½œç”¨ç›®æ ‡ã€‚
@Documented @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.ANNOTATION_TYPE) public @interface Target { /** * Returns an array of the kinds of elements an annotation type * can be applied to. * @return an array of the kinds of elements an annotation type * can be applied to */ ElementType[] value(); } å¤åˆ¶ä»£ç  ElementTypeçš„ç±»å‹å¦‚ä¸‹ï¼š
* @author Joshua Bloch * @since 1.5 * @jls 9.6.4.1 @Target * @jls 4.1 The Kinds of Types and Values */ public enum ElementType { /** ç±», æ¥å£ (åŒ…æ‹¬æ³¨è§£ç±»å‹), æˆ– æšä¸¾ å£°æ˜ */ TYPE, /** å­—æ®µå£°æ˜ï¼ˆåŒ…æ‹¬æšä¸¾å¸¸é‡ï¼‰ */ FIELD, /** æ–¹æ³•å£°æ˜(Method declaration) */ METHOD, /** æ­£å¼çš„å‚æ•°å£°æ˜ */ PARAMETER, /** æ„é€ å‡½æ•°å£°æ˜ */ CONSTRUCTOR, /** å±€éƒ¨å˜é‡å£°æ˜ */ LOCAL_VARIABLE, /** æ³¨è§£ç±»å‹å£°æ˜ */ ANNOTATION_TYPE, /** åŒ…å£°æ˜ */ PACKAGE, /** * ç±»å‹å‚æ•°å£°æ˜ * * @since 1.</description>
    </item>
    
    <item>
      <title>åŸºäºRedisçš„åˆ†å¸ƒå¼é”å®ç°</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E5%9F%BA%E4%BA%8Eredis%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E5%9F%BA%E4%BA%8Eredis%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0/</guid>
      <description>ä½¿ç”¨ set key value ex/px ç§’/æ¯«ç§’ xx/nx çš„å‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ï¼Œå­˜åœ¨å¤šä¸ªclientç«¯åŠ é”æˆåŠŸçš„æç«¯æƒ…å†µã€‚Redissonä½¿ç”¨RedLockå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå…¶åŸç†æ˜¯å¤šé”ï¼Œä¾‹å¦‚å¯¹å¤šä¸ªå“¨å…µé›†ç¾¤åŠ ä¸åŒçš„é”ï¼Œåªæœ‰è¶…åŠæ•°ä»¥ä¸Šçš„å“¨å…µé›†ç¾¤åé¦ˆåŠ é”æˆåŠŸæ‰ç®—åŠ é”æˆåŠŸã€‚å¦å¤–ï¼ŒRedissonè¿˜é€šè¿‡WatchDogå®ç°äº†é”ç»­ç§Ÿã€‚è¿˜å®ç°äº†å¾ˆå¤šæœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼ˆRedissonPriorityDequeï¼‰å’Œåˆ†å¸ƒå¼åŒæ­¥å·¥å…·ï¼ˆRedissonCountDownLatch, RedissonSemaphoreï¼‰
å‰è¨€ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»åŸºäºRedisçš„åˆ†å¸ƒå¼é”å®ç°åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Œå…¶ä¸­å‚è€ƒäº†è®¸å¤šå¤§ä½¬å†™çš„æ–‡ç« ï¼Œç®—æ˜¯å¯¹åˆ†å¸ƒå¼é”åšä¸€ä¸ªæ€»ç»“
åˆ†å¸ƒå¼é”æ¦‚è§ˆ åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯ä¸€ä¸ªä»£ç å—åœ¨åŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼ŒJavaä¸­æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥ä½¿ç”¨synchronizedè¯­æ³•å’ŒReetrantLockå»ä¿è¯ï¼Œè¿™å®é™…ä¸Šæ˜¯æœ¬åœ°é”çš„æ–¹å¼ã€‚ä½†æ˜¯ç°åœ¨å…¬å¸éƒ½æ˜¯æµè¡Œåˆ†å¸ƒå¼æ¶æ„ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•ä¿è¯ä¸åŒèŠ‚ç‚¹çš„çº¿ç¨‹åŒæ­¥æ‰§è¡Œå‘¢ï¼Ÿ
å®é™…ä¸Šï¼Œå¯¹äºåˆ†å¸ƒå¼åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œå®ƒæ˜¯æ§åˆ¶åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´äº’æ–¥è®¿é—®å…±äº«èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚
æ¯”å¦‚è¯´åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šå°æœºå™¨ä¸Šéƒ¨ç½²äº†å¤šä¸ªæœåŠ¡ï¼Œå½“å®¢æˆ·ç«¯ä¸€ä¸ªç”¨æˆ·å‘èµ·ä¸€ä¸ªæ•°æ®æ’å…¥è¯·æ±‚æ—¶ï¼Œå¦‚æœæ²¡æœ‰åˆ†å¸ƒå¼é”æœºåˆ¶ä¿è¯ï¼Œé‚£ä¹ˆé‚£å¤šå°æœºå™¨ä¸Šçš„å¤šä¸ªæœåŠ¡å¯èƒ½è¿›è¡Œå¹¶å‘æ’å…¥æ“ä½œï¼Œå¯¼è‡´æ•°æ®é‡å¤æ’å…¥ï¼Œå¯¹äºæŸäº›ä¸å…è®¸æœ‰å¤šä½™æ•°æ®çš„ä¸šåŠ¡æ¥è¯´ï¼Œè¿™å°±ä¼šé€ æˆé—®é¢˜ã€‚è€Œåˆ†å¸ƒå¼é”æœºåˆ¶å°±æ˜¯ä¸ºäº†è§£å†³ç±»ä¼¼è¿™ç±»é—®é¢˜ï¼Œä¿è¯å¤šä¸ªæœåŠ¡ä¹‹é—´äº’æ–¥çš„è®¿é—®å…±äº«èµ„æºï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡æŠ¢å äº†åˆ†å¸ƒå¼é”ï¼Œå…¶ä»–æœåŠ¡æ²¡è·å–åˆ°é”ï¼Œå°±ä¸è¿›è¡Œåç»­æ“ä½œã€‚å¤§è‡´æ„æ€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆä¸ä¸€å®šå‡†ç¡®ï¼‰ï¼š
åˆ†å¸ƒå¼é”çš„ç‰¹ç‚¹ åˆ†å¸ƒå¼é”ä¸€èˆ¬æœ‰å¦‚ä¸‹çš„ç‰¹ç‚¹ï¼š
 äº’æ–¥æ€§ï¼š åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é” å¯é‡å…¥æ€§ï¼š åŒä¸€èŠ‚ç‚¹ä¸Šçš„åŒä¸€ä¸ªçº¿ç¨‹å¦‚æœè·å–äº†é”ä¹‹åèƒ½å¤Ÿå†æ¬¡è·å–é” é”è¶…æ—¶ï¼šå’ŒJ.U.Cä¸­çš„é”ä¸€æ ·æ”¯æŒé”è¶…æ—¶ï¼Œé˜²æ­¢æ­»é” é«˜æ€§èƒ½å’Œé«˜å¯ç”¨ï¼š åŠ é”å’Œè§£é”éœ€è¦é«˜æ•ˆï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ä¿è¯é«˜å¯ç”¨ï¼Œé˜²æ­¢åˆ†å¸ƒå¼é”å¤±æ•ˆ å…·å¤‡é˜»å¡å’Œéé˜»å¡æ€§ï¼šèƒ½å¤ŸåŠæ—¶ä»é˜»å¡çŠ¶æ€ä¸­è¢«å”¤é†’  åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼ æˆ‘ä»¬ä¸€èˆ¬å®ç°åˆ†å¸ƒå¼é”æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š
 åŸºäºæ•°æ®åº“ åŸºäºRedis åŸºäºzookeeper  æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»åŸºäºRediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”
Redisçš„åˆ†å¸ƒå¼é”å®ç° 1. åˆ©ç”¨setnx+expireå‘½ä»¤ (é”™è¯¯çš„åšæ³•) Redisçš„SETNXå‘½ä»¤ï¼Œsetnx key valueï¼Œå°†keyè®¾ç½®ä¸ºvalueï¼Œå½“é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰èƒ½æˆåŠŸï¼Œè‹¥é”®å­˜åœ¨ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼ŒæˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0 ã€‚ SETNXå®é™…ä¸Šå°±æ˜¯SET IF NOT Existsçš„ç¼©å†™
å› ä¸ºåˆ†å¸ƒå¼é”è¿˜éœ€è¦è¶…æ—¶æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨expireå‘½ä»¤æ¥è®¾ç½®ï¼Œæ‰€ä»¥åˆ©ç”¨setnx+expireå‘½ä»¤çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
public boolean tryLock(String key,String requset,int timeout) { Long result = jedis.setnx(key, requset); // result = 1æ—¶ï¼Œè®¾ç½®æˆåŠŸï¼Œå¦åˆ™è®¾ç½®å¤±è´¥ if (result == 1L) { return jedis.</description>
    </item>
    
    <item>
      <title>å¦‚ä½•è§£å†³MySQLä¸»ä»åŒæ­¥çš„å»¶æ—¶é—®é¢˜</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E7%9A%84%E5%BB%B6%E6%97%B6%E9%97%AE%E9%A2%98/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E7%9A%84%E5%BB%B6%E6%97%B6%E9%97%AE%E9%A2%98/</guid>
      <description>ä½ ä»¬æœ‰æ²¡æœ‰åš MySQL è¯»å†™åˆ†ç¦»ï¼Ÿå¦‚ä½•å®ç° MySQL çš„è¯»å†™åˆ†ç¦»ï¼ŸMySQL ä¸»ä»å¤åˆ¶åŸç†çš„æ˜¯å•¥ï¼Ÿå¦‚ä½•è§£å†³ MySQL ä¸»ä»åŒæ­¥çš„å»¶æ—¶é—®é¢˜ï¼Ÿ
å¦‚ä½•å®ç° MySQL çš„è¯»å†™åˆ†ç¦»ï¼Ÿ å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯åŸºäºä¸»ä»å¤åˆ¶æ¶æ„ï¼Œç®€å•æ¥è¯´ï¼Œå°±æä¸€ä¸ªä¸»åº“ï¼ŒæŒ‚å¤šä¸ªä»åº“ï¼Œç„¶åæˆ‘ä»¬å°±å•å•åªæ˜¯å†™ä¸»åº“ï¼Œç„¶åä¸»åº“ä¼šè‡ªåŠ¨æŠŠæ•°æ®ç»™åŒæ­¥åˆ°ä»åº“ä¸Šå»ã€‚
MySQL ä¸»ä»å¤åˆ¶åŸç†çš„æ˜¯å•¥ï¼Ÿ ä¸»åº“å°†å˜æ›´å†™å…¥ binlog æ—¥å¿—ï¼Œç„¶åä»åº“è¿æ¥åˆ°ä¸»åº“ä¹‹åï¼Œä»åº“æœ‰ä¸€ä¸ª IO çº¿ç¨‹ï¼Œå°†ä¸»åº“çš„ binlog æ—¥å¿—æ‹·è´åˆ°è‡ªå·±æœ¬åœ°ï¼Œå†™å…¥ä¸€ä¸ª relay ä¸­ç»§æ—¥å¿—ä¸­ã€‚æ¥ç€ä»åº“ä¸­æœ‰ä¸€ä¸ª SQL çº¿ç¨‹ä¼šä»ä¸­ç»§æ—¥å¿—è¯»å– binlogï¼Œç„¶åæ‰§è¡Œ binlog æ—¥å¿—ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯åœ¨è‡ªå·±æœ¬åœ°å†æ¬¡æ‰§è¡Œä¸€é SQLï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯è‡ªå·±è·Ÿä¸»åº“çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚
è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯ä»åº“åŒæ­¥ä¸»åº“æ•°æ®çš„è¿‡ç¨‹æ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»åº“ä¸Šå¹¶è¡Œçš„æ“ä½œï¼Œåœ¨ä»åº“ä¸Šä¼šä¸²è¡Œæ‰§è¡Œã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹äº†ï¼Œç”±äºä»åº“ä»ä¸»åº“æ‹·è´æ—¥å¿—ä»¥åŠä¸²è¡Œæ‰§è¡Œ SQL çš„ç‰¹ç‚¹ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä»åº“çš„æ•°æ®ä¸€å®šä¼šæ¯”ä¸»åº“æ…¢ä¸€äº›ï¼Œæ˜¯æœ‰å»¶æ—¶çš„ã€‚æ‰€ä»¥ç»å¸¸å‡ºç°ï¼Œåˆšå†™å…¥ä¸»åº“çš„æ•°æ®å¯èƒ½æ˜¯è¯»ä¸åˆ°çš„ï¼Œè¦è¿‡å‡ åæ¯«ç§’ï¼Œç”šè‡³å‡ ç™¾æ¯«ç§’æ‰èƒ½è¯»å–åˆ°ã€‚
è€Œä¸”è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœä¸»åº“çªç„¶å®•æœºï¼Œç„¶åæ°å¥½æ•°æ®è¿˜æ²¡åŒæ­¥åˆ°ä»åº“ï¼Œé‚£ä¹ˆæœ‰äº›æ•°æ®å¯èƒ½åœ¨ä»åº“ä¸Šæ˜¯æ²¡æœ‰çš„ï¼Œæœ‰äº›æ•°æ®å¯èƒ½å°±ä¸¢å¤±äº†ã€‚
æ‰€ä»¥ MySQL å®é™…ä¸Šåœ¨è¿™ä¸€å—æœ‰ä¸¤ä¸ªæœºåˆ¶ï¼Œä¸€ä¸ªæ˜¯åŠåŒæ­¥å¤åˆ¶ï¼Œç”¨æ¥è§£å†³ä¸»åº“æ•°æ®ä¸¢å¤±é—®é¢˜ï¼›ä¸€ä¸ªæ˜¯å¹¶è¡Œå¤åˆ¶ï¼Œç”¨æ¥è§£å†³ä¸»ä»åŒæ­¥å»¶æ—¶é—®é¢˜ã€‚
è¿™ä¸ªæ‰€è°“åŠåŒæ­¥å¤åˆ¶ï¼Œä¹Ÿå« semi-sync å¤åˆ¶ï¼ŒæŒ‡çš„å°±æ˜¯ä¸»åº“å†™å…¥ binlog æ—¥å¿—ä¹‹åï¼Œå°±ä¼šå°†å¼ºåˆ¶æ­¤æ—¶ç«‹å³å°†æ•°æ®åŒæ­¥åˆ°ä»åº“ï¼Œä»åº“å°†æ—¥å¿—å†™å…¥è‡ªå·±æœ¬åœ°çš„ relay log ä¹‹åï¼Œæ¥ç€ä¼šè¿”å›ä¸€ä¸ª ack ç»™ä¸»åº“ï¼Œä¸»åº“æ¥æ”¶åˆ°è‡³å°‘ä¸€ä¸ªä»åº“çš„ ack ä¹‹åæ‰ä¼šè®¤ä¸ºå†™æ“ä½œå®Œæˆäº†ã€‚
æ‰€è°“å¹¶è¡Œå¤åˆ¶ï¼ŒæŒ‡çš„æ˜¯ä»åº“å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œè¯»å– relay log ä¸­ä¸åŒåº“çš„æ—¥å¿—ï¼Œç„¶åå¹¶è¡Œé‡æ”¾ä¸åŒåº“çš„æ—¥å¿—ï¼Œè¿™æ˜¯åº“çº§åˆ«çš„å¹¶è¡Œã€‚
MySQL ä¸»ä»åŒæ­¥å»¶æ—¶é—®é¢˜ï¼ˆç²¾åï¼‰ ä»¥å‰çº¿ä¸Šç¡®å®å¤„ç†è¿‡å› ä¸ºä¸»ä»åŒæ­¥å»¶æ—¶é—®é¢˜è€Œå¯¼è‡´çš„çº¿ä¸Šçš„ bugï¼Œå±äºå°å‹çš„ç”Ÿäº§äº‹æ•…ã€‚
æ˜¯è¿™ä¸ªä¹ˆåœºæ™¯ã€‚æœ‰ä¸ªåŒå­¦æ˜¯è¿™æ ·å†™ä»£ç é€»è¾‘çš„ã€‚å…ˆæ’å…¥ä¸€æ¡æ•°æ®ï¼Œå†æŠŠå®ƒæŸ¥å‡ºæ¥ï¼Œç„¶åæ›´æ–°è¿™æ¡æ•°æ®ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒé«˜å³°æœŸï¼Œå†™å¹¶å‘è¾¾åˆ°äº† 2000/sï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸»ä»å¤åˆ¶å»¶æ—¶å¤§æ¦‚æ˜¯åœ¨å°å‡ åæ¯«ç§’ã€‚çº¿ä¸Šä¼šå‘ç°ï¼Œæ¯å¤©æ€»æœ‰é‚£ä¹ˆä¸€äº›æ•°æ®ï¼Œæˆ‘ä»¬æœŸæœ›æ›´æ–°ä¸€äº›é‡è¦çš„æ•°æ®çŠ¶æ€ï¼Œä½†åœ¨é«˜å³°æœŸæ—¶å€™å´æ²¡æ›´æ–°ã€‚ç”¨æˆ·è·Ÿå®¢æœåé¦ˆï¼Œè€Œå®¢æœå°±ä¼šåé¦ˆç»™æˆ‘ä»¬ã€‚
æˆ‘ä»¬é€šè¿‡ MySQL å‘½ä»¤ï¼š
show slave status æŸ¥çœ‹ Seconds_Behind_Master ï¼Œå¯ä»¥çœ‹åˆ°ä»åº“å¤åˆ¶ä¸»åº“çš„æ•°æ®è½åäº†å‡  msã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸»ä»å»¶è¿Ÿè¾ƒä¸ºä¸¥é‡ï¼Œæœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š
 åˆ†åº“ï¼Œå°†ä¸€ä¸ªä¸»åº“æ‹†åˆ†ä¸ºå¤šä¸ªä¸»åº“ï¼Œæ¯ä¸ªä¸»åº“çš„å†™å¹¶å‘å°±å‡å°‘äº†å‡ å€ï¼Œæ­¤æ—¶ä¸»ä»å»¶è¿Ÿå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ï¼ˆä¸»åº“å‹åŠ›å¤§å¯¼è‡´å»¶æ—¶ï¼‰ æ‰“å¼€ MySQL æ”¯æŒçš„å¹¶è¡Œå¤åˆ¶ï¼Œå¤šä¸ªåº“å¹¶è¡Œå¤åˆ¶ã€‚å¦‚æœè¯´æŸä¸ªåº“çš„å†™å…¥å¹¶å‘å°±æ˜¯ç‰¹åˆ«é«˜ï¼Œå•åº“å†™å¹¶å‘è¾¾åˆ°äº† 2000/sï¼Œå¹¶è¡Œå¤åˆ¶è¿˜æ˜¯æ²¡æ„ä¹‰ã€‚ï¼ˆä»åº“å‹åŠ›å¤§å¯¼è‡´å»¶æ—¶ï¼‰ é‡å†™ä»£ç ï¼Œå†™ä»£ç çš„åŒå­¦ï¼Œè¦æ…é‡ï¼Œæ’å…¥æ•°æ®æ—¶ç«‹é©¬æŸ¥è¯¢å¯èƒ½æŸ¥ä¸åˆ°ã€‚ï¼ˆä¸»ä»å¤åˆ¶æ— æ³•é¿å…çš„å»¶æ—¶ï¼‰ å¦‚æœç¡®å®æ˜¯å­˜åœ¨å¿…é¡»å…ˆæ’å…¥ï¼Œç«‹é©¬è¦æ±‚å°±æŸ¥è¯¢åˆ°ï¼Œç„¶åç«‹é©¬å°±è¦åè¿‡æ¥æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¯¹è¿™ä¸ªæŸ¥è¯¢è®¾ç½®ç›´è¿ä¸»åº“ã€‚ä¸æ¨èè¿™ç§æ–¹æ³•ï¼Œä½ è¦æ˜¯è¿™ä¹ˆæï¼Œè¯»å†™åˆ†ç¦»çš„æ„ä¹‰å°±ä¸§å¤±äº†ã€‚ï¼ˆä¸»ä»å¤åˆ¶æ— æ³•é¿å…çš„å»¶æ—¶ï¼‰  å‚è€ƒ ä½ ä»¬æœ‰æ²¡æœ‰åš MySQL è¯»å†™åˆ†ç¦»ï¼Ÿå¦‚ä½•å®ç° MySQL çš„è¯»å†™åˆ†ç¦»ï¼ŸMySQL ä¸»ä»å¤åˆ¶åŸç†çš„æ˜¯å•¥ï¼Ÿå¦‚ä½•è§£å†³ MySQL ä¸»ä»åŒæ­¥çš„å»¶æ—¶é—®é¢˜ï¼Ÿ </description>
    </item>
    
    <item>
      <title>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘ç³»ç»Ÿ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F/</guid>
      <description>å…¶å®æ‰€è°“çš„é«˜å¹¶å‘ï¼Œå¦‚æœä½ è¦ç†è§£è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå…¶å®å°±å¾—ä»é«˜å¹¶å‘çš„æ ¹æºå‡ºå‘ï¼Œä¸ºå•¥ä¼šæœ‰é«˜å¹¶å‘ï¼Ÿä¸ºå•¥é«˜å¹¶å‘å°±å¾ˆç‰›é€¼ï¼Ÿ
æˆ‘è¯´çš„æµ…æ˜¾ä¸€ç‚¹ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯å› ä¸ºåˆšå¼€å§‹ç³»ç»Ÿéƒ½æ˜¯è¿æ¥æ•°æ®åº“çš„ï¼Œä½†æ˜¯è¦çŸ¥é“æ•°æ®åº“æ”¯æ’‘åˆ°æ¯ç§’å¹¶å‘ä¸¤ä¸‰åƒçš„æ—¶å€™ï¼ŒåŸºæœ¬å°±å¿«å®Œäº†ã€‚æ‰€ä»¥æ‰æœ‰è¯´ï¼Œå¾ˆå¤šå…¬å¸ï¼Œåˆšå¼€å§‹å¹²çš„æ—¶å€™ï¼ŒæŠ€æœ¯æ¯”è¾ƒ lowï¼Œç»“æœä¸šåŠ¡å‘å±•å¤ªå¿«ï¼Œæœ‰çš„æ—¶å€™ç³»ç»Ÿæ‰›ä¸ä½å‹åŠ›å°±æŒ‚äº†ã€‚
å½“ç„¶ä¼šæŒ‚äº†ï¼Œå‡­ä»€ä¹ˆä¸æŒ‚ï¼Ÿä½ æ•°æ®åº“å¦‚æœç¬é—´æ‰¿è½½æ¯ç§’ 5000/8000ï¼Œç”šè‡³ä¸Šä¸‡çš„å¹¶å‘ï¼Œä¸€å®šä¼šå®•æœºï¼Œå› ä¸ºæ¯”å¦‚ mysql å°±å‹æ ¹å„¿æ‰›ä¸ä½è¿™ä¹ˆé«˜çš„å¹¶å‘é‡ã€‚
æ‰€ä»¥ä¸ºå•¥é«˜å¹¶å‘ç‰›é€¼ï¼Ÿå°±æ˜¯å› ä¸ºç°åœ¨ç”¨äº’è”ç½‘çš„äººè¶Šæ¥è¶Šå¤šï¼Œå¾ˆå¤š appã€ç½‘ç«™ã€ç³»ç»Ÿæ‰¿è½½çš„éƒ½æ˜¯é«˜å¹¶å‘è¯·æ±‚ï¼Œå¯èƒ½é«˜å³°æœŸæ¯ç§’å¹¶å‘é‡å‡ åƒï¼Œå¾ˆæ­£å¸¸çš„ã€‚å¦‚æœæ˜¯ä»€ä¹ˆåŒåä¸€ä¹‹ç±»çš„ï¼Œæ¯ç§’å¹¶å‘å‡ ä¸‡å‡ åä¸‡éƒ½æœ‰å¯èƒ½ã€‚
é‚£ä¹ˆå¦‚æ­¤ä¹‹é«˜çš„å¹¶å‘é‡ï¼ŒåŠ ä¸ŠåŸæœ¬å°±å¦‚æ­¤ä¹‹å¤æ‚çš„ä¸šåŠ¡ï¼Œå’‹ç©å„¿ï¼ŸçœŸæ­£å‰å®³çš„ï¼Œä¸€å®šæ˜¯åœ¨å¤æ‚ä¸šåŠ¡ç³»ç»Ÿé‡Œç©å„¿è¿‡é«˜å¹¶å‘æ¶æ„çš„äººï¼Œä½†æ˜¯ä½ æ²¡æœ‰ï¼Œé‚£ä¹ˆæˆ‘ç»™ä½ è¯´ä¸€ä¸‹ä½ è¯¥æ€ä¹ˆå›ç­”è¿™ä¸ªé—®é¢˜ï¼š
å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 6 ç‚¹ï¼š
 ç³»ç»Ÿæ‹†åˆ† ç¼“å­˜ MQ åˆ†åº“åˆ†è¡¨ è¯»å†™åˆ†ç¦» ElasticSearch  ç³»ç»Ÿæ‹†åˆ† å°†ä¸€ä¸ªç³»ç»Ÿæ‹†åˆ†ä¸ºå¤šä¸ªå­ç³»ç»Ÿï¼Œç”¨ dubbo æ¥æã€‚ç„¶åæ¯ä¸ªç³»ç»Ÿè¿ä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™æ ·æœ¬æ¥å°±ä¸€ä¸ªåº“ï¼Œç°åœ¨å¤šä¸ªæ•°æ®åº“ï¼Œä¸ä¹Ÿå¯ä»¥æ‰›é«˜å¹¶å‘ä¹ˆã€‚
ç¼“å­˜ ç¼“å­˜ï¼Œå¿…é¡»å¾—ç”¨ç¼“å­˜ã€‚å¤§éƒ¨åˆ†çš„é«˜å¹¶å‘åœºæ™¯ï¼Œéƒ½æ˜¯è¯»å¤šå†™å°‘ï¼Œé‚£ä½ å®Œå…¨å¯ä»¥åœ¨æ•°æ®åº“å’Œç¼“å­˜é‡Œéƒ½å†™ä¸€ä»½ï¼Œç„¶åè¯»çš„æ—¶å€™å¤§é‡èµ°ç¼“å­˜ä¸å°±å¾—äº†ã€‚æ¯•ç«Ÿäººå®¶ redis è½»è½»æ¾æ¾å•æœºå‡ ä¸‡çš„å¹¶å‘ã€‚æ‰€ä»¥ä½ å¯ä»¥è€ƒè™‘è€ƒè™‘ä½ çš„é¡¹ç›®é‡Œï¼Œé‚£äº›æ‰¿è½½ä¸»è¦è¯·æ±‚çš„è¯»åœºæ™¯ï¼Œæ€ä¹ˆç”¨ç¼“å­˜æ¥æŠ—é«˜å¹¶å‘ã€‚
MQ MQï¼Œå¿…é¡»å¾—ç”¨ MQã€‚å¯èƒ½ä½ è¿˜æ˜¯ä¼šå‡ºç°é«˜å¹¶å‘å†™çš„åœºæ™¯ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªä¸šåŠ¡æ“ä½œé‡Œè¦é¢‘ç¹ææ•°æ®åº“å‡ åæ¬¡ï¼Œå¢åˆ æ”¹å¢åˆ æ”¹ï¼Œç–¯äº†ã€‚é‚£é«˜å¹¶å‘ç»å¯¹ææŒ‚ä½ çš„ç³»ç»Ÿï¼Œä½ è¦æ˜¯ç”¨ redis æ¥æ‰¿è½½å†™é‚£è‚¯å®šä¸è¡Œï¼Œäººå®¶æ˜¯ç¼“å­˜ï¼Œæ•°æ®éšæ—¶å°±è¢« LRU äº†ï¼Œæ•°æ®æ ¼å¼è¿˜æ— æ¯”ç®€å•ï¼Œæ²¡æœ‰äº‹åŠ¡æ”¯æŒã€‚æ‰€ä»¥è¯¥ç”¨ mysql è¿˜å¾—ç”¨ mysql å•Šã€‚é‚£ä½ å’‹åŠï¼Ÿç”¨ MQ å§ï¼Œå¤§é‡çš„å†™è¯·æ±‚çŒå…¥ MQ é‡Œï¼Œæ’é˜Ÿæ…¢æ…¢ç©å„¿ï¼Œåè¾¹ç³»ç»Ÿæ¶ˆè´¹åæ…¢æ…¢å†™ï¼Œæ§åˆ¶åœ¨ mysql æ‰¿è½½èŒƒå›´ä¹‹å†…ã€‚æ‰€ä»¥ä½ å¾—è€ƒè™‘è€ƒè™‘ä½ çš„é¡¹ç›®é‡Œï¼Œé‚£äº›æ‰¿è½½å¤æ‚å†™ä¸šåŠ¡é€»è¾‘çš„åœºæ™¯é‡Œï¼Œå¦‚ä½•ç”¨ MQ æ¥å¼‚æ­¥å†™ï¼Œæå‡å¹¶å‘æ€§ã€‚MQ å•æœºæŠ—å‡ ä¸‡å¹¶å‘ä¹Ÿæ˜¯ ok çš„ï¼Œè¿™ä¸ªä¹‹å‰è¿˜ç‰¹æ„è¯´è¿‡ã€‚
åˆ†åº“åˆ†è¡¨ åˆ†åº“åˆ†è¡¨ï¼Œå¯èƒ½åˆ°äº†æœ€åæ•°æ®åº“å±‚é¢è¿˜æ˜¯å…ä¸äº†æŠ—é«˜å¹¶å‘çš„è¦æ±‚ï¼Œå¥½å§ï¼Œé‚£ä¹ˆå°±å°†ä¸€ä¸ªæ•°æ®åº“æ‹†åˆ†ä¸ºå¤šä¸ªåº“ï¼Œå¤šä¸ªåº“æ¥æ‰›æ›´é«˜çš„å¹¶å‘ï¼›ç„¶åå°†ä¸€ä¸ªè¡¨æ‹†åˆ†ä¸ºå¤šä¸ªè¡¨ï¼Œæ¯ä¸ªè¡¨çš„æ•°æ®é‡ä¿æŒå°‘ä¸€ç‚¹ï¼Œæé«˜ sql è·‘çš„æ€§èƒ½ã€‚
è¯»å†™åˆ†ç¦» è¯»å†™åˆ†ç¦»ï¼Œè¿™ä¸ªå°±æ˜¯è¯´å¤§éƒ¨åˆ†æ—¶å€™æ•°æ®åº“å¯èƒ½ä¹Ÿæ˜¯è¯»å¤šå†™å°‘ï¼Œæ²¡å¿…è¦æ‰€æœ‰è¯·æ±‚éƒ½é›†ä¸­åœ¨ä¸€ä¸ªåº“ä¸Šå§ï¼Œå¯ä»¥æä¸ªä¸»ä»æ¶æ„ï¼Œä¸»åº“å†™å…¥ï¼Œä»åº“è¯»å–ï¼Œæä¸€ä¸ªè¯»å†™åˆ†ç¦»ã€‚è¯»æµé‡å¤ªå¤šçš„æ—¶å€™ï¼Œè¿˜å¯ä»¥åŠ æ›´å¤šçš„ä»åº“ã€‚
ElasticSearch Elasticsearchï¼Œç®€ç§° esã€‚es æ˜¯åˆ†å¸ƒå¼çš„ï¼Œå¯ä»¥éšä¾¿æ‰©å®¹ï¼Œåˆ†å¸ƒå¼å¤©ç„¶å°±å¯ä»¥æ”¯æ’‘é«˜å¹¶å‘ï¼Œå› ä¸ºåŠ¨ä¸åŠ¨å°±å¯ä»¥æ‰©å®¹åŠ æœºå™¨æ¥æ‰›æ›´é«˜çš„å¹¶å‘ã€‚é‚£ä¹ˆä¸€äº›æ¯”è¾ƒç®€å•çš„æŸ¥è¯¢ã€ç»Ÿè®¡ç±»çš„æ“ä½œï¼Œå¯ä»¥è€ƒè™‘ç”¨ es æ¥æ‰¿è½½ï¼Œè¿˜æœ‰ä¸€äº›å…¨æ–‡æœç´¢ç±»çš„æ“ä½œï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç”¨ es æ¥æ‰¿è½½ã€‚
å‚è€ƒ å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘ç³»ç»Ÿï¼Ÿ </description>
    </item>
    
    <item>
      <title>å®ç°çº¿ç¨‹è¶…æ—¶çš„å‡ ç§æ–¹å¼</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E8%B6%85%E6%97%B6%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E8%B6%85%E6%97%B6%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</guid>
      <description>1. åŸºäºçº¿ç¨‹çš„join(long millis)æ–¹æ³• å…¶å®è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç‰µå¼ºï¼Œå› ä¸ºå®ƒä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å¤šä¸ªçº¿ç¨‹ä¹‹é—´è¿›è¡ŒåŒæ­¥çš„ã€‚ä½†å› ä¸ºå®ƒæä¾›äº†è¿™ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•ï¼ˆæ‰€ä»¥è¿™ä¹Ÿç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ›´å¹¿æ³›çš„æ€è·¯ï¼Œå°±æ˜¯ä¸€èˆ¬å¸¦æœ‰è¶…æ—¶å‚æ•°çš„æ–¹æ³•æˆ‘ä»¬éƒ½å¯ä»¥å°è¯•ç€ç”¨å®ƒæ¥å®ç°è¶…æ—¶ç»“æŸä»»åŠ¡ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å®ç°ã€‚æ³¨æ„è¿™é‡Œçš„å‚æ•°çš„å•ä½æ˜¯å›ºå®šçš„æ¯«ç§’ï¼Œä¸åŒäºæ¥ä¸‹æ¥çš„å¸¦å•ä½çš„å‡½æ•°ã€‚å…·ä½“ç”¨æ³•è¯·çœ‹ç¤ºä¾‹ï¼š
public class JoinTest { public static void main(String[] args) { Task task1 = new Task(&amp;#34;one&amp;#34;, 4); Task task2 = new Task(&amp;#34;two&amp;#34;, 2); Thread t1 = new Thread(task1); Thread t2 = new Thread(task2); t1.start(); try { t1.join(2000); // åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾…t1æ‰§è¡Œ2ç§’  } catch (InterruptedException e) { System.out.println(&amp;#34;t1 interrupted when waiting join&amp;#34;); e.printStackTrace(); } t1.interrupt(); // è¿™é‡Œå¾ˆé‡è¦ï¼Œä¸€å®šè¦æ‰“æ–­t1,å› ä¸ºå®ƒå·²ç»æ‰§è¡Œäº†2ç§’ã€‚  t2.start(); try { t2.join(1000); } catch (InterruptedException e) { System.out.println(&amp;#34;t2 interrupted when waiting join&amp;#34;); e.</description>
    </item>
    
    <item>
      <title>å¯¹è±¡åˆå§‹åŒ–é¡ºåº</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/</guid>
      <description>çˆ¶ç±»é™æ€æˆå‘˜å˜é‡ã€çˆ¶ç±»é™æ€ä»£ç å— ğŸ‘‰ğŸ¿ å­ç±»é™æ€æˆå‘˜å˜é‡ã€å­ç±»é™æ€ä»£ç å— ğŸ‘‰ğŸ¿ çˆ¶ç±»æˆå‘˜å˜é‡ã€çˆ¶ç±»ä»£ç å— ğŸ‘‰ğŸ¿ çˆ¶ç±»æ„é€ æ–¹æ³• ğŸ‘‰ğŸ¿ å­ç±»æˆå‘˜å˜é‡ã€å­ç±»ä»£ç å— ğŸ‘‰ğŸ¿ å­ç±»æ„é€ æ–¹æ³•
Javaä¸­ç±»åŠæ–¹æ³•çš„åŠ è½½é¡ºåº Javaç±»åŠ è½½é¡ºåº </description>
    </item>
    
    <item>
      <title>å¸¸å¤‡çŸ¥è¯†ç‚¹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mq/kafka/%E5%B8%B8%E5%A4%87%E7%9F%A5%E8%AF%86%E7%82%B9/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mq/kafka/%E5%B8%B8%E5%A4%87%E7%9F%A5%E8%AF%86%E7%82%B9/</guid>
      <description>1. ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹ å‚è€ƒï¼šKafkaç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ </description>
    </item>
    
    <item>
      <title>å¸¸ç”¨çš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%B8%B8%E7%94%A8%E7%9A%84%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/ai/%E5%B8%B8%E7%94%A8%E7%9A%84%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/</guid>
      <description>â€œæ²¡æœ‰æµ‹é‡ï¼Œå°±æ²¡æœ‰ç§‘å­¦ã€‚â€è¿™æ˜¯ç§‘å­¦å®¶é—¨æ·åˆ—å¤«çš„åè¨€ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨æœºå™¨å­¦ä¹ çš„é¢†åŸŸï¼Œå¯¹æ¨¡å‹çš„æµ‹é‡å’Œè¯„ä¼°åŒæ ·è‡³å…³é‡è¦ã€‚åªæœ‰é€‰æ‹©ä¸é—®é¢˜ç›¸åŒ¹é…çš„è¯„ä¼°æ–¹æ³•ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿå¿«é€Ÿçš„å‘ç°åœ¨æ¨¡å‹é€‰æ‹©å’Œè®­ç»ƒè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œè¿­ä»£åœ°å¯¹æ¨¡å‹è¿›è¡Œä¼˜åŒ–ã€‚æœ¬æ–‡å°†æ€»ç»“æœºå™¨å­¦ä¹ æœ€å¸¸è§çš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š
 precision recall F1-score PRC ROCå’ŒAUC IOU  ä»æ··æ·†çŸ©é˜µè°ˆèµ· çœ‹ä¸€çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šå‡å®šç“œå†œæ‹‰æ¥ä¸€è½¦è¥¿ç“œï¼Œæˆ‘ä»¬ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹è¿™äº›è¥¿ç“œè¿›è¡Œåˆ¤åˆ«ï¼Œæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é”™è¯¯ç‡æ¥è¡¡é‡æœ‰å¤šå°‘æ¯”ä¾‹çš„ç“œè¢«åˆ¤åˆ«é”™è¯¯ã€‚ä½†å¦‚æœæˆ‘ä»¬å…³å¿ƒçš„æ˜¯â€œæŒ‘å‡ºçš„è¥¿ç“œä¸­æœ‰å¤šå°‘æ¯”ä¾‹æ˜¯å¥½ç“œâ€ï¼Œæˆ–è€…â€œæ‰€æœ‰å¥½ç“œä¸­æœ‰å¤šå°‘æ¯”ä¾‹è¢«æŒ‘å‡ºæ¥äº†â€ï¼Œé‚£ä¹ˆé”™è¯¯ç‡æ˜¾ç„¶å°±ä¸å¤Ÿç”¨äº†ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å¼•å…¥æ–°çš„è¯„ä¼°æŒ‡æ ‡ï¼Œæ¯”å¦‚â€œæŸ¥å‡†ç‡â€å’ŒæŸ¥å…¨ç‡æ›´é€‚åˆæ­¤ç±»éœ€æ±‚çš„æ€§èƒ½åº¦é‡ã€‚
åœ¨å¼•å…¥æŸ¥å…¨ç‡å’ŒæŸ¥å‡†ç‡ä¹‹å‰æˆ‘ä»¬å¿…é¡»å…ˆç†è§£åˆ°ä»€ä¹ˆæ˜¯æ··æ·†çŸ©é˜µï¼ˆConfusion matrixï¼‰ã€‚è¿™ä¸ªåå­—èµ·å¾—æ˜¯çœŸçš„å¥½ï¼Œåˆå­¦è€…å¾ˆå®¹æ˜“è¢«è¿™ä¸ªçŸ©é˜µæå¾—æ™•å¤´è½¬å‘ã€‚ä¸‹å›¾aå°±æ˜¯æœ‰åçš„æ··æ·†çŸ©é˜µï¼Œè€Œä¸‹å›¾båˆ™æ˜¯ç”±æ··æ·†çŸ©é˜µæ¨å‡ºçš„ä¸€äº›æœ‰åçš„è¯„ä¼°æŒ‡æ ‡ã€‚
æˆ‘ä»¬é¦–å…ˆå¥½å¥½è§£è¯»ä¸€ä¸‹æ··æ·†çŸ©é˜µé‡Œçš„ä¸€äº›åè¯å’Œå…¶æ„æ€ã€‚æ ¹æ®æ··æ·†çŸ©é˜µæˆ‘ä»¬å¯ä»¥å¾—åˆ°TP,FN,FP,TNå››ä¸ªå€¼ï¼Œæ˜¾ç„¶TP+FP+TN+FN=æ ·æœ¬æ€»æ•°ã€‚è¿™å››ä¸ªå€¼ä¸­éƒ½å¸¦ä¸¤ä¸ªå­—æ¯ï¼Œå•çº¯è®°å¿†è¿™å››ç§æƒ…å†µå¾ˆéš¾è®°å¾—ç‰¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼šç¬¬ä¸€ä¸ªå­—æ¯è¡¨ç¤ºæœ¬æ¬¡é¢„æµ‹çš„æ­£ç¡®æ€§ï¼ŒTå°±æ˜¯æ­£ç¡®ï¼ŒFå°±æ˜¯é”™è¯¯ï¼›ç¬¬äºŒä¸ªå­—æ¯åˆ™è¡¨ç¤ºç”±åˆ†ç±»å™¨é¢„æµ‹çš„ç±»åˆ«ï¼ŒPä»£è¡¨é¢„æµ‹ä¸ºæ­£ä¾‹ï¼ŒNä»£è¡¨é¢„æµ‹ä¸ºåä¾‹ã€‚æ¯”å¦‚TPæˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºåˆ†ç±»å™¨é¢„æµ‹ä¸ºæ­£ä¾‹ï¼ˆPï¼‰ï¼Œè€Œä¸”è¿™æ¬¡é¢„æµ‹æ˜¯å¯¹çš„ï¼ˆTï¼‰ï¼ŒFNå¯ä»¥ç†è§£ä¸ºåˆ†ç±»å™¨çš„é¢„æµ‹æ˜¯åä¾‹ï¼ˆNï¼‰ï¼Œè€Œä¸”è¿™æ¬¡é¢„æµ‹æ˜¯é”™è¯¯çš„ï¼ˆFï¼‰ï¼Œæ­£ç¡®ç»“æœæ˜¯æ­£ä¾‹ï¼Œå³ä¸€ä¸ªæ­£æ ·æœ¬è¢«é”™è¯¯é¢„æµ‹ä¸ºè´Ÿæ ·æœ¬ã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸Šçš„ç†è§£æ–¹å¼æ¥è®°ä½TPã€FPã€TNã€FNçš„æ„æ€åº”è¯¥å°±ä¸å†å›°éš¾äº†ã€‚ï¼Œä¸‹é¢å¯¹æ··æ·†çŸ©é˜µçš„å››ä¸ªå€¼è¿›è¡Œæ€»ç»“æ€§è®²è§£ï¼š
 True Positive ï¼ˆçœŸæ­£ï¼ŒTPï¼‰è¢«æ¨¡å‹é¢„æµ‹ä¸ºæ­£çš„æ­£æ ·æœ¬ True Negativeï¼ˆçœŸè´Ÿ , TNï¼‰è¢«æ¨¡å‹é¢„æµ‹ä¸ºè´Ÿçš„è´Ÿæ ·æœ¬ False Positive ï¼ˆå‡æ­£, FPï¼‰è¢«æ¨¡å‹é¢„æµ‹ä¸ºæ­£çš„è´Ÿæ ·æœ¬ False Negativeï¼ˆå‡è´Ÿ , FNï¼‰è¢«æ¨¡å‹é¢„æµ‹ä¸ºè´Ÿçš„æ­£æ ·æœ¬  Precisionã€Recallã€PRCã€F1-score PrecisionæŒ‡æ ‡åœ¨ä¸­æ–‡é‡Œå¯ä»¥ç§°ä¸ºæŸ¥å‡†ç‡æˆ–è€…æ˜¯ç²¾ç¡®ç‡ï¼ŒRecallæŒ‡æ ‡åœ¨ä¸­å«é‡Œå¸¸è¢«ç§°ä¸ºæŸ¥å…¨ç‡æˆ–è€…æ˜¯å¬å›ç‡ï¼ŒæŸ¥å‡†ç‡ På’ŒæŸ¥å…¨ç‡ Råˆ†åˆ«å®šä¹‰ä¸ºï¼š
æŸ¥å‡†ç‡På’ŒæŸ¥å…¨ç‡Rçš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š
  æŸ¥å‡†ç‡(Precisionï¼‰æ˜¯æŒ‡åœ¨æ‰€æœ‰ç³»ç»Ÿåˆ¤å®šçš„â€œçœŸâ€çš„æ ·æœ¬ä¸­ï¼Œç¡®å®æ˜¯çœŸçš„çš„å æ¯”
  æŸ¥å…¨ç‡ï¼ˆRecallï¼‰æ˜¯æŒ‡åœ¨æ‰€æœ‰ç¡®å®ä¸ºçœŸçš„æ ·æœ¬ä¸­ï¼Œè¢«åˆ¤ä¸ºçš„â€œçœŸâ€çš„å æ¯”
  è¿™é‡Œæƒ³å¼ºè°ƒä¸€ç‚¹ï¼Œprecisionå’Œaccuracyï¼ˆæ­£ç¡®ç‡ï¼‰ä¸ä¸€æ ·çš„ï¼Œaccuracyé’ˆå¯¹æ‰€æœ‰æ ·æœ¬ï¼Œprecisioné’ˆå¯¹éƒ¨åˆ†æ ·æœ¬ï¼Œå³æ­£ç¡®çš„é¢„æµ‹/æ€»çš„æ­£åä¾‹ï¼š
æŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡æ˜¯ä¸€å¯¹çŸ›ç›¾çš„åº¦é‡ï¼Œä¸€èˆ¬è€Œè¨€ï¼ŒæŸ¥å‡†ç‡é«˜æ—¶ï¼ŒæŸ¥å…¨ç‡å¾€å¾€åä½ï¼›è€ŒæŸ¥å…¨ç‡é«˜æ—¶ï¼ŒæŸ¥å‡†ç‡å¾€å¾€åä½ã€‚æˆ‘ä»¬ä»ç›´è§‚ç†è§£ç¡®å®å¦‚æ­¤ï¼šæˆ‘ä»¬å¦‚æœå¸Œæœ›å¥½ç“œå°½å¯èƒ½å¤šåœ°é€‰å‡ºæ¥ï¼Œåˆ™å¯ä»¥é€šè¿‡å¢åŠ é€‰ç“œçš„æ•°é‡æ¥å®ç°ï¼Œå¦‚æœå°†æ‰€æœ‰ç“œéƒ½é€‰ä¸Šäº†ï¼Œé‚£ä¹ˆæ‰€æœ‰å¥½ç“œä¹Ÿå¿…ç„¶è¢«é€‰ä¸Šï¼Œä½†æ˜¯è¿™æ ·æŸ¥å‡†ç‡å°±ä¼šè¶Šä½ï¼›è‹¥å¸Œæœ›é€‰å‡ºçš„ç“œä¸­å¥½ç“œçš„æ¯”ä¾‹å°½å¯èƒ½é«˜ï¼Œåˆ™åªé€‰æœ€æœ‰æŠŠæ¡çš„ç“œï¼Œä½†è¿™æ ·éš¾å…ä¼šæ¼æ‰ä¸å°‘å¥½ç“œï¼Œå¯¼è‡´æŸ¥å…¨ç‡è¾ƒä½ã€‚é€šå¸¸åªæœ‰åœ¨ä¸€äº›ç®€å•ä»»åŠ¡ä¸­ï¼Œæ‰å¯èƒ½ä½¿æŸ¥å…¨ç‡å’ŒæŸ¥å‡†ç‡éƒ½å¾ˆé«˜ã€‚
å†è¯´PRCï¼Œ å…¶å…¨ç§°å°±æ˜¯Precision Recall Curveï¼Œå®ƒä»¥æŸ¥å‡†ç‡ä¸ºYè½´ï¼Œã€æŸ¥å…¨ç‡ä¸ºXè½´åšçš„å›¾ã€‚å®ƒæ˜¯ç»¼åˆè¯„ä»·æ•´ä½“ç»“æœçš„è¯„ä¼°æŒ‡æ ‡ã€‚æ‰€ä»¥ï¼Œå“ªç§ç±»å‹ï¼ˆæ­£æˆ–è€…è´Ÿï¼‰æ ·æœ¬å¤šï¼Œæƒé‡å°±å¤§ã€‚ä¹Ÿå°±æ˜¯é€šå¸¸è¯´çš„ã€å¯¹æ ·æœ¬ä¸å‡è¡¡æ•æ„Ÿã€ï¼Œã€å®¹æ˜“è¢«å¤šçš„æ ·å“å¸¦èµ°ã€ã€‚
ä¸Šå›¾å°±æ˜¯ä¸€å¹…P-Rå›¾ï¼Œå®ƒèƒ½ç›´è§‚åœ°æ˜¾ç¤ºå‡ºå­¦ä¹ å™¨åœ¨æ ·æœ¬æ€»ä½“ä¸Šçš„æŸ¥å…¨ç‡å’ŒæŸ¥å‡†ç‡ï¼Œæ˜¾ç„¶å®ƒæ˜¯ä¸€æ¡æ€»ä½“è¶‹åŠ¿æ˜¯é€’å‡çš„æ›²çº¿ã€‚åœ¨è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œè‹¥ä¸€ä¸ªå­¦ä¹ å™¨çš„PRæ›²çº¿è¢«å¦ä¸€ä¸ªå­¦ä¹ å™¨çš„æ›²çº¿å®Œå…¨åŒ…ä½ï¼Œåˆ™å¯æ–­è¨€åè€…çš„æ€§èƒ½ä¼˜äºå‰è€…ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­Aä¼˜äºCã€‚ä½†æ˜¯Bå’ŒAè°æ›´å¥½å‘¢ï¼Ÿå› ä¸ºABä¸¤æ¡æ›²çº¿äº¤å‰äº†ï¼Œæ‰€ä»¥å¾ˆéš¾æ¯”è¾ƒï¼Œè¿™æ—¶æ¯”è¾ƒåˆç†çš„åˆ¤æ®å°±æ˜¯æ¯”è¾ƒPRæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œè¯¥æŒ‡æ ‡åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¡¨å¾äº†å­¦ä¹ å™¨åœ¨æŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡ä¸Šå–å¾—ç›¸å¯¹â€œåŒé«˜â€çš„æ¯”ä¾‹ã€‚å› ä¸ºè¿™ä¸ªå€¼ä¸å®¹æ˜“ä¼°ç®—ï¼Œæ‰€ä»¥äººä»¬å¼•å…¥â€œå¹³è¡¡ç‚¹â€(BEP)æ¥åº¦é‡ï¼Œä»–è¡¨ç¤ºâ€œæŸ¥å‡†ç‡=æŸ¥å…¨ç‡â€æ—¶çš„å–å€¼ï¼Œå€¼è¶Šå¤§è¡¨æ˜åˆ†ç±»å™¨æ€§èƒ½è¶Šå¥½ï¼Œä»¥æ­¤æ¯”è¾ƒæˆ‘ä»¬ä¸€ä¸‹å­å°±èƒ½åˆ¤æ–­Aè¾ƒBå¥½ã€‚
BEPè¿˜æ˜¯æœ‰ç‚¹ç®€åŒ–äº†ï¼Œæ›´å¸¸ç”¨çš„æ˜¯F1åº¦é‡ï¼š
F1-score å°±æ˜¯ä¸€ä¸ªç»¼åˆè€ƒè™‘precisionå’Œrecallçš„æŒ‡æ ‡ï¼Œæ¯”BEPæ›´ä¸ºå¸¸ç”¨ã€‚
ROC &amp; AUC ROCå…¨ç§°æ˜¯â€œå—è¯•è€…å·¥ä½œç‰¹å¾â€ï¼ˆReceiver Operating Characteristicï¼‰æ›²çº¿ï¼ŒROCæ›²çº¿ä»¥â€œçœŸæ­£ä¾‹ç‡â€ï¼ˆTPRï¼‰ä¸ºYè½´ï¼Œä»¥â€œå‡æ­£ä¾‹ç‡â€ï¼ˆFPRï¼‰ä¸ºXè½´ï¼Œå¯¹è§’çº¿å¯¹åº”äºâ€œéšæœºçŒœæµ‹â€æ¨¡å‹ï¼Œè€Œï¼ˆ0,1ï¼‰åˆ™å¯¹åº”â€œç†æƒ³æ¨¡å‹â€ã€‚ROCå½¢å¼å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
TPRå’ŒFPRçš„å®šä¹‰å¦‚ä¸‹ï¼š
ä»å½¢å¼ä¸Šçœ‹TPRå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æŸ¥å…¨ç‡Recallï¼Œè€ŒFPRçš„å«ä¹‰å°±æ˜¯ï¼šæ‰€æœ‰ç¡®å®ä¸ºâ€œå‡â€çš„æ ·æœ¬ä¸­ï¼Œè¢«è¯¯åˆ¤çœŸçš„æ ·æœ¬ã€‚
è¿›è¡Œå­¦ä¹ å™¨æ¯”è¾ƒæ—¶ï¼Œä¸PRå›¾ç›¸ä¼¼ï¼Œè‹¥ä¸€ä¸ªå­¦ä¹ å™¨çš„ROCæ›²çº¿è¢«å¦ä¸€ä¸ªå­¦ä¹ å™¨çš„æ›²çº¿åŒ…ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ–­è¨€åè€…æ€§èƒ½ä¼˜äºå‰è€…ï¼›è‹¥ä¸¤ä¸ªå­¦ä¹ å™¨çš„ROCæ›²çº¿å‘ç”Ÿäº¤å‰ï¼Œåˆ™éš¾ä»¥ä¸€èˆ¬æ€§æ–­è¨€ä¸¤è€…å­°ä¼˜å­°åŠ£ã€‚æ­¤æ—¶è‹¥è¦è¿›è¡Œæ¯”è¾ƒï¼Œé‚£ä¹ˆå¯ä»¥æ¯”è¾ƒROCæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œå³AUCï¼Œé¢ç§¯å¤§çš„æ›²çº¿å¯¹åº”çš„åˆ†ç±»å™¨æ€§èƒ½æ›´å¥½ã€‚
AUCï¼ˆArea Under Curveï¼‰çš„å€¼ä¸ºROCæ›²çº¿ä¸‹é¢çš„é¢ç§¯ï¼Œè‹¥åˆ†ç±»å™¨çš„æ€§èƒ½æå¥½ï¼Œåˆ™AUCä¸º1ã€‚ä½†ç°å®ç”Ÿæ´»ä¸­å°¤å…¶æ˜¯å·¥ä¸šç•Œä¸ä¼šæœ‰å¦‚æ­¤å®Œç¾çš„æ¨¡å‹ï¼Œä¸€èˆ¬AUCå‡åœ¨0.5åˆ°1ä¹‹é—´ï¼ŒAUCè¶Šé«˜ï¼Œæ¨¡å‹çš„åŒºåˆ†èƒ½åŠ›è¶Šå¥½ï¼Œä¸Šå›¾AUCä¸º0.81ã€‚è‹¥AUC=0.5ï¼Œå³ä¸ä¸Šå›¾ä¸­çº¢çº¿é‡åˆï¼Œè¡¨ç¤ºæ¨¡å‹çš„åŒºåˆ†èƒ½åŠ›ä¸éšæœºçŒœæµ‹æ²¡æœ‰å·®åˆ«ã€‚è‹¥AUCçœŸçš„å°äº0.5ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯å¥½åæ ‡ç­¾æ ‡åäº†ï¼Œæˆ–è€…æ˜¯æ¨¡å‹çœŸçš„å¾ˆå·®ã€‚
æ€ä¹ˆé€‰æ‹©è¯„ä¼°æŒ‡æ ‡ï¼Ÿ è¿™ç§é—®é¢˜çš„ç­”æ¡ˆå½“ç„¶æ˜¯å…·ä½“é—®é¢˜å…·ä½“åˆ†æå•¦ï¼Œå•çº¯åœ°å›ç­”è°å¥½è°åæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆå®é™…åœºæ™¯ç»™å‡ºåˆé€‚çš„å›ç­”ã€‚
è€ƒè™‘ä¸‹é¢æ˜¯ä¸¤ä¸ªåœºæ™¯ï¼Œç”±æ­¤çœ‹å‡ºä¸åŒåœºæ™¯ä¸‹æˆ‘ä»¬å…³æ³¨çš„ç‚¹æ˜¯ä¸ä¸€æ ·çš„ï¼š
 å¯¹äºåœ°éœ‡çš„é¢„æµ‹ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯Recalléå¸¸é«˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡åœ°éœ‡æˆ‘ä»¬éƒ½å¸Œæœ›é¢„æµ‹å‡ºæ¥ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç‰ºç‰²Precisionã€‚æƒ…æ„¿å‘å‡º1000æ¬¡è­¦æŠ¥ï¼ŒæŠŠ10æ¬¡åœ°éœ‡éƒ½é¢„æµ‹æ­£ç¡®äº†ï¼›ä¹Ÿä¸è¦é¢„æµ‹100æ¬¡å¯¹äº†8æ¬¡æ¼äº†ä¸¤æ¬¡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾å®šåœ¨åˆç†çš„precisionä¸‹ï¼Œæœ€é«˜çš„recallä½œä¸ºæœ€ä¼˜ç‚¹ï¼Œæ‰¾åˆ°è¿™ä¸ªå¯¹åº”çš„thresholdç‚¹ã€‚ å«Œç–‘äººå®šç½ªåŸºäºä¸é”™æ€ªä¸€ä¸ªå¥½äººçš„åŸåˆ™ï¼Œå¯¹äºå«Œç–‘äººçš„å®šç½ªæˆ‘ä»¬å¸Œæœ›æ˜¯éå¸¸å‡†ç¡®çš„ã€‚å³ä½¿æœ‰æ—¶å€™æ”¾è¿‡äº†ä¸€äº›ç½ªçŠ¯ï¼ˆRecallä½ï¼‰ï¼Œä½†ä¹Ÿæ˜¯å€¼å¾—çš„ã€‚  ROCå’ŒPRCåœ¨æ¨¡å‹æ€§èƒ½è¯„ä¼°ä¸Šæ•ˆæœéƒ½å·®ä¸å¤šï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ­£è´Ÿæ ·æœ¬åˆ†å¸ƒå¾—æä¸å‡åŒ€(highly skewed datasets)çš„æƒ…å†µä¸‹ï¼ŒPRCæ¯”ROCèƒ½æ›´æœ‰æ•ˆåœ°ååº”åˆ†ç±»å™¨çš„å¥½åã€‚åœ¨æ•°æ®æåº¦ä¸å¹³è¡¡çš„æƒ…å†µä¸‹ï¼Œè­¬å¦‚è¯´1ä¸‡å°é‚®ä»¶ä¸­åªæœ‰1å°åƒåœ¾é‚®ä»¶ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æŒ‘å‡º10å°ï¼Œ50å°ï¼Œ100&amp;hellip;å°åƒåœ¾é‚®ä»¶ï¼ˆå‡è®¾æˆ‘ä»¬æ¯æ¬¡æŒ‘å‡ºçš„Nå°é‚®ä»¶ä¸­éƒ½åŒ…å«çœŸæ­£çš„é‚£å°åƒåœ¾é‚®ä»¶ï¼‰ï¼ŒRecalléƒ½æ˜¯100%ï¼Œä½†æ˜¯FPRåˆ†åˆ«æ˜¯9/9999, 49/9999, 99/9999ï¼ˆæ•°æ®éƒ½æ¯”è¾ƒå¥½çœ‹ï¼šFPRè¶Šä½è¶Šå¥½ï¼‰ï¼Œè€ŒPrecisionå´åªæœ‰1/10ï¼Œ1/50ï¼Œ 1/100 ï¼ˆæ•°æ®å¾ˆå·®ï¼šPrecisionè¶Šé«˜è¶Šå¥½ï¼‰ã€‚æ‰€ä»¥åœ¨æ•°æ®éå¸¸ä¸å‡è¡¡çš„æƒ…å†µä¸‹ï¼Œçœ‹ROCçš„AUCå¯èƒ½æ˜¯çœ‹ä¸å‡ºå¤ªå¤šå¥½åçš„ï¼Œè€ŒPR curveå°±è¦æ•æ„Ÿçš„å¤šã€‚</description>
    </item>
    
    <item>
      <title>å¸¸ç”¨ç¼“å­˜æ·˜æ±°ç®—æ³•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E5%B8%B8%E7%94%A8%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E5%B8%B8%E7%94%A8%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/</guid>
      <description>å¸¸è§ç±»å‹åŒ…æ‹¬LFUã€LRUã€ARCã€FIFOã€MRUã€‚
 æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•ï¼ˆLFU, Least Frequently Usedï¼‰ï¼š  è¿™ä¸ªç¼“å­˜ç®—æ³•ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥è®°å½•æ¡ç›®è¢«è®¿é—®çš„é¢‘ç‡ã€‚é€šè¿‡ä½¿ç”¨LFUç¼“å­˜ç®—æ³•ï¼Œæœ€ä½è®¿é—®æ•°çš„æ¡ç›®é¦–å…ˆè¢«ç§»é™¤ã€‚è¿™ä¸ªæ–¹æ³•å¹¶ä¸ç»å¸¸ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ— æ³•å¯¹ä¸€ä¸ªæ‹¥æœ‰æœ€åˆé«˜è®¿é—®ç‡ä¹‹åé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®çš„æ¡ç›®ç¼“å­˜è´Ÿè´£ã€‚
 æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRU, Least Recently Usedï¼‰  LRUæ˜¯é¦–å…ˆæ·˜æ±°æœ€é•¿æ—¶é—´æœªè¢«ä½¿ç”¨çš„é¡µé¢ã€‚è¿™ç§ç®—æ³•æŠŠè¿‘æœŸæœ€ä¹…æ²¡æœ‰è¢«è®¿é—®è¿‡çš„é¡µé¢ä½œä¸ºè¢«æ›¿æ¢çš„é¡µé¢ã€‚å®ƒæŠŠLFUç®—æ³•ä¸­è¦è®°å½•æ•°é‡ä¸Šçš„&amp;quot;å¤š&amp;quot;ä¸&amp;quot;å°‘&amp;quot;ç®€åŒ–æˆåˆ¤æ–­&amp;quot;æœ‰&amp;quot;ä¸&amp;quot;æ— &amp;quot;ï¼Œå› æ­¤ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå®¹æ˜“ã€‚
æ³¨æ„ï¼šLRUçš„æ·˜æ±°è§„åˆ™æ˜¯åŸºäºè®¿é—®æ—¶é—´ï¼Œè€ŒLFUæ˜¯åŸºäºè®¿é—®æ¬¡æ•°çš„ </description>
    </item>
    
    <item>
      <title>åº•å±‚æ•°æ®ç»“æ„</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</guid>
      <description>å­—ç¬¦ä¸²: SDS
list: å…ƒç´ å°‘ä¸”å° ğŸ‘‰ğŸ¿ ziplist , å…ƒç´ å¤šä¸”å¤§ ğŸ‘‰ğŸ¿ åŒé“¾è¡¨
hash: å…ƒç´ å°‘ä¸”å° ğŸ‘‰ğŸ¿ ziplist , å…ƒç´ å¤šä¸”å¤§ ğŸ‘‰ğŸ¿ hashtable
zset: å…ƒç´ å°‘ä¸”å° ğŸ‘‰ğŸ¿ ziplist , å…ƒç´ å¤šä¸”å¤§ ğŸ‘‰ğŸ¿ skiplist
set: å…ƒç´ å°‘ä¸”å° ğŸ‘‰ğŸ¿ intset , å…ƒç´ å¤šä¸”å¤§ ğŸ‘‰ğŸ¿ hashtable
 redisçš„hashtableä½¿ç”¨æ‹‰é“¾æ³•è§£å†³å†²çª
 ä»€ä¹ˆæ˜¯è·³è·ƒè¡¨ï¼Ÿ
è·³è¡¨æ˜¯ä¸€ç§å¸¦å¤šçº§ç´¢å¼•çš„é“¾è¡¨ã€‚
æœ‰åºé“¾è¡¨èƒ½ä»¥log(n)çš„æ—¶é—´å¤æ‚å®ç°æŸ¥æ‰¾ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦æ˜¯O(n)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå°†åŒ…å« n ä¸ªç»“ç‚¹çš„å•é“¾è¡¨æ„é€ æˆè·³è¡¨ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–å†ç”¨æ¥è¿‘ n ä¸ªç»“ç‚¹çš„å­˜å‚¨ç©ºé—´ã€‚
ç­”ï¼šè·³è¡¨è¿™ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå€¼å¾—æ¯ä¸€ä¸ªç¨‹åºå‘˜æŒæ¡ ä¸ºä»€ä¹ˆä½¿ç”¨å‹ç¼©ziplistï¼Ÿ
ç­”ï¼šç›¸è¾ƒäºåŒé“¾è¡¨ï¼ŒèŠ‚çœäº†ä¸¤ä¸ªæŒ‡é’ˆçš„ç©ºé—´ã€‚ï¼ˆpre_entry_lengthå‰é©±æ•°æ®é¡¹çš„å¤§å°ã€‚å› ä¸ºä¸ç”¨æè¿°å‰é©±çš„æ•°æ®ç±»å‹ï¼Œæè¿°è¾ƒä¸ºç®€å•ï¼‰ã€‚ç›¸è¾ƒäºæ•°ç»„ï¼Œziplistçš„æ¯ä¸ªentryæ‰€å çš„å†…å­˜å¤§å°å¯ä»¥ä¸åŒï¼Œä¾¿äºèŠ‚çœç©ºé—´ã€‚
ä¸ºä»€ä¹ˆlist  hash  zset åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ä¸å†ä½¿ç”¨ziplistï¼Ÿ
ç­”ï¼šéš¾ä»¥è·å¾—å¤§çš„è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚
å‚è€ƒ å›¾è§£redisäº”ç§æ•°æ®ç»“æ„åº•å±‚å®ç°(åŠ¨å›¾å“¦) Redis æ•°æ®ç»“æ„ ziplist Redisæºç åˆ†æ-å‹ç¼©åˆ—è¡¨ziplist </description>
    </item>
    
    <item>
      <title>æ‚²è§‚é”å’Œä¹è§‚é”</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E6%82%B2%E8%A7%82%E9%94%81%E5%92%8C%E4%B9%90%E8%A7%82%E9%94%81/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/mysql/%E6%82%B2%E8%A7%82%E9%94%81%E5%92%8C%E4%B9%90%E8%A7%82%E9%94%81/</guid>
      <description>æ‚²è§‚é” å…±äº«é”ã€æ’ä»–é”
 å…±äº«é”ï¼Œä¹Ÿå°±æ˜¯å…¶ä»–äº‹åŠ¡å¯ä»¥å¹¶å‘è¯»ï¼ˆå…¶ä»–äº‹åŠ¡ä¹Ÿéœ€è¦åŠ å…±äº«é”ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½å†™ã€‚
æ’å®ƒé”ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å¹¶å‘å†™ä¹Ÿä¸èƒ½å¹¶å‘è¯»ã€‚
 ä¹è§‚é” ä¹è§‚é”å…¶å®ä¹Ÿä¸æ˜¯å®é™…çš„é”ï¼Œç”šè‡³æ²¡æœ‰ç”¨åˆ°é”æ¥å®ç°å¹¶å‘æ§åˆ¶ï¼Œè€Œæ˜¯é‡‡å–å…¶ä»–æ–¹å¼æ¥åˆ¤æ–­èƒ½å¦ä¿®æ”¹æ•°æ®ã€‚ä¹è§‚é”ä¸€èˆ¬æ˜¯ç”¨æˆ·è‡ªå·±å®ç°çš„ä¸€ç§é”æœºåˆ¶ï¼Œè™½ç„¶æ²¡æœ‰ç”¨åˆ°å®é™…çš„é”ï¼Œä½†æ˜¯èƒ½äº§ç”ŸåŠ é”çš„æ•ˆæœã€‚
ä¹è§‚é”åŸºæœ¬éƒ½æ˜¯åŸºäº CASï¼ˆCompare and swapï¼‰ç®—æ³•æ¥å®ç°çš„ã€‚
ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š
 ç‰ˆæœ¬å·æ ‡è®°ï¼šåœ¨è¡¨ä¸­æ–°å¢ä¸€ä¸ªå­—æ®µï¼šversionï¼Œç”¨äºä¿å­˜ç‰ˆæœ¬å·ã€‚è·å–æ•°æ®çš„æ—¶å€™åŒæ—¶è·å–ç‰ˆæœ¬å·ï¼Œç„¶åæ›´æ–°æ•°æ®çš„æ—¶å€™ç”¨ä»¥ä¸‹å‘½ä»¤:update xxx set version=version+1,â€¦ where â€¦ version=&amp;quot;old version&amp;quot; and ....ã€‚è¿™æ—¶å€™é€šè¿‡åˆ¤æ–­è¿”å›ç»“æœçš„å½±å“è¡Œæ•°æ˜¯å¦ä¸º0æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°æˆåŠŸï¼Œæ›´æ–°å¤±è´¥åˆ™è¯´æ˜æœ‰å…¶ä»–è¯·æ±‚å·²ç»æ›´æ–°äº†æ•°æ®äº†ã€‚ æ—¶é—´æˆ³æ ‡è®°ï¼šå’Œç‰ˆæœ¬å·ä¸€æ ·ï¼Œåªæ˜¯é€šè¿‡æ—¶é—´æˆ³æ¥åˆ¤æ–­ã€‚ä¸€èˆ¬æ¥è¯´å¾ˆå¤šæ•°æ®è¡¨éƒ½ä¼šæœ‰æ›´æ–°æ—¶é—´è¿™ä¸€ä¸ªå­—æ®µï¼Œé€šè¿‡è¿™ä¸ªå­—æ®µæ¥åˆ¤æ–­å°±ä¸ç”¨å†æ–°å¢ä¸€ä¸ªå­—æ®µäº†ã€‚ å¾…æ›´æ–°å­—æ®µï¼šå¦‚æœæ²¡æœ‰æ—¶é—´æˆ³å­—æ®µï¼Œè€Œä¸”ä¸æƒ³æ–°å¢å­—æ®µï¼Œé‚£å¯ä»¥è€ƒè™‘ç”¨å¾…æ›´æ–°å­—æ®µæ¥åˆ¤æ–­ï¼Œå› ä¸ºæ›´æ–°æ•°æ®ä¸€èˆ¬éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé‚£æ›´æ–°å‰å¯ä»¥æ‹¿è¦æ›´æ–°çš„å­—æ®µçš„æ—§å€¼å’Œæ•°æ®åº“çš„ç°å€¼è¿›è¡Œæ¯”å¯¹ï¼Œæ²¡æœ‰å˜åŒ–åˆ™æ›´æ–°ã€‚ æ‰€æœ‰å­—æ®µæ ‡è®°ï¼šæ•°æ®è¡¨æ‰€æœ‰å­—æ®µéƒ½ç”¨æ¥åˆ¤æ–­ã€‚è¿™ç§ç›¸å½“äºå°±ã€ä¸ä»…ä»…å¯¹æŸå‡ ä¸ªå­—æ®µåšåŠ é”äº†ï¼Œè€Œæ˜¯å¯¹æ•´ä¸ªæ•°æ®è¡ŒåŠ é”ï¼Œåªè¦æœ¬è¡Œæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸è¿›è¡Œæ›´æ–°ã€‚  æ€»ç»“ æ‚²è§‚é”å’Œä¹è§‚é”å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å·®å¼‚ä¸å¤§ï¼Œä¸€äº›ç‹¬ç‰¹åœºæ™¯ä¸‹æœ‰ä¸€äº›å·®åˆ«ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯ä»¥ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢æ¥åˆ¤æ–­ï¼š
1.å“åº”é€Ÿåº¦ï¼šå¦‚æœéœ€è¦éå¸¸é«˜çš„å“åº”é€Ÿåº¦ï¼Œå»ºè®®é‡‡ç”¨ä¹è§‚é”æ–¹æ¡ˆï¼ŒæˆåŠŸå°±æ‰§è¡Œï¼Œä¸æˆåŠŸå°±å¤±è´¥ï¼Œä¸éœ€è¦ç­‰å¾…å…¶ä»–å¹¶å‘å»é‡Šæ”¾é”
2.å†²çªé¢‘ç‡ï¼šå¦‚æœå†²çªé¢‘ç‡éå¸¸é«˜ï¼Œå»ºè®®é‡‡ç”¨æ‚²è§‚é”ï¼Œä¿è¯æˆåŠŸç‡ï¼Œå¦‚æœå†²çªé¢‘ç‡å¤§ï¼Œä¹è§‚é”ä¼šéœ€è¦å¤šæ¬¡é‡è¯•æ‰èƒ½æˆåŠŸï¼Œä»£ä»·æ¯”è¾ƒå¤§
3.é‡è¯•ä»£ä»·ï¼šå¦‚æœé‡è¯•ä»£ä»·å¤§ï¼Œå»ºè®®é‡‡ç”¨æ‚²è§‚é”
å‚è€ƒé“¾æ¥ï¼š ä¹è§‚é”ä¸æ‚²è§‚é”å„è‡ªé€‚ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€æ–‡è¯»æ‡‚æ•°æ®åº“ä¸­çš„ä¹è§‚é”å’Œæ‚²è§‚é”å’ŒMVCC </description>
    </item>
    
    <item>
      <title>æŒ‡ä»¤é‡æ’</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92/</guid>
      <description>æˆ‘ä»¬çŸ¥é“javaåœ¨è¿è¡Œçš„æ—¶å€™æœ‰ä¸¤ä¸ªåœ°æ–¹å¯èƒ½ç”¨åˆ°é‡æ’åºï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘å™¨ç¼–è¯‘çš„çš„æ—¶å€™ï¼Œä¸€ä¸ªæ˜¯å¤„ç†å™¨è¿è¡Œçš„æ—¶å€™ã€‚
é‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥é—®é—®ä¸ºå•¥è¦ç”¨æŒ‡ä»¤é‡æ’åºå‘¢ï¼Ÿ
ç¼–è¯‘æœŸé‡æ’åºæœ‰å•¥å¥½å¤„ï¼Ÿ
CPUè®¡ç®—çš„æ—¶å€™è¦è®¿é—®å€¼ï¼Œå¦‚æœå¸¸å¸¸åˆ©ç”¨åˆ°å¯„å­˜å™¨ä¸­å·²æœ‰çš„å€¼å°±ä¸ç”¨å»å†…å­˜è¯»å–äº†ï¼Œæ¯”å¦‚è¯´
int a = 1; int b = 1; a = a + 1; b = b +1 ; å°±å¯èƒ½æ²¡æœ‰
int a = 1; a = a + 1; int b = 1; b = b +1 ; æ€§èƒ½å¥½ï¼Œå› ä¸ºåè€…çš„aæˆ–bå¯èƒ½åœ¨å¯„å­˜å™¨ä¸­äº†ã€‚
å¤„ç†å™¨ä¸ºå•¥è¦é‡æ’åºï¼Ÿ
ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤çš„æ‰§è¡Œæ­¥éª¤ï¼š
  å–æŒ‡ IF è¯‘ç å’Œå–å¯„å­˜å™¨æ“ä½œ ID æ‰§è¡Œæˆ–è€…æœ‰æ•ˆåœ°å€è®¡ç®— EX å­˜å‚¨å™¨è®¿é—® MEM å†™å› WB   åœ¨CPUå·¥ä½œä¸­æ±‡ç¼–æŒ‡ä»¤åˆ†å¤šæ­¥å®Œæˆï¼Œæ¯ä¸€éƒ¨æ¶‰åŠåˆ°çš„ç¡¬ä»¶ï¼ˆå¯„å­˜å™¨ï¼‰å¯èƒ½ä¸åŒï¼Œäºæ˜¯æœ‰äº†æµæ°´çº¿æŠ€æœ¯æ¥æ‰§è¡ŒæŒ‡ä»¤ã€‚
æ²¡æœ‰æµæ°´çº¿æŠ€æœ¯å‰ï¼Œå¦‚æœåŒæ—¶ä¸¤ä¸ªæŒ‡ä»¤è¿‡æ¥æ‰§è¡Œ ä¸€ä¸ªéœ€è¦5ç§’ï¼Œé‚£ä¹ˆä¸¤ä¸ªå°±éœ€è¦10ç§’ï¼›æœ‰äº†æµæ°´çº¿æŠ€æœ¯ä¹‹åï¼Œå¯èƒ½å°±åªè¦6ç§’ã€‚å¤šä¸ªæŒ‡ä»¤åŒæ—¶æ‰§è¡Œæ—¶æ€§èƒ½æ˜¾è‘—æå‡ã€‚
 æµæ°´çº¿æŠ€æœ¯æ˜¯ä¸€ç§å°†æŒ‡ä»¤åˆ†è§£ä¸ºå¤šæ­¥ï¼Œå¹¶è®©ä¸åŒæŒ‡ä»¤çš„å„æ­¥æ“ä½œé‡å ï¼Œä»è€Œå®ç°å‡ æ¡æŒ‡ä»¤å¹¶è¡Œå¤„ç†ã€‚
æŒ‡ä»¤1 IF ID EX MEN WB
æŒ‡ä»¤2 IF ID EX MEN WB</description>
    </item>
    
    <item>
      <title>æ•°æ®åº“å’Œç¼“å­˜åŒå†™ä¸€è‡´æ€§</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%BC%93%E5%AD%98%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/distributed/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%BC%93%E5%AD%98%E5%8F%8C%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7/</guid>
      <description>æ•°æ®åº“ä¸ç¼“å­˜åŒå†™å¯ä»¥æœ‰4ç§é¡ºåºï¼š æ›´æ–°ç¼“å­˜-&amp;gt;æ›´æ–°dbã€æ›´æ–°db-&amp;gt;æ›´æ–°ç¼“å­˜ã€åˆ é™¤ç¼“å­˜-&amp;gt;æ›´æ–°dbã€æ›´æ–°db-&amp;gt;åˆ é™¤ç¼“å­˜
å‰ä¸¤ç§é¡ºåºæœ‰æ˜¾è‘—çš„ç¼ºé™·ï¼š
 åæ›´æ–°çš„æ•°æ®æºå¤±è´¥ï¼Œå› ä¸ºæ— æ³•å°†å…ˆæ›´æ–°çš„æ•°æ®æºå›æ»šï¼ˆredisï¼‰æˆ–è€…ä¸çŸ¥é“è¯¥ä¸è¯¥å›æ»šï¼ˆè¶…æ—¶ï¼‰å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼› å¤šå¹¶å‘ï¼ˆå¤§äºä¸¤ä¸ªå¹¶å‘è¯·æ±‚ï¼Œä¸ä¸€å®šéœ€è¦é«˜å¹¶å‘ï¼‰åœºæ™¯ä¸‹ï¼Œå› ä¸ºåŒå†™ä¸æ˜¯åŸå­æ“ä½œï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿæ•°æ®ä¸ä¸€è‡´ï¼› è¯»å°‘å†™å¤šçš„åœºæ™¯ä¸‹ï¼Œå¤§é‡ç¼“å­˜ä¸€ç›´åœ¨è¢«æ›´æ–°ï¼Œå´æ²¡æœ‰è¢«è¯»ï¼Œä¸€ç›´åœ¨åšæ— ç”¨åŠŸã€‚  åä¸¤ç§é¡ºåºä¹Ÿå­˜åœ¨åœ¨å¤šå¹¶å‘æ•°æ®åœºæ™¯ä¸‹æ•°æ®ä¸ä¸€è‡´çš„æƒ…å½¢ï¼Œä½†æ˜¯å®ƒä»¬éƒ½å¯ä»¥é€šè¿‡ å¼‚æ­¥å»¶è¿ŸåŒåˆ +å¤±è´¥åˆ é™¤é‡è¯•æœºåˆ¶ è§£å†³ï¼Œå…¶ä¸­æ›´æ–°db-&amp;gt;åˆ é™¤ç¼“å­˜ å‘ç”Ÿä¸ä¸€è‡´çš„æ¦‚ç‡æ›´ä½ï¼Œæ‰€ä»¥åº”è¯¥é¦–å…ˆæœ€åä¸€ç§é¡ºåºå®æ–½åŒå†™ã€‚
é¦–å…ˆï¼Œç¼“å­˜ç”±äºå…¶é«˜å¹¶å‘å’Œé«˜æ€§èƒ½çš„ç‰¹æ€§ï¼Œå·²ç»åœ¨é¡¹ç›®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨è¯»å–ç¼“å­˜æ–¹é¢ï¼Œå¤§å®¶æ²¡å•¥ç–‘é—®ï¼Œéƒ½æ˜¯æŒ‰ç…§ä¸‹å›¾çš„æµç¨‹æ¥è¿›è¡Œä¸šåŠ¡æ“ä½œã€‚
ã€
åŒå†™å¯åˆ†ä¸ºï¼šæ›´æ–°ç¼“å­˜-&amp;gt;æ›´æ–°dbã€æ›´æ–°db-&amp;gt;æ›´æ–°ç¼“å­˜ã€åˆ é™¤ç¼“å­˜-&amp;gt;æ›´æ–°dbã€æ›´æ–°db-&amp;gt;åˆ é™¤ç¼“å­˜ å››ç§ç­–ç•¥ã€‚
å¹¶å‘äº‹åŠ¡æ—¶ï¼Œå‰ä¸¤ç§ç­–ç•¥ä¸ä»…å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„ï¼Œè€Œä¸”åœ¨å†™å¤šè¯»å°‘çš„åœºæ™¯ä¸‹ä¼šç™½ç™½æ¶ˆè€—ç¼“å­˜çš„æ€§èƒ½ï¼ˆå› ä¸ºæ•°æ®è¿˜æ²¡è¢«è¯»å°±åˆè¢«æ›´æ–°äº†ï¼Œå°¤å…¶æ˜¯åœ¨æ›´æ–°çš„ç¼“å­˜éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—æ‰èƒ½å¾—åˆ°æ—¶ï¼Œè¿™ç§æ¶ˆè€—æ›´åŠ ä¸¥é‡ï¼‰ã€‚åä¸¤ç§ç­–ç•¥æƒ…å†µç›¸ä¼¼ï¼Œåªæ˜¯æ›´æ–°db-&amp;gt;åˆ é™¤ç¼“å­˜ç›¸è¾ƒäºåˆ é™¤ç¼“å­˜-&amp;gt;æ›´æ–°dbå‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„æ¦‚ç‡æ›´ä½ï¼ˆå› ä¸ºåªæœ‰åœ¨å†™æ“ä½œå…ˆäºè¯»æ“ä½œå®Œæˆæ‰ä¼šä¸ä¸€è‡´ï¼Œè€Œä¸€èˆ¬æ¥è¯´ä¸€ä¸ªå†™æ“ä½œæ˜¯è¦æ¯”è¯»æ“ä½œæ…¢çš„ï¼‰ï¼Œä¸ºé˜²æ­¢ä¸ä¸€è‡´å‘ç”Ÿï¼Œå®ƒä»¬éƒ½é‡‡ç”¨å¼‚æ­¥å»¶è¿ŸåŒåˆ +åˆ é™¤é‡è¯•æœºåˆ¶çš„ç­–ç•¥ï¼Œä¸‹é¢è¯¦è¿°å¸¸è§åˆ é™¤é‡è¯•æœºåˆ¶ã€‚
é‡è¯•æœºåˆ¶ï¼šæ–¹æ¡ˆä¸€ æµç¨‹å¦‚ä¸‹æ‰€ç¤º ï¼ˆ1ï¼‰æ›´æ–°æ•°æ®åº“æ•°æ®ï¼› ï¼ˆ2ï¼‰ç¼“å­˜å› ä¸ºç§ç§é—®é¢˜åˆ é™¤å¤±è´¥ ï¼ˆ3ï¼‰å°†éœ€è¦åˆ é™¤çš„keyå‘é€è‡³æ¶ˆæ¯é˜Ÿåˆ— ï¼ˆ4ï¼‰è‡ªå·±æ¶ˆè´¹æ¶ˆæ¯ï¼Œè·å¾—éœ€è¦åˆ é™¤çš„key ï¼ˆ5ï¼‰ç»§ç»­é‡è¯•åˆ é™¤æ“ä½œï¼Œç›´åˆ°æˆåŠŸ ç„¶è€Œï¼Œè¯¥æ–¹æ¡ˆæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå¯¹ä¸šåŠ¡çº¿ä»£ç é€ æˆå¤§é‡çš„ä¾µå…¥ã€‚äºæ˜¯æœ‰äº†æ–¹æ¡ˆäºŒï¼Œåœ¨æ–¹æ¡ˆäºŒä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªè®¢é˜…ç¨‹åºå»è®¢é˜…æ•°æ®åº“çš„binlogï¼Œè·å¾—éœ€è¦æ“ä½œçš„æ•°æ®ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œå¦èµ·ä¸€æ®µç¨‹åºï¼Œè·å¾—è¿™ä¸ªè®¢é˜…ç¨‹åºä¼ æ¥çš„ä¿¡æ¯ï¼Œè¿›è¡Œåˆ é™¤ç¼“å­˜æ“ä½œã€‚
é‡è¯•æœºåˆ¶ï¼šæ–¹æ¡ˆäºŒ æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ï¼ˆ1ï¼‰æ›´æ–°æ•°æ®åº“æ•°æ® ï¼ˆ2ï¼‰æ•°æ®åº“ä¼šå°†æ“ä½œä¿¡æ¯å†™å…¥binlogæ—¥å¿—å½“ä¸­ ï¼ˆ3ï¼‰è®¢é˜…ç¨‹åºæå–å‡ºæ‰€éœ€è¦çš„æ•°æ®ä»¥åŠkey ï¼ˆ4ï¼‰å¦èµ·ä¸€æ®µéä¸šåŠ¡ä»£ç ï¼Œè·å¾—è¯¥ä¿¡æ¯ ï¼ˆ5ï¼‰å°è¯•åˆ é™¤ç¼“å­˜æ“ä½œï¼Œå‘ç°åˆ é™¤å¤±è´¥ ï¼ˆ6ï¼‰å°†è¿™äº›ä¿¡æ¯å‘é€è‡³æ¶ˆæ¯é˜Ÿåˆ— ï¼ˆ7ï¼‰é‡æ–°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å¾—è¯¥æ•°æ®ï¼Œé‡è¯•æ“ä½œã€‚
ä¸Šè¿°çš„è®¢é˜…binlogç¨‹åºåœ¨mysqlä¸­æœ‰ç°æˆçš„ä¸­é—´ä»¶å«canalï¼Œå¯ä»¥å®Œæˆè®¢é˜…binlogæ—¥å¿—çš„åŠŸèƒ½ã€‚è‡³äºoracleä¸­ï¼Œåšä¸»ç›®å‰ä¸çŸ¥é“æœ‰æ²¡æœ‰ç°æˆä¸­é—´ä»¶å¯ä»¥ä½¿ç”¨ã€‚å¦å¤–ï¼Œé‡è¯•æœºåˆ¶ï¼Œåšä¸»æ˜¯é‡‡ç”¨çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼ã€‚å¦‚æœå¯¹ä¸€è‡´æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œç›´æ¥åœ¨ç¨‹åºä¸­å¦èµ·ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å»é‡è¯•å³å¯ï¼Œè¿™äº›å¤§å®¶å¯ä»¥çµæ´»è‡ªç”±å‘æŒ¥ï¼Œåªæ˜¯æä¾›ä¸€ä¸ªæ€è·¯ã€‚
å‚è€ƒé“¾æ¥ï¼š åˆ†å¸ƒå¼ä¹‹æ•°æ®åº“å’Œç¼“å­˜åŒå†™ä¸€è‡´æ€§æ–¹æ¡ˆè§£æ </description>
    </item>
    
    <item>
      <title>æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ä¸ºå•¥ä¸ç›´æ¥ç”¨ HTTP è€Œç”¨ RPCï¼Ÿ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B0%83%E7%94%A8%E4%B8%BA%E5%95%A5%E4%B8%8D%E7%9B%B4%E6%8E%A5%E7%94%A8-http-%E8%80%8C%E7%94%A8-rpc/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B0%83%E7%94%A8%E4%B8%BA%E5%95%A5%E4%B8%8D%E7%9B%B4%E6%8E%A5%E7%94%A8-http-%E8%80%8C%E7%94%A8-rpc/</guid>
      <description> ä½¿ç”¨è‡ªå®šä¹‰ TCP åè®®è¿›è¡Œä¼ è¾“å°±ä¼šé¿å…ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œæå¤§åœ°å‡è½»äº†ä¼ è¾“æ•°æ®çš„å¼€é”€ã€‚ è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆé€šå¸¸ä¼šé‡‡ç”¨è‡ªå®šä¹‰ TCP åè®®çš„ RPC æ¥è¿›è¡Œè¿›è¡ŒæœåŠ¡è°ƒç”¨çš„çœŸæ­£åŸå› ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆç†Ÿçš„ RPC æ¡†æ¶è¿˜æä¾›å¥½äº†â€œæœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°â€ã€&amp;ldquo;æ™ºèƒ½è´Ÿè½½å‡è¡¡&amp;rdquo;ã€â€œå¯è§†åŒ–çš„æœåŠ¡æ²»ç†å’Œè¿ç»´â€ã€â€œè¿è¡ŒæœŸæµé‡è°ƒåº¦â€ç­‰ç­‰åŠŸèƒ½ï¼Œè¿™äº›ä¹Ÿç®—æ˜¯é€‰æ‹© RPC è¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œå‘ç°çš„ä¸€æ–¹é¢åŸå› å§ï¼  </description>
    </item>
    
    <item>
      <title>æ­»è®°ç¡¬èƒŒ</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%AD%BB%E8%AE%B0%E7%A1%AC%E8%83%8C/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/cs/other/%E6%AD%BB%E8%AE%B0%E7%A1%AC%E8%83%8C/</guid>
      <description>1. rediså¯ä»¥å®¹çº³å¤šå°‘ä¸ªé”®å€¼å¯¹ï¼Ÿå•ä¸ªé”®å€¼çš„å¤§å°é™åˆ¶æ˜¯ï¼Ÿ æœ€å¤šå®¹çº³ 2^32 ä¸ªkey
redisçš„keyå’Œstringç±»å‹valueé™åˆ¶å‡ä¸º512MBã€‚
stringç±»å‹ï¼šä¸€ä¸ªStringç±»å‹çš„valueæœ€å¤§å¯ä»¥å­˜å‚¨512M
listç±»å‹ï¼šlistçš„å…ƒç´ ä¸ªæ•°æœ€å¤šä¸º2^32-1ä¸ªï¼Œä¹Ÿå°±æ˜¯4294967295ä¸ªã€‚
setç±»å‹ï¼šå…ƒç´ ä¸ªæ•°æœ€å¤šä¸º2^32-1ä¸ªï¼Œä¹Ÿå°±æ˜¯4294967295ä¸ªã€‚
hashç±»å‹ï¼šé”®å€¼å¯¹ä¸ªæ•°æœ€å¤šä¸º2^32-1ä¸ªï¼Œä¹Ÿå°±æ˜¯4294967295ä¸ªã€‚
zsetç±»å‹ï¼šè·Ÿsetç±»å‹ç›¸ä¼¼ã€‚
2. mysql varcharæœ€å¤§é•¿åº¦ï¼Ÿ 65532 byte = 65535 byte (max row size) - 1 byte (not null flag) - 2 byte (è®°å½•å®é™…é•¿åº¦)
4.0ç‰ˆæœ¬ä»¥ä¸‹ï¼Œvarchar(20)ï¼ŒæŒ‡çš„æ˜¯20å­—èŠ‚ï¼Œå¦‚æœå­˜æ”¾UTF8æ±‰å­—æ—¶ï¼Œåªèƒ½å­˜6ä¸ªï¼ˆæ¯ä¸ªæ±‰å­—3å­—èŠ‚ï¼‰ 5.0ç‰ˆæœ¬ä»¥ä¸Šï¼Œvarchar(20)ï¼ŒæŒ‡çš„æ˜¯20å­—ç¬¦ï¼Œæ— è®ºå­˜æ”¾çš„æ˜¯æ•°å­—ã€å­—æ¯è¿˜æ˜¯UTF8æ±‰å­—ï¼ˆæ¯ä¸ªæ±‰å­—3å­—èŠ‚ï¼‰ï¼Œéƒ½å¯ä»¥å­˜æ”¾20ä¸ªï¼Œæœ€å¤§å¤§å°æ˜¯65532å­—èŠ‚
MySQLä¸­varcharæœ€å¤§é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ 3. mysql sqlå‘½ä»¤æ‰§è¡Œé¡ºåº å®šä½è¡¨` -&amp;gt; `ç¬›å¡å°”ç§¯` -&amp;gt; `è¿‡æ»¤` -&amp;gt; `é€‰æ‹© `-&amp;gt; `å±•ç¤º 1.FORM: å¯¹FROMçš„å·¦è¾¹çš„è¡¨å’Œå³è¾¹çš„è¡¨è®¡ç®—ç¬›å¡å°”ç§¯ã€‚äº§ç”Ÿè™šè¡¨VT1
2.ON: å¯¹è™šè¡¨VT1è¿›è¡ŒONç­›é€‰ï¼Œåªæœ‰é‚£äº›ç¬¦åˆçš„è¡Œæ‰ä¼šè¢«è®°å½•åœ¨è™šè¡¨VT2ä¸­ã€‚
3.JOINï¼š å¦‚æœæŒ‡å®šäº†OUTER JOINï¼ˆæ¯”å¦‚left joinã€ right joinï¼‰ï¼Œé‚£ä¹ˆä¿ç•™è¡¨ä¸­æœªåŒ¹é…çš„è¡Œå°±ä¼šä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨VT2ä¸­ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨VT3, rug fromå­å¥ä¸­åŒ…å«ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹ä¸Šä¸€ä¸ªjoinè¿æ¥äº§ç”Ÿçš„ç»“æœVT3å’Œä¸‹ä¸€ä¸ªè¡¨é‡å¤æ‰§è¡Œæ­¥éª¤1~3è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œä¸€ç›´åˆ°å¤„ç†å®Œæ‰€æœ‰çš„è¡¨ä¸ºæ­¢
4.WHEREï¼š å¯¹è™šæ‹Ÿè¡¨VT3è¿›è¡ŒWHEREæ¡ä»¶è¿‡æ»¤ã€‚åªæœ‰ç¬¦åˆçš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨VT4ä¸­ã€‚
5.GROUP BY: æ ¹æ®group byå­å¥ä¸­çš„åˆ—ï¼Œå¯¹VT4ä¸­çš„è®°å½•è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”ŸVT5.
6.CUBE | ROLLUP: å¯¹è¡¨VT5è¿›è¡Œcubeæˆ–è€…rollupæ“ä½œï¼Œäº§ç”Ÿè¡¨VT6.
7.HAVINGï¼š å¯¹è™šæ‹Ÿè¡¨VT6åº”ç”¨havingè¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆçš„è®°å½•æ‰ä¼šè¢« æ’å…¥åˆ°è™šæ‹Ÿè¡¨VT7ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>æ³›å‹</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E6%B3%9B%E5%9E%8B/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E6%B3%9B%E5%9E%8B/</guid>
      <description>æ³›å‹çš„å¥½å¤„  æä¾›äº†ä¸€ç§ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶ æå‡ç¨‹åºå¯è¯»æ€§  é€šé…ç¬¦ é€šé…ç¬¦çš„å‡ºç°æ˜¯ä¸ºäº†æŒ‡å®šæ³›å‹ä¸­çš„ç±»å‹èŒƒå›´ã€‚
é€šé…ç¬¦æœ‰ 3 ç§å½¢å¼ã€‚
 &amp;lt;?&amp;gt;è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦ã€‚ &amp;lt;? extends T&amp;gt;è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ã€‚ &amp;lt;? super T&amp;gt;è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ã€‚   ? å…¶å®ä»£è¡¨çš„æ˜¯æœªçŸ¥ç±»å‹ï¼Œæ‰€ä»¥æ¶‰åŠåˆ° ? æ—¶çš„æ“ä½œï¼Œä¸€å®šä¸å…·ä½“ç±»å‹æ— å…³ã€‚
æœ‰äººè¯´ï¼Œ&amp;lt;?&amp;gt;æä¾›äº†åªè¯»çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å®ƒåˆ å‡äº†å¢åŠ å…·ä½“ç±»å‹å…ƒç´ çš„èƒ½åŠ›ï¼Œåªä¿ç•™ä¸å…·ä½“ç±»å‹æ— å…³çš„åŠŸèƒ½ã€‚å®ƒä¸ç®¡è£…è½½åœ¨è¿™ä¸ªå®¹å™¨å†…çš„å…ƒç´ æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå®ƒåªå…³å¿ƒå…ƒç´ çš„æ•°é‡ã€å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Ÿæˆ‘æƒ³è¿™ç§éœ€æ±‚è¿˜æ˜¯å¾ˆå¸¸è§çš„å§ã€‚
æœ‰åŒå­¦å¯èƒ½ä¼šæƒ³ï¼Œ&amp;lt;?&amp;gt;æ—¢ç„¶ä½œç”¨è¿™ä¹ˆæ¸ºå°ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦å¼•ç”¨å®ƒå‘¢ï¼Ÿ 
ä¸ªäººè®¤ä¸ºï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œç¨‹åºå‘˜çœ‹åˆ°è¿™æ®µä»£ç æ—¶ï¼Œå°±èƒ½å¤Ÿè¿…é€Ÿå¯¹æ­¤å»ºç«‹æç®€æ´çš„å°è±¡ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ¨æ–­æºç ä½œè€…çš„æ„å›¾ã€‚
ç±»å‹æ“¦é™¤ åœ¨æ³›å‹ç±»è¢«ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼Œä¹‹å‰æ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°éƒ¨åˆ†å¦‚æœæ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œå¦‚ &amp;lt;T&amp;gt;åˆ™ä¼šè¢«è½¬è¯‘æˆæ™®é€šçš„ Object ç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†ä¸Šé™å¦‚ &amp;lt;T extends String&amp;gt;åˆ™ç±»å‹å‚æ•°å°±è¢«æ›¿æ¢æˆç±»å‹ä¸Šé™ã€‚
ç±»å‹æ“¦é™¤å¸¦æ¥çš„å±€é™æ€§ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå› ä¸ºæ³›å‹çš„é™åˆ¶ï¼Œç¼–è¯‘å™¨ä¸è®©æœ€åä¸€è¡Œä»£ç ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºç±»ä¼¼ä¸åŒ¹é…ï¼Œä½†æ˜¯ï¼ŒåŸºäºå¯¹ç±»å‹æ“¦é™¤çš„äº†è§£ï¼Œåˆ©ç”¨åå°„ï¼Œæˆ‘ä»¬å¯ä»¥ç»•è¿‡è¿™ä¸ªé™åˆ¶ã€‚
é‚£ä¹ˆï¼Œåˆ©ç”¨åå°„ï¼Œæˆ‘ä»¬ç»•è¿‡ç¼–è¯‘å™¨å»è°ƒç”¨ add æ–¹æ³•ã€‚
public class ToolTest { public static void main(String[] args) { List&amp;lt;Integer&amp;gt; ls = new ArrayList&amp;lt;&amp;gt;(); ls.add(23); //	ls.add(&amp;#34;text&amp;#34;);  try { Method method = ls.getClass().getDeclaredMethod(&amp;#34;add&amp;#34;,Object.class); method.invoke(ls,&amp;#34;test&amp;#34;); method.invoke(ls,42.9f); } catch (NoSuchMethodException e) { // TODO Auto-generated catch block  e.</description>
    </item>
    
    <item>
      <title>æµ®ç‚¹æ•°è¿ç®—</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E6%B5%AE%E7%82%B9%E6%95%B0%E8%BF%90%E7%AE%97/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E6%B5%AE%E7%82%B9%E6%95%B0%E8%BF%90%E7%AE%97/</guid>
      <description>ç»“è®º  Javaä¸­å•ç²¾åº¦å’ŒåŒç²¾åº¦é‡‡ç”¨IEEE 754è¡¨ç¤ºï¼Œèƒ½æœ‰æ•ˆè¿ç®—çš„èŒƒå›´å¤§è‡´æ˜¯å°æ•°ç‚¹å7ä½å’Œ15ä½ å¦‚æœJavaä¸­é»˜è®¤çš„floatå’Œdoubleä¸èƒ½æ»¡è¶³ä½ çš„ç²¾åº¦è¦æ±‚ï¼Œå¯ä»¥ç”¨BigDecimalï¼Œç†è®ºä¸Šå®ƒçš„ç²¾åº¦åªå—é™åˆ¶ä¸æœºå™¨å†…å­˜ å¦‚æœBigDecimalä»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä¾‹å¦‚æ˜¯æ— é™å¾ªç¯å°æ•°çš„è¿ç®—ï¼Œå¯è€ƒè™‘è®¾è®¡åˆ†æ•°ç³»ç»Ÿä¿è¯è®¡ç®—çš„ç²¾åº¦  1. IEEE 754 ç²¾åº¦ä¸Šé™ ç¼–ç¨‹è¯­è¨€ä¸­çš„æµ®ç‚¹æ•°ä¸€èˆ¬éƒ½æ˜¯ 32 ä½çš„å•ç²¾åº¦æµ®ç‚¹æ•° float å’Œ 64 ä½çš„åŒç²¾åº¦æµ®ç‚¹æ•° doubleï¼Œéƒ¨åˆ†è¯­è¨€ä¼šä½¿ç”¨ float32 æˆ–è€… float64 åŒºåˆ†è¿™ä¸¤ç§ä¸åŒç²¾åº¦çš„æµ®ç‚¹æ•°ã€‚æƒ³è¦ä½¿ç”¨æœ‰é™çš„ä½æ•°è¡¨ç¤ºå…¨éƒ¨çš„å®æ•°æ˜¯ä¸å¯èƒ½çš„ï¼Œä¸ç”¨è¯´æ— é™é•¿åº¦çš„å°æ•°å’Œæ— ç†æ•°ï¼Œå› ä¸ºé•¿åº¦çš„é™åˆ¶ï¼Œæœ‰é™å°æ•°åœ¨æµ®ç‚¹æ•°ä¸­éƒ½æ— æ³•ç²¾ç¡®çš„è¡¨ç¤ºã€‚
 å•ç²¾åº¦æµ®ç‚¹æ•° float æ€»å…±åŒ…å« 32 ä½ï¼Œå…¶ä¸­ 1 ä½è¡¨ç¤ºç¬¦å·ã€8 ä½è¡¨ç¤ºæŒ‡æ•°ï¼Œæœ€å 23 ä½è¡¨ç¤ºå°æ•°ï¼› åŒç²¾åº¦æµ®ç‚¹æ•° double æ€»å…±åŒ…å« 64 ä½ï¼Œå…¶ä¸­ 1 ä½è¡¨ç¤ºç¬¦å·ï¼Œ11 ä½è¡¨ç¤ºæŒ‡æ•°ï¼Œæœ€å 52 ä½è¡¨ç¤ºå°æ•°ï¼›  æˆ‘ä»¬ä»¥å•ç²¾åº¦æµ®ç‚¹æ•° 0.15625 ä¸ºä¾‹:
é€šè¿‡ä¸Šå›¾ä¸­çš„å…¬å¼ (sign * 2^{exp}* (1+fraction))å¯ä»¥å°†æµ®ç‚¹æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºè½¬æ¢æˆåè¿›åˆ¶çš„å°æ•°ã€‚0.15625 è™½ç„¶è¿˜å¯ä»¥ç”¨å•ç²¾åº¦çš„æµ®ç‚¹æ•°ç²¾ç¡®è¡¨ç¤ºï¼Œä½†æ˜¯ 0.1 å’Œ 0.2 åªèƒ½ä½¿ç”¨æµ®ç‚¹æ•°è¡¨ç¤ºè¿‘ä¼¼çš„å€¼ï¼š
å› ä¸º 0.2 å’Œ 0.1 åªæ˜¯æŒ‡æ•°ç¨æœ‰ä¸åŒï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­åªå±•ç¤ºäº† 0.1 å¯¹åº”çš„å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œä»ä¸Šå›¾çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ0.1 å’Œ 0.2 åœ¨æµ®ç‚¹æ•°ä¸­åªèƒ½ç”¨è¿‘ä¼¼å€¼æ¥ä»£æ›¿ï¼Œç²¾åº¦ååˆ†æœ‰é™ï¼Œå› ä¸ºå•ç²¾åº¦æµ®ç‚¹æ•°çš„å°æ•°ä½ä¸º 23ï¼ŒåŒç²¾åº¦çš„å°æ•°ä½ä¸º 52ï¼ŒåŒæ—¶éƒ½éšå¼åœ°åŒ…å«é¦–ä½çš„ 1ï¼Œæ‰€ä»¥å®ƒä»¬çš„ç²¾åº¦åœ¨åè¿›åˆ¶ä¸­åˆ†åˆ«æ˜¯(log_{10}(2^{24})\approx 7.</description>
    </item>
    
    <item>
      <title>æ·±åº¦å›¾è§£Redis ClusteråŸç†</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E6%B7%B1%E5%BA%A6%E5%9B%BE%E8%A7%A3redis-cluster%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E6%B7%B1%E5%BA%A6%E5%9B%BE%E8%A7%A3redis-cluster%E5%8E%9F%E7%90%86/</guid>
      <description>ä¸»ä»èƒ½å®ç°è¯»èƒ½åŠ›è¿›è¡Œæ‰©å±•ï¼Œä½†æ— æ³•è‡ªåŠ¨æ•…éšœåˆ‡æ¢ã€å†™èƒ½åŠ›å’Œå­˜å‚¨èƒ½åŠ›ï¼›
å“¨å…µèƒ½è‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œä½†æ— æ³•å¯¹å†™èƒ½åŠ›å’Œå­˜å‚¨èƒ½åŠ›æ˜¯æ— æ³•è¿›è¡Œæ‰©å±•ï¼›
é›†ç¾¤èƒ½è¯»èƒ½åŠ›ã€å†™èƒ½åŠ›ã€å­˜å‚¨èƒ½åŠ›è¿›è¡Œæ‰©å±•ï¼Œä¹Ÿèƒ½è‡ªåŠ¨æ•…éšœåˆ‡æ¢
å‰è¨€ ä¸Šæ–‡æˆ‘ä»¬èŠäº†åŸºäºSentinelçš„Redisé«˜å¯ç”¨æ¶æ„ï¼Œäº†è§£äº†RedisåŸºäºè¯»å†™åˆ†ç¦»çš„ä¸»ä»æ¶æ„ï¼ŒåŒæ—¶ä¹ŸçŸ¥é“å½“Redisçš„masterå‘ç”Ÿæ•…éšœä¹‹åï¼ŒSentinelé›†ç¾¤æ˜¯å¦‚ä½•æ‰§è¡Œfailoverçš„ï¼Œä»¥åŠå…¶æ‰§è¡Œfailoverçš„åŸç†æ˜¯ä»€ä¹ˆã€‚
è¿™é‡Œå¤§æ¦‚å†æä¸€ä¸‹ï¼ŒSentinelé›†ç¾¤ä¼šå¯¹Redisçš„ä¸»ä»æ¶æ„ä¸­çš„Rediså®ä¾‹è¿›è¡Œç›‘æ§ï¼Œä¸€æ—¦å‘ç°äº†masterèŠ‚ç‚¹å®•æœºäº†ï¼Œå°±ä¼šé€‰ä¸¾å‡ºä¸€ä¸ªSentinelèŠ‚ç‚¹æ¥æ‰§è¡Œæ•…éšœè½¬ç§»ï¼Œä»åŸæ¥çš„slaveèŠ‚ç‚¹ä¸­é€‰ä¸¾å‡ºä¸€ä¸ªï¼Œå°†å…¶æå‡ä¸ºmasterèŠ‚ç‚¹ï¼Œç„¶åè®©å…¶ä»–çš„èŠ‚ç‚¹å»å¤åˆ¶æ–°é€‰ä¸¾å‡ºæ¥çš„masterèŠ‚ç‚¹ã€‚
ä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ ·æ²¡æœ‰é—®é¢˜å•Šï¼Œç”šè‡³èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒçš„ä½¿ç”¨éœ€æ±‚äº†ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜éœ€è¦Redis Clusterå‘¢ï¼Ÿ
1. ä¸ºä»€ä¹ˆéœ€è¦Redis Cluster çš„ç¡®ï¼Œåœ¨æ•°æ®ä¸Šï¼Œæœ‰replicationå‰¯æœ¬åšä¿è¯ï¼›å¯ç”¨æ€§ä¸Šï¼Œmasterå®•æœºä¼šè‡ªåŠ¨çš„æ‰§è¡Œfailoverã€‚
 é‚£é—®é¢˜åœ¨å“ªå„¿å‘¢ï¼Ÿ
 é¦–å…ˆRedis Sentinelè¯´ç™½äº†ä¹Ÿæ˜¯åŸºäºä¸»ä»å¤åˆ¶ï¼Œåœ¨ä¸»ä»å¤åˆ¶ä¸­slaveçš„æ•°æ®æ˜¯å®Œå…¨æ¥è‡ªäºmasterã€‚
å‡è®¾masterèŠ‚ç‚¹çš„å†…å­˜åªæœ‰4Gï¼Œé‚£slaveèŠ‚ç‚¹æ‰€èƒ½å­˜å‚¨çš„æ•°æ®ä¸Šé™ä¹Ÿåªèƒ½æ˜¯4Gã€‚è€Œä¸”åœ¨ä¹‹å‰çš„è·Ÿéšæ ç²¾çš„è§†è§’ä¸€èµ·æ¥äº†è§£Redisçš„ä¸»ä»å¤åˆ¶ æ–‡ç« ä¸­ä¹Ÿè¯´è¿‡ï¼Œä¸»ä»å¤åˆ¶æ¶æ„ä¸­æ˜¯è¯»å†™åˆ†ç¦»çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ slaveèŠ‚ç‚¹æ¥æ‰©å±•ä¸»ä»çš„è¯»å¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯å†™èƒ½åŠ›å’Œå­˜å‚¨èƒ½åŠ›æ˜¯æ— æ³•è¿›è¡Œæ‰©å±•çš„ï¼Œå°±åªèƒ½æ˜¯masterèŠ‚ç‚¹èƒ½å¤Ÿæ‰¿è½½çš„ä¸Šé™ã€‚
æ‰€ä»¥ï¼Œå½“ä½ åªéœ€è¦å­˜å‚¨4Gçš„æ•°æ®æ—¶å€™çš„ï¼ŒåŸºäºä¸»ä»å¤åˆ¶å’ŒåŸºäºSentinelçš„é«˜å¯ç”¨æ¶æ„æ˜¯å®Œå…¨å¤Ÿç”¨çš„ã€‚
ä½†æ˜¯å¦‚æœå½“ä½ é¢ä¸´çš„æ˜¯æµ·é‡çš„æ•°æ®çš„æ—¶å€™å‘¢ï¼Ÿ16Gã€64Gã€256Gç”šè‡³1Tå‘¢ï¼Ÿç°åœ¨äº’è”ç½‘çš„ä¸šåŠ¡é‡Œé¢ï¼Œå¦‚æœä½ çš„ä½“é‡è¶³å¤Ÿå¤§ï¼Œæˆ‘è§‰å¾—æ˜¯è‚¯å®šä¼šé¢ä¸´ç¼“å­˜æµ·é‡ç¼“å­˜æ•°æ®çš„åœºæ™¯çš„ã€‚
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å¼•å…¥Redis Clusterã€‚
2. Redis Clusteræ˜¯ä»€ä¹ˆ çŸ¥é“äº†ä¸ºä»€ä¹ˆéœ€è¦Redis Clusterä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å¯¹å…¶ä¸€æ¢ç©¶ç«Ÿäº†ã€‚
 é‚£ä»€ä¹ˆæ˜¯Redis Clusterå‘¢ï¼Ÿ
 å¾ˆç®€å•ï¼Œä½ å°±å¯ä»¥ç†è§£ä¸ºnä¸ªä¸»ä»æ¶æ„ç»„åˆåœ¨ä¸€èµ·å¯¹å¤–æœåŠ¡ã€‚Redis Clusterè¦æ±‚è‡³å°‘éœ€è¦3ä¸ªmasteræ‰èƒ½ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼ŒåŒæ—¶æ¯ä¸ªmasterè‡³å°‘éœ€è¦æœ‰ä¸€ä¸ªslaveèŠ‚ç‚¹ã€‚
è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœä¸€ä¸ªä¸»ä»èƒ½å¤Ÿå­˜å‚¨32Gçš„æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªé›†ç¾¤åŒ…å«äº†ä¸¤ä¸ªä¸»ä»ï¼Œåˆ™æ•´ä¸ªé›†ç¾¤å°±èƒ½å¤Ÿå­˜å‚¨64Gçš„æ•°æ®ã€‚
æˆ‘ä»¬çŸ¥é“ï¼Œä¸»ä»æ¶æ„ä¸­ï¼Œå¯ä»¥é€šè¿‡å¢åŠ slaveèŠ‚ç‚¹çš„æ–¹å¼æ¥æ‰©å±•è¯»è¯·æ±‚çš„å¹¶å‘é‡ï¼Œé‚£Redis Clusterä¸­æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿè™½ç„¶æ¯ä¸ªmasterä¸‹éƒ½æŒ‚è½½äº†ä¸€ä¸ªslaveèŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨Redis Clusterä¸­çš„è¯»ã€å†™è¯·æ±‚å…¶å®éƒ½æ˜¯åœ¨masterä¸Šå®Œæˆçš„ã€‚
slaveèŠ‚ç‚¹åªæ˜¯å……å½“äº†ä¸€ä¸ªæ•°æ®å¤‡ä»½çš„è§’è‰²ï¼Œå½“masterå‘ç”Ÿäº†å®•æœºï¼Œå°±ä¼šå°†å¯¹åº”çš„slaveèŠ‚ç‚¹ææ‹”ä¸ºmasterï¼Œæ¥é‡æ–°å¯¹å¤–æä¾›æœåŠ¡ã€‚
3. èŠ‚ç‚¹è´Ÿè½½å‡è¡¡ çŸ¥é“äº†ä»€ä¹ˆæ˜¯Redis Clusterï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ä¸‹é¢çš„è®¨è®ºäº†ã€‚
ä¸çŸ¥é“ä½ æ€è€ƒè¿‡ä¸€ä¸ªé—®é¢˜æ²¡ï¼Œè¿™ä¹ˆå¤šçš„masterèŠ‚ç‚¹ã€‚æˆ‘å­˜å‚¨çš„æ—¶å€™ï¼Œåˆ°åº•è¯¥é€‰æ‹©å“ªä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿä¸€èˆ¬è¿™ç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä¼šé€‰æ‹©å“ˆå¸Œç®—æ³•ã€‚å“ˆå¸Œç®—æ³•æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ
é¦–å…ˆå°±æ˜¯å¯¹keyè®¡ç®—å‡ºä¸€ä¸ªhashå€¼ï¼Œç„¶åç”¨å“ˆå¸Œå€¼å¯¹masteræ•°é‡è¿›è¡Œå–æ¨¡ã€‚ç”±æ­¤å°±å¯ä»¥å°†keyè´Ÿè½½å‡è¡¡åˆ°æ¯ä¸€ä¸ªRedisèŠ‚ç‚¹ä¸Šå»ã€‚è¿™å°±æ˜¯ç®€å•çš„å“ˆå¸Œç®—æ³•çš„å®ç°ã€‚
é‚£Redis Clusteræ˜¯é‡‡å–çš„ä¸Šé¢çš„å“ˆå¸Œç®—æ³•å—ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚
Redis Clusterå…¶å®é‡‡å–çš„æ˜¯ç±»ä¼¼äºä¸€è‡´æ€§å“ˆå¸Œçš„ç®—æ³•æ¥å®ç°èŠ‚ç‚¹é€‰æ‹©çš„ã€‚é‚£ä¸ºä»€ä¹ˆä¸ç”¨å“ˆå¸Œç®—æ³•æ¥è¿›è¡Œå®ä¾‹é€‰æ‹©å‘¢ï¼Ÿä»¥åŠä¸ºä»€ä¹ˆè¯´æ˜¯ç±»ä¼¼çš„å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­è®¨è®ºã€‚
å› ä¸ºå¦‚æœæ­¤æ—¶æŸä¸€å°masterå‘ç”Ÿäº†å®•æœºï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šå¯¼è‡´Redisä¸­æ‰€æœ‰çš„ç¼“å­˜å¤±æ•ˆã€‚ä¸ºä»€ä¹ˆæ˜¯æ‰€æœ‰çš„ï¼Ÿå‡è®¾ä¹‹å‰æœ‰3ä¸ªmasterï¼Œé‚£ä¹ˆä¹‹å‰çš„ç®—æ³•åº”è¯¥æ˜¯ hash % 3ï¼Œä½†æ˜¯å¦‚æœå…¶ä¸­ä¸€å°masterå®•æœºäº†ï¼Œåˆ™ç®—æ³•å°±ä¼šå˜æˆ hash % 2ï¼Œä¼šå½±å“åˆ°ä¹‹å‰å­˜å‚¨çš„æ‰€æœ‰çš„keyã€‚è€Œè¿™å¯¹ç¼“å­˜åé¢ä¿æŠ¤çš„DBæ¥è¯´ï¼Œæ˜¯è‡´å‘½çš„æ‰“å‡»ã€‚
4. ä»€ä¹ˆæ˜¯ä¸€è‡´æ€§å“ˆå¸Œ çŸ¥é“äº†é€šè¿‡ä¼ ç»Ÿå“ˆå¸Œç®—æ³•æ¥å®ç°å¯¹èŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡çš„å¼Šç«¯ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›ä¸€æ­¥äº†è§£ä»€ä¹ˆæ˜¯ä¸€è‡´æ€§å“ˆå¸Œã€‚
æˆ‘ä»¬ä¸Šé¢æè¿‡å“ˆå¸Œç®—æ³•æ˜¯å¯¹masterå®ä¾‹æ•°é‡æ¥å–æ¨¡ï¼Œè€Œä¸€è‡´æ€§å“ˆå¸Œåˆ™æ˜¯å¯¹2^32å–æ¨¡ï¼Œä¹Ÿå°±æ˜¯å€¼çš„èŒƒå›´åœ¨[0, 2^32 -1]ã€‚ä¸€è‡´æ€§å“ˆå¸Œå°†å…¶èŒƒå›´æŠ½è±¡æˆäº†ä¸€ä¸ªåœ†ç¯ï¼Œä½¿ç”¨CRC16ç®—æ³•è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ä¼šè½åˆ°åœ†ç¯ä¸Šçš„æŸä¸ªåœ°æ–¹ã€‚
ç„¶åæˆ‘ä»¬çš„Rediså®ä¾‹ä¹Ÿåˆ†å¸ƒåœ¨åœ†ç¯ä¸Šï¼Œæˆ‘ä»¬åœ¨åœ†ç¯ä¸ŠæŒ‰ç…§é¡ºæ—¶é’ˆçš„é¡ºåºæ‰¾åˆ°ç¬¬ä¸€ä¸ªRediså®ä¾‹ï¼Œè¿™æ ·å°±å®Œæˆäº†å¯¹keyçš„èŠ‚ç‚¹åˆ†é…ã€‚æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ã€‚
å‡è®¾æˆ‘ä»¬æœ‰Aã€Bã€Cä¸‰ä¸ªRediså®ä¾‹æŒ‰ç…§å¦‚å›¾æ‰€ç¤ºçš„ä½ç½®åˆ†å¸ƒåœ¨åœ†ç¯ä¸Šï¼Œæ­¤æ—¶è®¡ç®—å‡ºæ¥çš„hashå€¼ï¼Œå–æ¨¡ä¹‹åä½ç½®è½åœ¨äº†ä½ç½®Dï¼Œé‚£ä¹ˆæˆ‘ä»¬æŒ‰ç…§é¡ºæ—¶é’ˆçš„é¡ºåºï¼Œå°±èƒ½å¤Ÿæ‰¾åˆ°æˆ‘ä»¬è¿™ä¸ªkeyåº”è¯¥åˆ†é…çš„Rediså®ä¾‹Bã€‚åŒç†å¦‚æœæˆ‘ä»¬è®¡ç®—å‡ºæ¥ä½ç½®åœ¨Eï¼Œé‚£ä¹ˆå¯¹åº”é€‰æ‹©çš„Redisçš„å®ä¾‹å°±æ˜¯Aã€‚
å³ä½¿è¿™ä¸ªæ—¶å€™Rediså®ä¾‹BæŒ‚äº†ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å®ä¾‹Aå’ŒCçš„ç¼“å­˜ã€‚
ä¾‹å¦‚æ­¤æ—¶èŠ‚ç‚¹BæŒ‚äº†ï¼Œé‚£ä¹‹å‰è®¡ç®—å‡ºæ¥åœ¨ä½ç½®Dçš„keyï¼Œæ­¤æ—¶ä¼šæŒ‰ç…§é¡ºæ—¶é’ˆçš„é¡ºåºï¼Œæ‰¾åˆ°èŠ‚ç‚¹Cã€‚ç›¸å½“äºè‡ªåŠ¨çš„æŠŠåŸæ¥èŠ‚ç‚¹Bçš„æµé‡ç»™è½¬ç§»åˆ°äº†èŠ‚ç‚¹Cä¸Šå»ã€‚è€Œå…¶ä»–åŸæœ¬å°±åœ¨èŠ‚ç‚¹Aå’ŒèŠ‚ç‚¹Cçš„æ•°æ®åˆ™å®Œå…¨ä¸å—å½±å“ã€‚
è¿™å°±æ˜¯ä¸€è‡´æ€§å“ˆå¸Œï¼Œèƒ½å¤Ÿåœ¨æˆ‘ä»¬åç»­éœ€è¦æ–°å¢èŠ‚ç‚¹æˆ–è€…åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸å½±å“å…¶ä»–èŠ‚ç‚¹çš„æ­£å¸¸è¿è¡Œã€‚
5. è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ ä½†æ˜¯ä¸€è‡´æ€§å“ˆå¸Œä¹Ÿå­˜åœ¨è‡ªèº«çš„å°é—®é¢˜ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬çš„RedisèŠ‚ç‚¹åˆ†å¸ƒå¦‚ä¸‹æ—¶ï¼Œå°±æœ‰é—®é¢˜äº†ã€‚</description>
    </item>
    
    <item>
      <title>ç”Ÿäº§é—®é¢˜å®šä½</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%94%9F%E4%BA%A7%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%94%9F%E4%BA%A7%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/</guid>
      <description>æ’é™¤åº”ç”¨ä¹‹å¤–çš„å½±å“å› ç´ ï¼š top(cpu)ã€free(å†…å­˜)ã€df(ç£ç›˜)ã€dstat(ç½‘ç»œæµé‡)ã€pstackã€vmstatã€st1race(åº•å±‚ç³»ç»Ÿè°ƒç”¨)
  top å®šä½CPU æœ€é«˜çš„è¿›ç¨‹
  top -Hp pid å®šä½ä½¿ç”¨ CPU æœ€é«˜çš„çº¿ç¨‹ï¼ˆæˆ–è€… ps -mp pid -o THREAD,tid,timeï¼‰
  printf &#39;0x%x&#39; tid çº¿ç¨‹ id è½¬åŒ– 16 è¿›åˆ¶
  jstack pid | grep tid æ‰¾åˆ°çº¿ç¨‹å †æ ˆ
5.1 gcçº¿ç¨‹ï¼ˆå¦‚ä¸‹æ˜¯æŸ¥çœ‹gcæƒ…å†µçš„å‡ ç§æ–¹å¼ï¼‰
ğŸ‘‰ğŸ¿ æŸ¥çœ‹gc æ—¥å¿—
ğŸ‘‰ğŸ¿ jstat -gcutil è¿›ç¨‹å· ç»Ÿè®¡é—´éš”æ¯«ç§’ ç»Ÿè®¡æ¬¡æ•°ï¼ˆç¼ºçœä»£è¡¨ä¸€æ¬¡ç»Ÿè®¡ï¼‰
ğŸ‘‰ğŸ¿ å¦‚æœæ‰€åœ¨å…¬å¸æœ‰å¯¹åº”ç”¨è¿›è¡Œç›‘æ§çš„ç»„ä»¶å½“ç„¶æ›´æ–¹ä¾¿ï¼ˆæ¯”å¦‚Prometheus + Grafanaï¼‰
 ç»“åˆå†…å­˜dumpæ—¥å¿—åˆ†æï¼š
  å“ªäº›å¯¹è±¡å¯¼è‡´çš„å†…å­˜æº¢å‡ºå¯¼è‡´é¢‘ç¹gcï¼ˆå°¤å…¶æ˜¯full gcï¼‰
  å¦‚æœä¸æ˜¯å†…å­˜æº¢å‡ºå¯¼è‡´é¢‘ç¹gcï¼Œä¹Ÿå¯èƒ½æ˜¯ä»£ç æˆ–è€…ç¬¬ä¸‰æ–¹ä¾èµ–çš„åŒ…ä¸­æœ‰æ˜¾ç¤ºçš„System.gc()è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æ·»åŠ  -XX:+DisableExplicitGCæ¥ç¦ç”¨JVMå¯¹æ˜¾ç¤ºGCçš„å“åº”ã€‚
åœ¨åˆ†é…å †å¤–å†…å­˜çš„æ—¶å€™ï¼Œå†…å­˜ä¸è¶³æ—¶ä¼šæ˜¾ç¤ºçš„è°ƒç”¨System.gc()ï¼Œå¦‚æœæ˜¾ç¤ºgcè¢«ç¦ç”¨ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å †å¤–å†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥å †å¤–å†…å­˜çš„å›æ”¶æœ€å¥½å°±ä¸è¦ä¾èµ–jvmï¼Œä¸»åŠ¨å›æ”¶å§ã€‚
   5.2 ä¸šåŠ¡çº¿ç¨‹</description>
    </item>
    
    <item>
      <title>ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/sa/%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</guid>
      <description>ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–ä¹‹å¹¶å‘ç¼–ç¨‹ æå‡ç³»ç»Ÿçš„QPSå’Œååé‡ </description>
    </item>
    
    <item>
      <title>çº¿ç¨‹å®‰å…¨çš„å•ä¾‹çš„å‡ ç§å®ç°æ–¹æ³•</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%8D%95%E4%BE%8B%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%8D%95%E4%BE%8B%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95/</guid>
      <description>1. ä½¿ç”¨synchronized é¥±æ±‰ï¼šåŒé‡æ£€æŸ¥é”å®šã€é¥¿æ±‰ã€é™æ€å†…éƒ¨ç±»ã€æšä¸¾ éƒ½å±äºåˆ©ç”¨synchronizedåŒæ­¥åŸç†å®ç°
1.1 é¥±æ±‰ï¼šåŒé‡æ£€æŸ¥é”å®šï¼ˆdouble-checked lockingï¼‰ public class SingleTon { // é™æ€å®ä¾‹å˜é‡åŠ ä¸Švolatile  private static volatile SingleTon instance; // ç§æœ‰åŒ–æ„é€ å‡½æ•°  private SingleTon() {} // åŒé‡æ£€æŸ¥é”  public static SingleTon getInstance() { if (instance == null) { synchronized(SingleTon.class){ if(instance == null){ instance = new SingleTon(); } } } return instance; } 1.2 é¥¿æ±‰ public class Singleton { private static Singleton instance = new Singleton(); private Singleton() { } public static Singleton getInstance() { return instance; } } 1.</description>
    </item>
    
    <item>
      <title>çº¿ç¨‹çŠ¶æ€</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/</guid>
      <description>Linuxçº¿ç¨‹çš„çŠ¶æ€ä¸è°ƒåº¦ Javaçº¿ç¨‹çš„6ç§çŠ¶æ€åŠåˆ‡æ¢ Java çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œåœ¨ Thread ç±»é‡Œæœ‰ä¸€ä¸ªæšä¸¾ç±»å‹ Stateï¼Œå®šä¹‰äº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€ï¼Œåˆ†åˆ«æœ‰ï¼š
 New Runnable Blocked Waiting Timed Waiting Terminated  ä¸Šå›¾æœ‰è¯¯ï¼Œæ ¹æ®Blockedæ³¨é‡Šå¯çŸ¥ï¼šçº¿ç¨‹ä»Waitingæˆ–Timed WaitingçŠ¶æ€æ¢å¤åï¼Œåº”è¯¥æ˜¯å»åˆ°BlockedçŠ¶æ€
 Thread state for a thread blocked waiting for a monitor lock. A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait.
 sleepå’ŒwaitåŒºåˆ« 1ã€sleepæ–¹æ³•æ˜¯Threadç±»çš„é™æ€æ–¹æ³•ï¼›
waitæ–¹æ³•æ˜¯Objectç±»çš„æˆå‘˜æ–¹æ³•
2ã€sleepæ–¹æ³•ä½¿å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œè®©å‡ºcpuç»™å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯å®ƒçš„ç›‘æ§çŠ¶æ€ä¾ç„¶ä¿æŒç€ï¼Œå½“æŒ‡å®šçš„æ—¶é—´åˆ°äº†åˆä¼šè‡ªåŠ¨æ¢å¤è¿è¡ŒçŠ¶æ€ã€‚åœ¨è°ƒç”¨sleepæ–¹æ³•åï¼Œçº¿ç¨‹ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ï¼›
è€Œå½“è°ƒç”¨waitæ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼Œåªæœ‰é’ˆå¯¹æ­¤å¯¹è±¡è°ƒç”¨notify()æ–¹æ³•åæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å¤„äºå‡†å¤‡çŠ¶æ€ã€‚
3ã€sleepæ–¹æ³•æœ‰å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼›
waitæ–¹æ³•ä¸éœ€è¦å¤„ç†
4ã€sleepæ–¹æ³•å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼›
waitæ–¹æ³•åªèƒ½åœ¨åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—ä¸­ä½¿ç”¨
å‚è€ƒ Linuxçº¿ç¨‹çš„çŠ¶æ€ä¸è°ƒåº¦ </description>
    </item>
    
    <item>
      <title>ç¼“å­˜é›ªå´©å’Œç¼“å­˜ç©¿é€</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%92%8C%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/redis/%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%92%8C%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F/</guid>
      <description>1. ç¼“å­˜é›ªå´© 1.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿ ç®€ä»‹ï¼šç¼“å­˜åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œæ‰€ä»¥ï¼Œåé¢çš„è¯·æ±‚éƒ½ä¼šè½åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡è¯·æ±‚è€Œå´©æ‰ã€‚
1.2 æœ‰å“ªäº›è§£å†³åŠæ³•ï¼Ÿ  äº‹å‰ï¼šå°½é‡ä¿è¯æ•´ä¸ª redis é›†ç¾¤çš„é«˜å¯ç”¨æ€§ï¼Œå‘ç°æœºå™¨å®•æœºå°½å¿«è¡¥ä¸Šã€‚é€‰æ‹©åˆé€‚çš„å†…å­˜æ·˜æ±°ç­–ç•¥ã€‚ äº‹ä¸­ï¼šæœ¬åœ°ehcacheç¼“å­˜ + hystrixé™æµ&amp;amp;é™çº§ï¼Œé¿å…MySQLå´©æ‰ äº‹åï¼šåˆ©ç”¨ redis æŒä¹…åŒ–æœºåˆ¶ä¿å­˜çš„æ•°æ®å°½å¿«æ¢å¤ç¼“å­˜  2. ç¼“å­˜ç©¿é€ 2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿ ç¼“å­˜ç©¿é€è¯´ç®€å•ç‚¹å°±æ˜¯å¤§é‡è¯·æ±‚çš„ key æ ¹æœ¬ä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œå¯¼è‡´è¯·æ±‚ç›´æ¥åˆ°äº†æ•°æ®åº“ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰ç»è¿‡ç¼“å­˜è¿™ä¸€å±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæŸä¸ªé»‘å®¢æ•…æ„åˆ¶é€ æˆ‘ä»¬ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„ key å‘èµ·å¤§é‡è¯·æ±‚ï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚è½åˆ°æ•°æ®åº“ã€‚
2.1 æœ‰å“ªäº›è§£å†³åŠæ³•ï¼Ÿ æœ€åŸºæœ¬çš„å°±æ˜¯é¦–å…ˆåšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚æ¯”å¦‚æŸ¥è¯¢çš„æ•°æ®åº“ id ä¸èƒ½å°äº 0ã€ä¼ å…¥çš„é‚®ç®±æ ¼å¼ä¸å¯¹çš„æ—¶å€™ç›´æ¥è¿”å›é”™è¯¯æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ç­‰ç­‰ã€‚
 ç¼“å­˜æ— æ•ˆ keyï¼ˆè§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼‰ : å¦‚æœç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ°æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼šSET key value EX 10086ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºçš„ä¸åŒçš„è¯·æ±‚keyï¼Œä¼šå¯¼è‡´ redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œå°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚ å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆè§£å†³è¯·æ±‚çš„ key å˜åŒ–é¢‘ç¹ä¸”keyéæ³•ï¼‰ï¼šå¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨ä¸æµ·é‡æ•°æ®ä¸­ã€‚æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰å¸ƒéš†è¿‡æ»¤å™¨å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰¾çš„é‚£ä¸ªâ€œäººâ€ã€‚å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œæˆ‘ä¼šå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯æ‰ä¼šèµ°ä¸‹é¢çš„æµç¨‹ã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯ä¸‹é¢è¿™å¼ å›¾(è¿™å¼ å›¾ç‰‡ä¸æ˜¯æˆ‘ç”»çš„ï¼Œä¸ºäº†çœäº‹ç›´æ¥åœ¨ç½‘ä¸Šæ‰¾çš„)ï¼š  ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨ã€‚
 ç¼“å­˜é¢„çƒ­ï¼ˆè§£å†³è¯·æ±‚çš„ key å˜åŒ–é¢‘ç¹ä¸”keyåˆæ³•ï¼‰ï¼šæå‰å°†éœ€è¦åšç¼“å­˜çš„æ•°æ®æ”¾å…¥redisï¼Œå³ç¼“å­˜é¢„çƒ­ã€‚  3.</description>
    </item>
    
    <item>
      <title>è„šæ‰‹æ¶</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E8%84%9A%E6%89%8B%E6%9E%B6/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E8%84%9A%E6%89%8B%E6%9E%B6/</guid>
      <description>1. ä»€ä¹ˆæ˜¯javaè„šæ‰‹æ¶ å…¶å®å°±æ˜¯javaå·¥ç¨‹æ¨¡æ¿ï¼Œä½ å¯ä»¥æŠŠä¸€äº›é€šç”¨çš„ç»„ä»¶æŠ½è±¡æˆä¸€ä¸ªæ¨¡æ¿ï¼Œä¸‹æ¬¡å¼€å‘çš„æ—¶å€™åŸºäºè¿™ä¸ªæ¨¡æ¿å¼€å‘ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚åƒapacheé»˜è®¤å°±æä¾›äº†å¾ˆå¤šæ¨¡æ¿ï¼ˆarchetypeï¼‰
2. åˆ›å»ºarchetype å‡å¦‚ä½ å·²ç»æœ‰äº†ä¸€ä¸ªmavené¡¹ç›®ï¼Œæƒ³ç»™è¯¥é¡¹ç›®åˆ›å»ºä¸€ä¸ªarchetypeæ¨¡æ¿ã€‚ä½ éœ€è¦cd åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ(pom.xmlåŒçº§ç›®å½•)ã€‚
mvn archetype:create-from-project æ‰§è¡Œå®Œåï¼Œç”Ÿæˆçš„targetç±»ä¼¼è¿™æ ·ï¼š
3. ç”Ÿæˆarchetypeæ¨¡æ¿ å…ˆcd target/generated-sources/archetype/ ç„¶åæ‰§è¡Œï¼š
mvn install æ‰§è¡ŒæˆåŠŸåï¼Œæ‰§è¡Œcrawlå‘½ä»¤ï¼š
mvn archetype:crawl åœ¨æœ¬åœ°ä»“åº“çš„æ ¹ç›®å½•ç”Ÿæˆarchetype-catalog.xmléª¨æ¶é…ç½®æ–‡ä»¶:
æ¥çœ‹ä¸€çœ‹å®ƒé‡Œé¢çš„å†…å®¹:
4. ä½¿ç”¨archetypeæ¨¡æ¿ æ‰§è¡Œmvn archetype:generate -DarchetypeCatalog=localä»æœ¬åœ°archetypeæ¨¡æ¿ä¸­åˆ›å»ºé¡¹ç›®ã€‚
mvn archetype:generate -DarchetypeCatalog=local ç„¶åä¼šè®©ä½ é€‰æ‹©æ¨¡æ¿åºå·å’ŒgroupId artifactId versionå’Œpackageä¿¡æ¯ï¼š
è‡³æ­¤ï¼Œé¡¹ç›®åˆ›å»ºæˆåŠŸ!
å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨IDEAæ¥å¸®æˆ‘ä»¬ç”¨å›¾å½¢ç•Œé¢ä½¿ç”¨archetypeæ¨¡æ¿åˆ›å»ºé¡¹ç›®ï¼š
è¿™é‡Œçš„ä¿¡æ¯æ ¹æ®archetype-catalog.xmlä¸­çš„å¡«å†™ï¼Œå¦‚æœæ˜¯æœ¬åœ°å¯¼å…¥Repositoryå¯ä»¥ä¸å¡«æˆ–è€…å¡«&amp;rsquo;local&#39;ã€‚æ—¢ç„¶æåˆ°æœ¬åœ°ï¼Œé‚£ä¹ˆè‡ªç„¶å¯ä»¥æƒ³åˆ°ï¼Œå¯ä»¥å°†è„šæ‰‹æ¶å‘å¸ƒåˆ°nexusç§æœã€‚å‘å¸ƒåˆ°ç§æœå¯ä»¥å‚çœ‹è¿™é‡Œï¼šhttps://www.cnblogs.com/woshimrf/p/maven-artifact-demo.html</description>
    </item>
    
    <item>
      <title>è°ƒæ•´Spring HandlerMappingçš„é¡ºåº</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E8%B0%83%E6%95%B4spring-handlermapping%E7%9A%84%E9%A1%BA%E5%BA%8F/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/spring/%E8%B0%83%E6%95%B4spring-handlermapping%E7%9A%84%E9%A1%BA%E5%BA%8F/</guid>
      <description>å½“è¯·æ±‚å½¢å¦‚ï¼š/opendoc/jquery-1.10.2.min.js çš„é™æ€èµ„æºæ—¶ï¼Œå¦‚æœæ°å¥½å­˜åœ¨åŒ¹é…è¿™ä¸ªè¯·æ±‚çš„Controlleræ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé™æ€èµ„æºè¯·æ±‚ä¼šè¢« RequestMappingHandlerMapping åˆ†é…ç»™è¿™ä¸ªControllerå¤„ç†ï¼Œä»è€Œå¯èƒ½æ‰¾ä¸åˆ°é™æ€èµ„æºï¼Œä¾‹å¦‚å­˜åœ¨ä¸‹é¢è¿™æ ·çš„Controllerï¼š
@RequestMapping(value = &amp;#34;/{name}/{version}&amp;#34;, method = {RequestMethod.POST, RequestMethod.GET}) public void rest3(@PathVariable(&amp;#34;name&amp;#34;) String name, @PathVariable(&amp;#34;version&amp;#34;) String version, HttpServletRequest request, HttpServletResponse response) { this.doRest(name, version, request, response); } ä¸ºäº†èƒ½æ­£ç¡®åŒ¹é…çš„é™æ€èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´Spring HandlerMappingçš„é¡ºåºï¼Œè®©SimpleUrlHandlerMappingå…ˆäºRequestMappingHandlerMappingå»åŒ¹é…è¯·æ±‚ï¼ŒSimpleUrlHandlerMappingä¼šè¿”å›ä¸€ä¸ªç”¨äºåŠ è½½é™æ€èµ„æºçš„ResourceHttpRequestHandler
é»˜è®¤æƒ…å†µä¸‹RequestMappingHandlerMapping å…ˆäºSimpleUrlHandlerMappingåŒ¹é…è¯·æ±‚ï¼ŒDispatcherServletä¸­åˆå§‹åŒ–HandlerMappingçš„é¡ºåºæºç å¦‚ä¸‹æ‰€ç¤ºï¼š
/** * Initialize the HandlerMappings used by this class. * &amp;lt;p&amp;gt;If no HandlerMapping beans are defined in the BeanFactory for this namespace, * we default to BeanNameUrlHandlerMapping. */ private void initHandlerMappings(ApplicationContext context) { this.handlerMappings = null; if (this.</description>
    </item>
    
    <item>
      <title>éƒ¨ç½²vueé¡¹ç›®</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E9%83%A8%E7%BD%B2vue%E9%A1%B9%E7%9B%AE/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/nginx/%E9%83%A8%E7%BD%B2vue%E9%A1%B9%E7%9B%AE/</guid>
      <description>æ—¶å¸¸æˆ‘ä»¬æƒ³é€šè¿‡pathæ¥åŒºåˆ†é¡¹ç›®ï¼Œä¾‹å¦‚é€šè¿‡ http://xxxx/admin è®¿é—®æˆ‘ä»¬çš„åå°ï¼Œå¦‚æœvueæ˜¯çš„modeæ˜¯historyï¼Œè¯·æ³¨æ„å¦‚ä¸‹é…ç½®ï¼š
 ä¿®æ”¹vue-config.jsæ–‡ä»¶é…ç½®  module.exports = {publicPath: &amp;#34;&amp;#34;}; ä¿®æ”¹è·¯ç”±route/index  const router = new Router({ base: &amp;#39;/admin/&amp;#39;, //è·¯ç”±æ¨¡å¼ä¸ºhistoryæ¨¡å¼æ—¶ï¼Œbaseå¿…é¡»è¦åŠ ä¸Š;è·¯ç”±æ¨¡å¼ä¸ºhashæ¨¡å¼æ—¶ï¼Œbaseå¯åŠ å¯ä¸åŠ   mode: &amp;#39;history&amp;#39;, routes: [] } æ­¤æ—¶ï¼Œè¯·æ±‚æ˜¯å½¢å¦‚ http://xxxx/admin/xxx.cssï¼Œä»è€Œé¿å…å‡ºç°å½¢å¦‚http://xxxx/xxx.cssæ‰¾ä¸åˆ°èµ„æºçš„æƒ…å†µã€‚</description>
    </item>
    
    <item>
      <title>é”</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E9%94%81/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E9%94%81/</guid>
      <description>é˜¿é‡Œé¢è¯•ï¼Œé—®äº†æˆ‘ä¹è§‚é”ã€æ‚²è§‚é”ã€AQSã€syncå’ŒLockï¼Œè¿™ä¸ªå›ç­”è®©æˆ‘æ‹¿äº†offer é˜¿é‡Œé¢è¯•å®˜ï¼šè¯´ä¸€ä¸‹å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«ï¼Ÿ </description>
    </item>
    
    <item>
      <title>é˜¿é‡Œäº‘ä¸‹é…ç½®MySQLè¿œç¨‹è¿æ¥</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/other/%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%8B%E9%85%8D%E7%BD%AEmysql%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/other/%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%8B%E9%85%8D%E7%BD%AEmysql%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</guid>
      <description>1ï¼‰use mysql 2ï¼‰å°†hostè®¾ç½®ä¸º%è¡¨ç¤ºä»»ä½•ipéƒ½èƒ½è¿æ¥mysql update user set host=&amp;#39;%&amp;#39; where user=&amp;#39;root&amp;#39; and host=&amp;#39;localhost&amp;#39;; 3) æ‰§è¡Œå®Œä»¥ä¸Šè¯­å¥,æ¥ç€æ‰§è¡Œä»¥ä¸‹è¯­å¥ ,åˆ·æ–°æƒé™è¡¨,ä½¿é…ç½®ç”Ÿæ•ˆ flush privileges; å‚è€ƒé“¾æ¥ï¼š é˜¿é‡Œäº‘ä¸‹é…ç½®MySQLè¿œç¨‹è¿æ¥çš„æ­¥éª¤è¯¦è§£ </description>
    </item>
    
    <item>
      <title>é›¶æ‹·è´</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E9%9B%B6%E6%8B%B7%E8%B4%9D/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/java/%E9%9B%B6%E6%8B%B7%E8%B4%9D/</guid>
      <description>ç®€ä»‹ é›¶æ‹·è´çš„â€œé›¶â€æ˜¯æŒ‡ç”¨æˆ·æ€å’Œå†…æ ¸æ€é—´copyæ•°æ®çš„æ¬¡æ•°ä¸ºé›¶ã€‚
ä¼ ç»Ÿçš„æ•°æ®copyï¼ˆæ–‡ä»¶åˆ°æ–‡ä»¶ã€clientåˆ°serverç­‰ï¼‰æ¶‰åŠåˆ°å››æ¬¡ç”¨æˆ·æ€å†…æ ¸æ€åˆ‡æ¢ã€å››æ¬¡copyã€‚å››æ¬¡copyä¸­ï¼Œä¸¤æ¬¡åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€é—´copyéœ€è¦CPUå‚ä¸ã€ä¸¤æ¬¡åœ¨å†…æ ¸æ€ä¸IOè®¾å¤‡é—´copyä¸ºDMAæ–¹å¼ä¸éœ€è¦CPUå‚ä¸ã€‚é›¶æ‹·è´é¿å…äº†ç”¨æˆ·æ€å’Œå†…æ ¸æ€é—´çš„copyã€å‡å°‘äº†Javaé›¶æ‹·è´æœºåˆ¶è§£ææ ¸æ€é—´çš„åˆ‡æ¢ã€‚
 DMA(Direct Memory Accessï¼Œç›´æ¥å†…å­˜å­˜å–) æ˜¯æ‰€æœ‰ç°ä»£ç”µè„‘çš„é‡è¦ç‰¹è‰²ï¼Œå®ƒå…è®¸ä¸åŒé€Ÿåº¦çš„ç¡¬ä»¶è£…ç½®æ¥æ²Ÿé€šï¼Œè€Œä¸éœ€è¦ä¾èµ–äºCPU çš„å¤§é‡ä¸­æ–­è´Ÿè½½ã€‚ DMAæ§åˆ¶å™¨ï¼Œæ¥ç®¡äº†æ•°æ®è¯»å†™è¯·æ±‚ï¼Œå‡å°‘CPUçš„è´Ÿæ‹…ã€‚è¿™æ ·ä¸€æ¥ï¼ŒCPUèƒ½é«˜æ•ˆå·¥ä½œäº†ã€‚ ç°ä»£ç¡¬ç›˜åŸºæœ¬éƒ½æ”¯æŒDMAã€‚
 ä½¿ç”¨Zero Copyå‰åå¯¹æ¯”ï¼š
ä½¿ç”¨å‰ï¼š
ä½¿ç”¨åï¼š
Linuxæ”¯æŒçš„(å¸¸è§)é›¶æ‹·è´ mmapå†…å­˜æ˜ å°„ sendfile Sendfile With DMA Scatter/Gather Copy splice
æ— è®ºæ˜¯ä¼ ç»ŸIOæ–¹å¼ï¼Œè¿˜æ˜¯å¼•å…¥é›¶æ‹·è´ä¹‹åï¼Œ2æ¬¡DMA copy æ˜¯éƒ½å°‘ä¸äº†çš„ã€‚å› ä¸ºä¸¤æ¬¡DMAéƒ½æ˜¯ä¾èµ–ç¡¬ä»¶å®Œæˆçš„ã€‚
å®é™…ä¸Šï¼Œé›¶æ‹·è´æ—¶æœ‰å¹¿ä¹‰å’Œç‹­ä¹‰ä¹‹åˆ†çš„ã€‚ å¹¿ä¹‰é›¶æ‹·è´ï¼š èƒ½å‡å°‘æ‹·è´æ¬¡æ•°ï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®æ‹·è´ï¼Œå°±ç®—ä½œâ€œé›¶æ‹·è´â€ã€‚ è¿™æ˜¯ç›®å‰ï¼Œå¯¹é›¶æ‹·è´æœ€ä¸ºå¹¿æ³›çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œè¿™æ˜¯å¹¿ä¹‰ä¸Šçš„é›¶æ‹·è´ï¼Œå¹¶ä¸æ˜¯æ“ä½œç³»ç»Ÿ æ„ä¹‰ä¸Šçš„é›¶æ‹·è´ã€‚
Javaé›¶æ‹·è´æœºåˆ¶è§£æ Linuxæä¾›çš„é¢†æ‹·è´æŠ€æœ¯ Javaå¹¶ä¸æ˜¯å…¨æ”¯æŒï¼Œæ”¯æŒ2ç§(å†…å­˜æ˜ å°„mmapã€sendfile)ï¼›
NIOæä¾›çš„å†…å­˜æ˜ å°„ï¼šMappedByteBuffer
NIOæä¾›çš„sendfileï¼šFileChannel.transferTo() FileChannel.transferFrom()
é€‚ç”¨åœºæ™¯ æ•°æ®ä¸éœ€è¦åº”ç”¨ç¨‹åºè®¡ç®—å¤„ç†çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼šè®¿é—®é™æ€èµ„æº
å‚è€ƒ Javaä¸­çš„é›¶æ‹·è´ Javaé›¶æ‹·è´ </description>
    </item>
    
    <item>
      <title>é«˜æ€§èƒ½æ— é”é˜Ÿåˆ—Disruptor</title>
      <link>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97disruptor/</link>
      <pubDate>Fri, 27 Aug 2021 11:15:10 +0800</pubDate>
      
      <guid>https://xuzhijvn.github.io/zh-cn/posts/code/other/%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97disruptor/</guid>
      <description>1. JDKä¸­çš„é˜Ÿåˆ— åœ¨jdkä¸­çš„é˜Ÿåˆ—éƒ½å®ç°äº†java.util.Queueæ¥å£ï¼Œåœ¨é˜Ÿåˆ—ä¸­åˆåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒArrayDequeï¼ŒLinkedListç­‰ç­‰ï¼Œè¿˜æœ‰ä¸€ç±»éƒ½åœ¨java.util.concurrentåŒ…ä¸‹å±äºçº¿ç¨‹å®‰å…¨ï¼Œè€Œåœ¨æˆ‘ä»¬çœŸå®çš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬çš„æœºå™¨éƒ½æ˜¯å±äºå¤šçº¿ç¨‹ï¼Œå½“å¤šçº¿ç¨‹å¯¹åŒä¸€ä¸ªé˜Ÿåˆ—è¿›è¡Œæ’é˜Ÿæ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨çº¿ç¨‹ä¸å®‰å…¨ä¼šå‡ºç°ï¼Œè¦†ç›–æ•°æ®ï¼Œæ•°æ®ä¸¢å¤±ç­‰æ— æ³•é¢„æµ‹çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸ªæ—¶å€™åªèƒ½é€‰æ‹©çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ã€‚åœ¨jdkä¸­æä¾›çš„çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ä¸‹é¢ç®€å•åˆ—ä¸¾éƒ¨åˆ†é˜Ÿåˆ—:
   é˜Ÿåˆ—åå­— æ˜¯å¦åŠ é” æ•°æ®ç»“æ„ å…³é”®æŠ€æœ¯ç‚¹ æ˜¯å¦æœ‰é” æ˜¯å¦æœ‰ç•Œ     ArrayBlockingQueue æ˜¯ æ•°ç»„array ReentrantLock æœ‰é” æœ‰ç•Œ   LinkedBlockingQueue æ˜¯ é“¾è¡¨ ReentrantLock æœ‰é” æœ‰ç•Œ   LinkedTransferQueue å¦ é“¾è¡¨ CAS æ— é” æ— ç•Œ   ConcurrentLinkedQueue å¦ é“¾è¡¨ CAS æ— é” æ— ç•Œ    æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œæˆ‘ä»¬æ— é”çš„é˜Ÿåˆ—æ˜¯æ— ç•Œçš„ï¼Œæœ‰é”çš„é˜Ÿåˆ—æ˜¯æœ‰ç•Œçš„ï¼Œè¿™é‡Œå°±ä¼šæ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨çœŸæ­£çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œæ— ç•Œçš„é˜Ÿåˆ—ï¼Œå¯¹æˆ‘ä»¬ç³»ç»Ÿçš„å½±å“æ¯”è¾ƒå¤§ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬å†…å­˜ç›´æ¥æº¢å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå¾—æ’é™¤æ— ç•Œé˜Ÿåˆ—ï¼Œå½“ç„¶å¹¶ä¸æ˜¯æ— ç•Œé˜Ÿåˆ—å°±æ²¡ç”¨äº†ï¼Œåªæ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹å¾—æ’é™¤ã€‚å…¶æ¬¡è¿˜å‰©ä¸‹ArrayBlockingQueueï¼ŒLinkedBlockingQueueä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä»–ä»¬ä¸¤ä¸ªéƒ½æ˜¯ç”¨ReentrantLockæ§åˆ¶çš„çº¿ç¨‹å®‰å…¨ï¼Œä»–ä»¬ä¸¤ä¸ªçš„åŒºåˆ«ä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯é“¾è¡¨ï¼Œåœ¨é˜Ÿåˆ—ä¸­ï¼Œä¸€èˆ¬è·å–è¿™ä¸ªé˜Ÿåˆ—å…ƒç´ ä¹‹åç´§æ¥ç€ä¼šè·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…ä¸€æ¬¡è·å–å¤šä¸ªé˜Ÿåˆ—å…ƒç´ éƒ½æœ‰å¯èƒ½ï¼Œè€Œæ•°ç»„åœ¨å†…å­˜ä¸­åœ°å€æ˜¯è¿ç»­çš„ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸­ä¼šæœ‰ç¼“å­˜çš„ä¼˜åŒ–(ä¸‹é¢ä¹Ÿä¼šä»‹ç»ç¼“å­˜è¡Œ)ï¼Œæ‰€ä»¥è®¿é—®çš„é€Ÿåº¦ä¼šç•¥èƒœä¸€ç­¹ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå°½é‡å»é€‰æ‹©ArrayBlockingQueueã€‚è€Œäº‹å®è¯æ˜åœ¨å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ¡†æ¶ä¸­ï¼Œæ¯”å¦‚æ—©æœŸçš„log4jå¼‚æ­¥ï¼Œéƒ½æ˜¯é€‰æ‹©çš„ArrayBlockingQueueã€‚
å½“ç„¶ArrayBlockingQueueï¼Œä¹Ÿæœ‰è‡ªå·±çš„å¼Šç«¯ï¼Œå°±æ˜¯æ€§èƒ½æ¯”è¾ƒä½ï¼Œä¸ºä»€ä¹ˆjdkä¼šå¢åŠ ä¸€äº›æ— é”çš„é˜Ÿåˆ—ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†å¢åŠ æ€§èƒ½ï¼Œå¾ˆè‹¦æ¼ï¼Œåˆéœ€è¦æ— é”ï¼Œåˆéœ€è¦æœ‰ç•Œï¼Œè¿™ä¸ªæ—¶å€™ææ€•ä¼šå¿ä¸ä½è¯´ä¸€å¥ä½ å’‹ä¸ä¸Šå¤©å‘¢ï¼Ÿä½†æ˜¯è¿˜çœŸæœ‰äººä¸Šå¤©äº†ã€‚
2.Disruptor Disruptorå°±æ˜¯ä¸Šé¢è¯´çš„é‚£ä¸ªå¤©ï¼ŒDisruptoræ˜¯è‹±å›½å¤–æ±‡äº¤æ˜“å…¬å¸LMAXå¼€å‘çš„ä¸€ä¸ªé«˜æ€§èƒ½é˜Ÿåˆ—ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå¼€æºçš„å¹¶å‘æ¡†æ¶ï¼Œå¹¶è·å¾—2011Dukeâ€™sç¨‹åºæ¡†æ¶åˆ›æ–°å¥–ã€‚èƒ½å¤Ÿåœ¨æ— é”çš„æƒ…å†µä¸‹å®ç°ç½‘ç»œçš„Queueå¹¶å‘æ“ä½œï¼ŒåŸºäºDisruptorå¼€å‘çš„ç³»ç»Ÿå•çº¿ç¨‹èƒ½æ”¯æ’‘æ¯ç§’600ä¸‡è®¢å•ã€‚ç›®å‰ï¼ŒåŒ…æ‹¬Apache Stormã€Camelã€Log4j2ç­‰ç­‰çŸ¥åçš„æ¡†æ¶éƒ½åœ¨å†…éƒ¨é›†æˆäº†Disruptorç”¨æ¥æ›¿ä»£jdkçš„é˜Ÿåˆ—ï¼Œä»¥æ­¤æ¥è·å¾—é«˜æ€§èƒ½ã€‚
3.1ä¸ºä»€ä¹ˆè¿™ä¹ˆç‰›é€¼ï¼Ÿ ä¸Šé¢å·²ç»æŠŠDisruptorå¹å‡ºäº†èŠ±äº†ï¼Œä½ è‚¯å®šä¼šäº§ç”Ÿç–‘é—®ï¼Œä»–çœŸçš„èƒ½æœ‰è¿™ä¹ˆç‰›é€¼å—ï¼Œæˆ‘çš„å›ç­”æ˜¯å½“ç„¶çš„ï¼Œåœ¨Disruptorä¸­æœ‰ä¸‰å¤§æ€å™¨:
  CAS
  æ¶ˆé™¤ä¼ªå…±äº«
  RingBuffer
  æœ‰äº†è¿™ä¸‰å¤§æ€å™¨ï¼ŒDisruptoræ‰å˜å¾—å¦‚æ­¤ç‰›é€¼ã€‚
3.1.1 é”å’ŒCAS CASå®ç°æ— é”é˜Ÿåˆ—å¯ä»¥å‚è€ƒğŸ‘‰æ— é”é˜Ÿåˆ—çš„å®ç° æˆ‘ä»¬ArrayBlockingQueueä¸ºä»€ä¹ˆä¼šè¢«æŠ›å¼ƒçš„ä¸€ç‚¹ï¼Œå°±æ˜¯å› ä¸ºç”¨äº†é‡é‡çº§locké”ï¼Œåœ¨æˆ‘ä»¬åŠ é”è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šæŠŠé”æŒ‚èµ·ï¼Œè§£é”åï¼Œåˆä¼šæŠŠçº¿ç¨‹æ¢å¤,è¿™ä¸€è¿‡ç¨‹ä¼šæœ‰ä¸€å®šçš„å¼€é”€ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸€æ—¦æ²¡æœ‰è·å–é”ï¼Œè¿™ä¸ªçº¿ç¨‹å°±åªèƒ½ä¸€ç›´ç­‰å¾…ï¼Œè¿™ä¸ªçº¿ç¨‹ä»€ä¹ˆäº‹ä¹Ÿä¸èƒ½åšã€‚</description>
    </item>
    
  </channel>
</rss>
